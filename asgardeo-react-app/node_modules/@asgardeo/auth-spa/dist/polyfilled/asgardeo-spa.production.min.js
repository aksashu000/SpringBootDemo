var AsgardeoAuth=function(e){"use strict";var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function n(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function i(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})})),t}var l=function(e){return e&&e.Math==Math&&e},o=l("object"==typeof globalThis&&globalThis)||l("object"==typeof window&&window)||l("object"==typeof self&&self)||l("object"==typeof t&&t)||function(){return this}()||Function("return this")(),c=o,r=function(e){try{return!!e()}catch(e){return!0}},a=!r((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})),s=a,d=Function.prototype,u=d.bind,h=d.call,Z=s&&u.bind(h,h),b=s?function(e){return e&&Z(e)}:function(e){return e&&function(){return h.apply(e,arguments)}},m=TypeError,p=function(e){if(null==e)throw m("Can't call method on "+e);return e},y=p,G=Object,X=function(e){return G(y(e))},V=X,W=b({}.hasOwnProperty),I=Object.hasOwn||function(e,t){return W(V(e),t)},g={},S={exports:{}},R=o,f=Object.defineProperty,v=function(e,t){try{f(R,e,{value:t,configurable:!0,writable:!0})}catch(n){R[e]=t}return t},Y=v,K="__core-js_shared__",N=o[K]||Y(K,{}),C=N;(S.exports=function(e,t){return C[e]||(C[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.24.0",mode:"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.24.0/LICENSE",source:"https://github.com/zloirock/core-js"});var k,J,L=b,U=0,H=Math.random(),T=L(1..toString),w=function(e){return"Symbol("+(void 0===e?"":e)+")_"+T(++U+H,36)},F=function(e){return"function"==typeof e},x=o,z=F,P=function(e){return z(e)?e:void 0},B=function(e,t){return arguments.length<2?P(x[e]):x[e]&&x[e][t]},j=B("navigator","userAgent")||"",M=o,Q=j,E=M.process,D=M.Deno,O=E&&E.versions||D&&D.version,A=O&&O.v8;A&&(J=(k=A.split("."))[0]>0&&k[0]<4?1:+(k[0]+k[1])),!J&&Q&&(!(k=Q.match(/Edge\/(\d+)/))||k[1]>=74)&&(k=Q.match(/Chrome\/(\d+)/))&&(J=+k[1]);var _=J,q=_,$=r,ee=!!Object.getOwnPropertySymbols&&!$((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&q&&q<41})),te=ee&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,ne=o,ie=S.exports,le=I,oe=w,ce=ee,re=te,ae=ie("wks"),se=ne.Symbol,de=se&&se.for,ue=re?se:se&&se.withoutSetter||oe,he=function(e){if(!le(ae,e)||!ce&&"string"!=typeof ae[e]){var t="Symbol."+e;ce&&le(se,e)?ae[e]=se[e]:ae[e]=re&&de?de(t):ue(t)}return ae[e]},Ze=he;g.f=Ze;var be={},me=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),pe=F,ye=function(e){return"object"==typeof e?null!==e:pe(e)},Ge=ye,Xe=o.document,Ve=Ge(Xe)&&Ge(Xe.createElement),We=function(e){return Ve?Xe.createElement(e):{}},Ie=We,ge=!me&&!r((function(){return 7!=Object.defineProperty(Ie("div"),"a",{get:function(){return 7}}).a})),Se=me&&r((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),Re=ye,fe=String,ve=TypeError,Ye=function(e){if(Re(e))return e;throw ve(fe(e)+" is not an object")},Ke=a,Ne=Function.prototype.call,Ce=Ke?Ne.bind(Ne):function(){return Ne.apply(Ne,arguments)},ke=b({}.isPrototypeOf),Je=B,Le=F,Ue=ke,He=Object,Te=te?function(e){return"symbol"==typeof e}:function(e){var t=Je("Symbol");return Le(t)&&Ue(t.prototype,He(e))},we=String,Fe=function(e){try{return we(e)}catch(e){return"Object"}},xe=F,ze=Fe,Pe=TypeError,Be=function(e){if(xe(e))return e;throw Pe(ze(e)+" is not a function")},je=Be,Me=function(e,t){var n=e[t];return null==n?void 0:je(n)},Qe=Ce,Ee=F,De=ye,Oe=TypeError,Ae=Ce,_e=ye,qe=Te,$e=Me,et=function(e,t){var n,i;if("string"===t&&Ee(n=e.toString)&&!De(i=Qe(n,e)))return i;if(Ee(n=e.valueOf)&&!De(i=Qe(n,e)))return i;if("string"!==t&&Ee(n=e.toString)&&!De(i=Qe(n,e)))return i;throw Oe("Can't convert object to primitive value")},tt=TypeError,nt=he("toPrimitive"),it=function(e,t){if(!_e(e)||qe(e))return e;var n,i=$e(e,nt);if(i){if(void 0===t&&(t="default"),n=Ae(i,e,t),!_e(n)||qe(n))return n;throw tt("Can't convert object to primitive value")}return void 0===t&&(t="number"),et(e,t)},lt=it,ot=Te,ct=function(e){var t=lt(e,"string");return ot(t)?t:t+""},rt=me,at=ge,st=Se,dt=Ye,ut=ct,ht=TypeError,Zt=Object.defineProperty,bt=Object.getOwnPropertyDescriptor,mt="enumerable",pt="configurable",yt="writable";be.f=rt?st?function(e,t,n){if(dt(e),t=ut(t),dt(n),"function"==typeof e&&"prototype"===t&&"value"in n&&yt in n&&!n.writable){var i=bt(e,t);i&&i.writable&&(e[t]=n.value,n={configurable:pt in n?n.configurable:i.configurable,enumerable:mt in n?n.enumerable:i.enumerable,writable:!1})}return Zt(e,t,n)}:Zt:function(e,t,n){if(dt(e),t=ut(t),dt(n),at)try{return Zt(e,t,n)}catch(e){}if("get"in n||"set"in n)throw ht("Accessors not supported");return"value"in n&&(e[t]=n.value),e};var Gt=c,Xt=I,Vt=g,Wt=be.f,It=function(e){var t=Gt.Symbol||(Gt.Symbol={});Xt(t,e)||Wt(t,e,{value:Vt.f(e)})};It("matchAll");var gt={},St={},Rt={}.propertyIsEnumerable,ft=Object.getOwnPropertyDescriptor,vt=ft&&!Rt.call({1:2},1);St.f=vt?function(e){var t=ft(this,e);return!!t&&t.enumerable}:Rt;var Yt=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},Kt=b,Nt=Kt({}.toString),Ct=Kt("".slice),kt=function(e){return Ct(Nt(e),8,-1)},Jt=r,Lt=kt,Ut=Object,Ht=b("".split),Tt=Jt((function(){return!Ut("z").propertyIsEnumerable(0)}))?function(e){return"String"==Lt(e)?Ht(e,""):Ut(e)}:Ut,wt=Tt,Ft=p,xt=function(e){return wt(Ft(e))},zt=me,Pt=Ce,Bt=St,jt=Yt,Mt=xt,Qt=ct,Et=I,Dt=ge,Ot=Object.getOwnPropertyDescriptor;gt.f=zt?Ot:function(e,t){if(e=Mt(e),t=Qt(t),Dt)try{return Ot(e,t)}catch(e){}if(Et(e,t))return jt(!Pt(Bt.f,e,t),e[t])};var At=be,_t=Yt,qt=me?function(e,t,n){return At.f(e,t,_t(1,n))}:function(e,t,n){return e[t]=n,e},$t={exports:{}},en=me,tn=I,nn=Function.prototype,ln=en&&Object.getOwnPropertyDescriptor,on=tn(nn,"name"),cn={EXISTS:on,PROPER:on&&"something"===function(){}.name,CONFIGURABLE:on&&(!en||en&&ln(nn,"name").configurable)},rn=F,an=N,sn=b(Function.toString);rn(an.inspectSource)||(an.inspectSource=function(e){return sn(e)});var dn,un,hn,Zn=an.inspectSource,bn=F,mn=Zn,pn=o.WeakMap,yn=bn(pn)&&/native code/.test(mn(pn)),Gn=S.exports,Xn=w,Vn=Gn("keys"),Wn=function(e){return Vn[e]||(Vn[e]=Xn(e))},In={},gn=yn,Sn=o,Rn=b,fn=ye,vn=qt,Yn=I,Kn=N,Nn=Wn,Cn=In,kn="Object already initialized",Jn=Sn.TypeError,Ln=Sn.WeakMap;if(gn||Kn.state){var Un=Kn.state||(Kn.state=new Ln),Hn=Rn(Un.get),Tn=Rn(Un.has),wn=Rn(Un.set);dn=function(e,t){if(Tn(Un,e))throw new Jn(kn);return t.facade=e,wn(Un,e,t),t},un=function(e){return Hn(Un,e)||{}},hn=function(e){return Tn(Un,e)}}else{var Fn=Nn("state");Cn[Fn]=!0,dn=function(e,t){if(Yn(e,Fn))throw new Jn(kn);return t.facade=e,vn(e,Fn,t),t},un=function(e){return Yn(e,Fn)?e[Fn]:{}},hn=function(e){return Yn(e,Fn)}}var xn={set:dn,get:un,has:hn,enforce:function(e){return hn(e)?un(e):dn(e,{})},getterFor:function(e){return function(t){var n;if(!fn(t)||(n=un(t)).type!==e)throw Jn("Incompatible receiver, "+e+" required");return n}}},zn=r,Pn=F,Bn=I,jn=me,Mn=cn.CONFIGURABLE,Qn=Zn,En=xn.enforce,Dn=xn.get,On=Object.defineProperty,An=jn&&!zn((function(){return 8!==On((function(){}),"length",{value:8}).length})),_n=String(String).split("String"),qn=$t.exports=function(e,t,n){"Symbol("===String(t).slice(0,7)&&(t="["+String(t).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(t="get "+t),n&&n.setter&&(t="set "+t),(!Bn(e,"name")||Mn&&e.name!==t)&&(jn?On(e,"name",{value:t,configurable:!0}):e.name=t),An&&n&&Bn(n,"arity")&&e.length!==n.arity&&On(e,"length",{value:n.arity});try{n&&Bn(n,"constructor")&&n.constructor?jn&&On(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}var i=En(e);return Bn(i,"source")||(i.source=_n.join("string"==typeof t?t:"")),e};Function.prototype.toString=qn((function(){return Pn(this)&&Dn(this).source||Qn(this)}),"toString");var $n=F,ei=be,ti=$t.exports,ni=v,ii=function(e,t,n,i){i||(i={});var l=i.enumerable,o=void 0!==i.name?i.name:t;if($n(n)&&ti(n,o,i),i.global)l?e[t]=n:ni(t,n);else{try{i.unsafe?e[t]&&(l=!0):delete e[t]}catch(e){}l?e[t]=n:ei.f(e,t,{value:n,enumerable:!1,configurable:!i.nonConfigurable,writable:!i.nonWritable})}return e},li={},oi=Math.ceil,ci=Math.floor,ri=Math.trunc||function(e){var t=+e;return(t>0?ci:oi)(t)},ai=ri,si=function(e){var t=+e;return t!=t||0===t?0:ai(t)},di=si,ui=Math.max,hi=Math.min,Zi=function(e,t){var n=di(e);return n<0?ui(n+t,0):hi(n,t)},bi=si,mi=Math.min,pi=function(e){return e>0?mi(bi(e),9007199254740991):0},yi=pi,Gi=function(e){return yi(e.length)},Xi=xt,Vi=Zi,Wi=Gi,Ii=function(e){return function(t,n,i){var l,o=Xi(t),c=Wi(o),r=Vi(i,c);if(e&&n!=n){for(;c>r;)if((l=o[r++])!=l)return!0}else for(;c>r;r++)if((e||r in o)&&o[r]===n)return e||r||0;return!e&&-1}},gi={includes:Ii(!0),indexOf:Ii(!1)},Si=I,Ri=xt,fi=gi.indexOf,vi=In,Yi=b([].push),Ki=function(e,t){var n,i=Ri(e),l=0,o=[];for(n in i)!Si(vi,n)&&Si(i,n)&&Yi(o,n);for(;t.length>l;)Si(i,n=t[l++])&&(~fi(o,n)||Yi(o,n));return o},Ni=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Ci=Ki,ki=Ni.concat("length","prototype");li.f=Object.getOwnPropertyNames||function(e){return Ci(e,ki)};var Ji={};Ji.f=Object.getOwnPropertySymbols;var Li=B,Ui=li,Hi=Ji,Ti=Ye,wi=b([].concat),Fi=Li("Reflect","ownKeys")||function(e){var t=Ui.f(Ti(e)),n=Hi.f;return n?wi(t,n(e)):t},xi=I,zi=Fi,Pi=gt,Bi=be,ji=r,Mi=F,Qi=/#|\.prototype\./,Ei=function(e,t){var n=Oi[Di(e)];return n==_i||n!=Ai&&(Mi(t)?ji(t):!!t)},Di=Ei.normalize=function(e){return String(e).replace(Qi,".").toLowerCase()},Oi=Ei.data={},Ai=Ei.NATIVE="N",_i=Ei.POLYFILL="P",qi=Ei,$i=o,el=gt.f,tl=qt,nl=ii,il=v,ll=function(e,t,n){for(var i=zi(t),l=Bi.f,o=Pi.f,c=0;c<i.length;c++){var r=i[c];xi(e,r)||n&&xi(n,r)||l(e,r,o(t,r))}},ol=qi,cl=function(e,t){var n,i,l,o,c,r=e.target,a=e.global,s=e.stat;if(n=a?$i:s?$i[r]||il(r,{}):($i[r]||{}).prototype)for(i in t){if(o=t[i],l=e.dontCallGetSet?(c=el(n,i))&&c.value:n[i],!ol(a?i:r+(s?".":"#")+i,e.forced)&&void 0!==l){if(typeof o==typeof l)continue;ll(o,l)}(e.sham||l&&l.sham)&&tl(o,"sham",!0),nl(n,i,o,e)}},rl={},al=Ki,sl=Ni,dl=Object.keys||function(e){return al(e,sl)},ul=me,hl=Se,Zl=be,bl=Ye,ml=xt,pl=dl;rl.f=ul&&!hl?Object.defineProperties:function(e,t){bl(e);for(var n,i=ml(t),l=pl(t),o=l.length,c=0;o>c;)Zl.f(e,n=l[c++],i[n]);return e};var yl,Gl=B("document","documentElement"),Xl=Ye,Vl=rl,Wl=Ni,Il=In,gl=Gl,Sl=We,Rl=Wn("IE_PROTO"),fl=function(){},vl=function(e){return"<script>"+e+"</"+"script>"},Yl=function(e){e.write(vl("")),e.close();var t=e.parentWindow.Object;return e=null,t},Kl=function(){try{yl=new ActiveXObject("htmlfile")}catch(e){}var e,t;Kl="undefined"!=typeof document?document.domain&&yl?Yl(yl):((t=Sl("iframe")).style.display="none",gl.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(vl("document.F=Object")),e.close(),e.F):Yl(yl);for(var n=Wl.length;n--;)delete Kl.prototype[Wl[n]];return Kl()};Il[Rl]=!0;var Nl=Object.create||function(e,t){var n;return null!==e?(fl.prototype=Xl(e),n=new fl,fl.prototype=null,n[Rl]=e):n=Kl(),void 0===t?n:Vl.f(n,t)},Cl=he,kl=Nl,Jl=be.f,Ll=Cl("unscopables"),Ul=Array.prototype;null==Ul[Ll]&&Jl(Ul,Ll,{configurable:!0,value:kl(null)});var Hl=function(e){Ul[Ll][e]=!0},Tl=gi.includes,wl=Hl;cl({target:"Array",proto:!0,forced:r((function(){return!Array(1).includes()}))},{includes:function(e){return Tl(this,e,arguments.length>1?arguments[1]:void 0)}}),wl("includes"),Hl("flat"),Hl("flatMap");var Fl={},xl=Be,zl=function(e){var t,n;this.promise=new e((function(e,i){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=i})),this.resolve=xl(t),this.reject=xl(n)};Fl.f=function(e){return new zl(e)};var Pl=Be,Bl=a,jl=b(b.bind),Ml=function(e,t){return Pl(e),void 0===t?e:Bl?jl(e,t):function(){return e.apply(t,arguments)}},Ql={},El=Ql,Dl=he("iterator"),Ol=Array.prototype,Al=function(e){return void 0!==e&&(El.Array===e||Ol[Dl]===e)},_l={};_l[he("toStringTag")]="z";var ql="[object z]"===String(_l),$l=F,eo=kt,to=he("toStringTag"),no=Object,io="Arguments"==eo(function(){return arguments}()),lo=ql?eo:function(e){var t,n,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=no(e),to))?n:io?eo(t):"Object"==(i=eo(t))&&$l(t.callee)?"Arguments":i},oo=lo,co=Me,ro=Ql,ao=he("iterator"),so=function(e){if(null!=e)return co(e,ao)||co(e,"@@iterator")||ro[oo(e)]},uo=Ce,ho=Be,Zo=Ye,bo=Fe,mo=so,po=TypeError,yo=function(e,t){var n=arguments.length<2?mo(e):t;if(ho(n))return Zo(uo(n,e));throw po(bo(e)+" is not iterable")},Go=Ce,Xo=Ye,Vo=Me,Wo=function(e,t,n){var i,l;Xo(e);try{if(!(i=Vo(e,"return"))){if("throw"===t)throw n;return n}i=Go(i,e)}catch(e){l=!0,i=e}if("throw"===t)throw n;if(l)throw i;return Xo(i),n},Io=Ml,go=Ce,So=Ye,Ro=Fe,fo=Al,vo=Gi,Yo=ke,Ko=yo,No=so,Co=Wo,ko=TypeError,Jo=function(e,t){this.stopped=e,this.result=t},Lo=Jo.prototype,Uo=Ce,Ho=Be,To=Fl,wo=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},Fo=function(e,t,n){var i,l,o,c,r,a,s,d=n&&n.that,u=!(!n||!n.AS_ENTRIES),h=!(!n||!n.IS_RECORD),Z=!(!n||!n.IS_ITERATOR),b=!(!n||!n.INTERRUPTED),m=Io(t,d),p=function(e){return i&&Co(i,"normal",e),new Jo(!0,e)},y=function(e){return u?(So(e),b?m(e[0],e[1],p):m(e[0],e[1])):b?m(e,p):m(e)};if(h)i=e.iterator;else if(Z)i=e;else{if(!(l=No(e)))throw ko(Ro(e)+" is not iterable");if(fo(l)){for(o=0,c=vo(e);c>o;o++)if((r=y(e[o]))&&Yo(Lo,r))return r;return new Jo(!1)}i=Ko(e,l)}for(a=h?e.next:i.next;!(s=go(a,i)).done;){try{r=y(s.value)}catch(e){Co(i,"throw",e)}if("object"==typeof r&&r&&Yo(Lo,r))return r}return new Jo(!1)};cl({target:"Promise",stat:!0},{allSettled:function(e){var t=this,n=To.f(t),i=n.resolve,l=n.reject,o=wo((function(){var n=Ho(t.resolve),l=[],o=0,c=1;Fo(e,(function(e){var r=o++,a=!1;c++,Uo(n,t,e).then((function(e){a||(a=!0,l[r]={status:"fulfilled",value:e},--c||i(l))}),(function(e){a||(a=!0,l[r]={status:"rejected",reason:e},--c||i(l))}))})),--c||i(l)}));return o.error&&l(o.value),n.promise}});var xo=o.Promise,zo=b,Po=r,Bo=F,jo=lo,Mo=Zn,Qo=function(){},Eo=[],Do=B("Reflect","construct"),Oo=/^\s*(?:class|function)\b/,Ao=zo(Oo.exec),_o=!Oo.exec(Qo),qo=function(e){if(!Bo(e))return!1;try{return Do(Qo,Eo,e),!0}catch(e){return!1}},$o=function(e){if(!Bo(e))return!1;switch(jo(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return _o||!!Ao(Oo,Mo(e))}catch(e){return!0}};$o.sham=!0;var ec=!Do||Po((function(){var e;return qo(qo.call)||!qo(Object)||!qo((function(){e=!0}))||e}))?$o:qo,tc=ec,nc=Fe,ic=TypeError,lc=function(e){if(tc(e))return e;throw ic(nc(e)+" is not a constructor")},oc=Ye,cc=lc,rc=he("species"),ac=function(e,t){var n,i=oc(e).constructor;return void 0===i||null==(n=oc(i)[rc])?t:cc(n)},sc=Ye,dc=ye,uc=Fl,hc=cl,Zc=xo,bc=r,mc=B,pc=F,yc=ac,Gc=function(e,t){if(sc(e),dc(t)&&t.constructor===e)return t;var n=uc.f(e);return(0,n.resolve)(t),n.promise},Xc=ii,Vc=Zc&&Zc.prototype;if(hc({target:"Promise",proto:!0,real:!0,forced:!!Zc&&bc((function(){Vc.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=yc(this,mc("Promise")),n=pc(e);return this.then(n?function(n){return Gc(t,e()).then((function(){return n}))}:e,n?function(n){return Gc(t,e()).then((function(){throw n}))}:e)}}),pc(Zc)){var Wc=mc("Promise").prototype.finally;Vc.finally!==Wc&&Xc(Vc,"finally",Wc,{unsafe:!0})}var Ic=$t.exports,gc=be,Sc=function(e,t,n){return n.get&&Ic(n.get,t,{getter:!0}),n.set&&Ic(n.set,t,{setter:!0}),gc.f(e,t,n)},Rc=Ye,fc=function(){var e=Rc(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t},vc=me,Yc=Sc,Kc=fc,Nc=r,Cc=o.RegExp,kc=Cc.prototype,Jc=vc&&Nc((function(){var e=!0;try{Cc(".","d")}catch(t){e=!1}var t={},n="",i=e?"dgimsy":"gimsy",l=function(e,i){Object.defineProperty(t,e,{get:function(){return n+=i,!0}})},o={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};for(var c in e&&(o.hasIndices="d"),o)l(c,o[c]);return Object.getOwnPropertyDescriptor(kc,"flags").get.call(t)!==i||n!==i}));Jc&&Yc(kc,"flags",{configurable:!0,get:Kc});var Lc,Uc,Hc,Tc=!r((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),wc=I,Fc=F,xc=X,zc=Tc,Pc=Wn("IE_PROTO"),Bc=Object,jc=Bc.prototype,Mc=zc?Bc.getPrototypeOf:function(e){var t=xc(e);if(wc(t,Pc))return t[Pc];var n=t.constructor;return Fc(n)&&t instanceof n?n.prototype:t instanceof Bc?jc:null},Qc=r,Ec=F,Dc=Mc,Oc=ii,Ac=he("iterator"),_c=!1;[].keys&&("next"in(Hc=[].keys())?(Uc=Dc(Dc(Hc)))!==Object.prototype&&(Lc=Uc):_c=!0);var qc=null==Lc||Qc((function(){var e={};return Lc[Ac].call(e)!==e}));qc&&(Lc={}),Ec(Lc[Ac])||Oc(Lc,Ac,(function(){return this}));var $c,er,tr={IteratorPrototype:Lc,BUGGY_SAFARI_ITERATORS:_c},nr=be.f,ir=I,lr=he("toStringTag"),or=function(e,t,n){e&&!n&&(e=e.prototype),e&&!ir(e,lr)&&nr(e,lr,{configurable:!0,value:t})},cr=tr.IteratorPrototype,rr=Nl,ar=Yt,sr=or,dr=Ql,ur=function(){return this},hr=function(e,t,n,i){var l=t+" Iterator";return e.prototype=rr(cr,{next:ar(+!i,n)}),sr(e,l,!1),dr[l]=ur,e},Zr=lo,br=String,mr=function(e){if("Symbol"===Zr(e))throw TypeError("Cannot convert a Symbol value to a string");return br(e)},pr=ye,yr=kt,Gr=he("match"),Xr=Ce,Vr=I,Wr=ke,Ir=fc,gr=RegExp.prototype,Sr=b,Rr=si,fr=mr,vr=p,Yr=Sr("".charAt),Kr=Sr("".charCodeAt),Nr=Sr("".slice),Cr=function(e){return function(t,n){var i,l,o=fr(vr(t)),c=Rr(n),r=o.length;return c<0||c>=r?e?"":void 0:(i=Kr(o,c))<55296||i>56319||c+1===r||(l=Kr(o,c+1))<56320||l>57343?e?Yr(o,c):i:e?Nr(o,c,c+2):l-56320+(i-55296<<10)+65536}},kr={codeAt:Cr(!1),charAt:Cr(!0)},Jr=kr.charAt,Lr=function(e,t,n){return t+(n?Jr(e,t).length:1)},Ur=r,Hr=o.RegExp,Tr=Ur((function(){var e=Hr("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),wr=Tr||Ur((function(){return!Hr("a","y").sticky})),Fr={BROKEN_CARET:Tr||Ur((function(){var e=Hr("^r","gy");return e.lastIndex=2,null!=e.exec("str")})),MISSED_STICKY:wr,UNSUPPORTED_Y:Tr},xr=r,zr=o.RegExp,Pr=xr((function(){var e=zr(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)})),Br=r,jr=o.RegExp,Mr=Br((function(){var e=jr("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")})),Qr=Ce,Er=b,Dr=mr,Or=fc,Ar=Fr,_r=S.exports,qr=Nl,$r=xn.get,ea=Pr,ta=Mr,na=_r("native-string-replace",String.prototype.replace),ia=RegExp.prototype.exec,la=ia,oa=Er("".charAt),ca=Er("".indexOf),ra=Er("".replace),aa=Er("".slice),sa=(er=/b*/g,Qr(ia,$c=/a/,"a"),Qr(ia,er,"a"),0!==$c.lastIndex||0!==er.lastIndex),da=Ar.BROKEN_CARET,ua=void 0!==/()??/.exec("")[1];(sa||ua||da||ea||ta)&&(la=function(e){var t,n,i,l,o,c,r,a=this,s=$r(a),d=Dr(e),u=s.raw;if(u)return u.lastIndex=a.lastIndex,t=Qr(la,u,d),a.lastIndex=u.lastIndex,t;var h=s.groups,Z=da&&a.sticky,b=Qr(Or,a),m=a.source,p=0,y=d;if(Z&&(b=ra(b,"y",""),-1===ca(b,"g")&&(b+="g"),y=aa(d,a.lastIndex),a.lastIndex>0&&(!a.multiline||a.multiline&&"\n"!==oa(d,a.lastIndex-1))&&(m="(?: "+m+")",y=" "+y,p++),n=new RegExp("^(?:"+m+")",b)),ua&&(n=new RegExp("^"+m+"$(?!\\s)",b)),sa&&(i=a.lastIndex),l=Qr(ia,Z?n:a,y),Z?l?(l.input=aa(l.input,p),l[0]=aa(l[0],p),l.index=a.lastIndex,a.lastIndex+=l[0].length):a.lastIndex=0:sa&&l&&(a.lastIndex=a.global?l.index+l[0].length:i),ua&&l&&l.length>1&&Qr(na,l[0],n,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(l[o]=void 0)})),l&&h)for(l.groups=c=qr(null),o=0;o<h.length;o++)c[(r=h[o])[0]]=l[r[1]];return l});var ha=la,Za=Ce,ba=Ye,ma=F,pa=kt,ya=ha,Ga=TypeError,Xa=function(e,t){var n=e.exec;if(ma(n)){var i=Za(n,e,t);return null!==i&&ba(i),i}if("RegExp"===pa(e))return Za(ya,e,t);throw Ga("RegExp#exec called on incompatible receiver")},Va=cl,Wa=Ce,Ia=b,ga=hr,Sa=p,Ra=pi,fa=mr,va=Ye,Ya=function(e){var t;return pr(e)&&(void 0!==(t=e[Gr])?!!t:"RegExp"==yr(e))},Ka=function(e){var t=e.flags;return void 0!==t||"flags"in gr||Vr(e,"flags")||!Wr(gr,e)?t:Xr(Ir,e)},Na=Me,Ca=ii,ka=r,Ja=ac,La=Lr,Ua=Xa,Ha=xn,Ta=he("matchAll"),wa="RegExp String",Fa="RegExp String Iterator",xa=Ha.set,za=Ha.getterFor(Fa),Pa=RegExp.prototype,Ba=TypeError,ja=Ia("".indexOf),Ma=Ia("".matchAll),Qa=!!Ma&&!ka((function(){Ma("a",/./)})),Ea=ga((function(e,t,n,i){xa(this,{type:Fa,regexp:e,string:t,global:n,unicode:i,done:!1})}),wa,(function(){var e=za(this);if(e.done)return{value:void 0,done:!0};var t=e.regexp,n=e.string,i=Ua(t,n);return null===i?{value:void 0,done:e.done=!0}:e.global?(""===fa(i[0])&&(t.lastIndex=La(n,Ra(t.lastIndex),e.unicode)),{value:i,done:!1}):(e.done=!0,{value:i,done:!1})})),Da=function(e){var t,n,i,l=va(this),o=fa(e),c=Ja(l,RegExp),r=fa(Ka(l));return t=new c(c===RegExp?l.source:l,r),n=!!~ja(r,"g"),i=!!~ja(r,"u"),t.lastIndex=Ra(l.lastIndex),new Ea(t,o,n,i)};Va({target:"String",proto:!0,forced:Qa},{matchAll:function(e){var t,n,i,l=Sa(this);if(null!=e){if(Ya(e)&&(t=fa(Sa(Ka(e))),!~ja(t,"g")))throw Ba("`.matchAll` does not allow non-global regexes");if(Qa)return Ma(l,e);if(i=Na(e,Ta))return Wa(i,e,l)}else if(Qa)return Ma(l,e);return n=fa(l),new RegExp(e,"g")[Ta](n)}}),Ta in Pa||Ca(Pa,Ta,Da);var Oa=a,Aa=Function.prototype,_a=Aa.apply,qa=Aa.call,$a="object"==typeof Reflect&&Reflect.apply||(Oa?qa.bind(_a):function(){return qa.apply(_a,arguments)});cl({target:"RegExp",proto:!0,forced:/./.exec!==ha},{exec:ha});var es=b,ts=ii,ns=ha,is=r,ls=he,os=qt,cs=ls("species"),rs=RegExp.prototype,as=b,ss=X,ds=Math.floor,us=as("".charAt),hs=as("".replace),Zs=as("".slice),bs=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,ms=/\$([$&'`]|\d{1,2})/g,ps=$a,ys=Ce,Gs=b,Xs=function(e,t,n,i){var l=ls(e),o=!is((function(){var t={};return t[l]=function(){return 7},7!=""[e](t)})),c=o&&!is((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[cs]=function(){return n},n.flags="",n[l]=/./[l]),n.exec=function(){return t=!0,null},n[l](""),!t}));if(!o||!c||n){var r=es(/./[l]),a=t(l,""[e],(function(e,t,n,i,l){var c=es(e),a=t.exec;return a===ns||a===rs.exec?o&&!l?{done:!0,value:r(t,n,i)}:{done:!0,value:c(n,t,i)}:{done:!1}}));ts(String.prototype,e,a[0]),ts(rs,l,a[1])}i&&os(rs[l],"sham",!0)},Vs=r,Ws=Ye,Is=F,gs=si,Ss=pi,Rs=mr,fs=p,vs=Lr,Ys=Me,Ks=function(e,t,n,i,l,o){var c=n+e.length,r=i.length,a=ms;return void 0!==l&&(l=ss(l),a=bs),hs(o,a,(function(o,a){var s;switch(us(a,0)){case"$":return"$";case"&":return e;case"`":return Zs(t,0,n);case"'":return Zs(t,c);case"<":s=l[Zs(a,1,-1)];break;default:var d=+a;if(0===d)return o;if(d>r){var u=ds(d/10);return 0===u?o:u<=r?void 0===i[u-1]?us(a,1):i[u-1]+us(a,1):o}s=i[d-1]}return void 0===s?"":s}))},Ns=Xa,Cs=he("replace"),ks=Math.max,Js=Math.min,Ls=Gs([].concat),Us=Gs([].push),Hs=Gs("".indexOf),Ts=Gs("".slice),ws="$0"==="a".replace(/./,"$0"),Fs=!!/./[Cs]&&""===/./[Cs]("a","$0");Xs("replace",(function(e,t,n){var i=Fs?"$":"$0";return[function(e,n){var i=fs(this),l=null==e?void 0:Ys(e,Cs);return l?ys(l,e,i,n):ys(t,Rs(i),e,n)},function(e,l){var o=Ws(this),c=Rs(e);if("string"==typeof l&&-1===Hs(l,i)&&-1===Hs(l,"$<")){var r=n(t,o,c,l);if(r.done)return r.value}var a=Is(l);a||(l=Rs(l));var s=o.global;if(s){var d=o.unicode;o.lastIndex=0}for(var u=[];;){var h=Ns(o,c);if(null===h)break;if(Us(u,h),!s)break;""===Rs(h[0])&&(o.lastIndex=vs(c,Ss(o.lastIndex),d))}for(var Z,b="",m=0,p=0;p<u.length;p++){for(var y=Rs((h=u[p])[0]),G=ks(Js(gs(h.index),c.length),0),X=[],V=1;V<h.length;V++)Us(X,void 0===(Z=h[V])?Z:String(Z));var W=h.groups;if(a){var I=Ls([y],X,G,c);void 0!==W&&Us(I,W);var g=Rs(ps(l,void 0,I))}else g=Ks(y,c,G,X,W,l);G>=m&&(b+=Ts(c,m,G)+g,m=G+y.length)}return b+Ts(c,m)}]}),!!Vs((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}))||!ws||Fs);var xs={exports:{}},zs=he("iterator"),Ps=!1;try{var Bs=0,js={next:function(){return{done:!!Bs++}},return:function(){Ps=!0}};js[zs]=function(){return this},Array.from(js,(function(){throw 2}))}catch(e){}var Ms,Qs,Es,Ds="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,Os=F,As=String,_s=TypeError,qs=b,$s=Ye,ed=function(e){if("object"==typeof e||Os(e))return e;throw _s("Can't set "+As(e)+" as a prototype")},td=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=qs(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),t=n instanceof Array}catch(e){}return function(n,i){return $s(n),ed(i),t?e(n,i):n.__proto__=i,n}}():void 0),nd=Ds,id=me,ld=o,od=F,cd=ye,rd=I,ad=lo,sd=Fe,dd=qt,ud=ii,hd=be.f,Zd=ke,bd=Mc,md=td,pd=he,yd=w,Gd=xn.enforce,Xd=xn.get,Vd=ld.Int8Array,Wd=Vd&&Vd.prototype,Id=ld.Uint8ClampedArray,gd=Id&&Id.prototype,Sd=Vd&&bd(Vd),Rd=Wd&&bd(Wd),fd=Object.prototype,vd=ld.TypeError,Yd=pd("toStringTag"),Kd=yd("TYPED_ARRAY_TAG"),Nd="TypedArrayConstructor",Cd=nd&&!!md&&"Opera"!==ad(ld.opera),kd=!1,Jd={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},Ld={BigInt64Array:8,BigUint64Array:8},Ud=function(e){var t=bd(e);if(cd(t)){var n=Xd(t);return n&&rd(n,Nd)?n.TypedArrayConstructor:Ud(t)}},Hd=function(e){if(!cd(e))return!1;var t=ad(e);return rd(Jd,t)||rd(Ld,t)};for(Ms in Jd)(Es=(Qs=ld[Ms])&&Qs.prototype)?Gd(Es).TypedArrayConstructor=Qs:Cd=!1;for(Ms in Ld)(Es=(Qs=ld[Ms])&&Qs.prototype)&&(Gd(Es).TypedArrayConstructor=Qs);if((!Cd||!od(Sd)||Sd===Function.prototype)&&(Sd=function(){throw vd("Incorrect invocation")},Cd))for(Ms in Jd)ld[Ms]&&md(ld[Ms],Sd);if((!Cd||!Rd||Rd===fd)&&(Rd=Sd.prototype,Cd))for(Ms in Jd)ld[Ms]&&md(ld[Ms].prototype,Rd);if(Cd&&bd(gd)!==Rd&&md(gd,Rd),id&&!rd(Rd,Yd))for(Ms in kd=!0,hd(Rd,Yd,{get:function(){return cd(this)?this[Kd]:void 0}}),Jd)ld[Ms]&&dd(ld[Ms],Kd,Ms);var Td={NATIVE_ARRAY_BUFFER_VIEWS:Cd,TYPED_ARRAY_TAG:kd&&Kd,aTypedArray:function(e){if(Hd(e))return e;throw vd("Target is not a typed array")},aTypedArrayConstructor:function(e){if(od(e)&&(!md||Zd(Sd,e)))return e;throw vd(sd(e)+" is not a typed array constructor")},exportTypedArrayMethod:function(e,t,n,i){if(id){if(n)for(var l in Jd){var o=ld[l];if(o&&rd(o.prototype,e))try{delete o.prototype[e]}catch(n){try{o.prototype[e]=t}catch(e){}}}Rd[e]&&!n||ud(Rd,e,n?t:Cd&&Wd[e]||t,i)}},exportTypedArrayStaticMethod:function(e,t,n){var i,l;if(id){if(md){if(n)for(i in Jd)if((l=ld[i])&&rd(l,e))try{delete l[e]}catch(e){}if(Sd[e]&&!n)return;try{return ud(Sd,e,n?t:Cd&&Sd[e]||t)}catch(e){}}for(i in Jd)!(l=ld[i])||l[e]&&!n||ud(l,e,t)}},getTypedArrayConstructor:Ud,isView:function(e){if(!cd(e))return!1;var t=ad(e);return"DataView"===t||rd(Jd,t)||rd(Ld,t)},isTypedArray:Hd,TypedArray:Sd,TypedArrayPrototype:Rd},wd=o,Fd=r,xd=function(e,t){if(!t&&!Ps)return!1;var n=!1;try{var i={};i[zs]=function(){return{next:function(){return{done:n=!0}}}},e(i)}catch(e){}return n},zd=Td.NATIVE_ARRAY_BUFFER_VIEWS,Pd=wd.ArrayBuffer,Bd=wd.Int8Array,jd=!zd||!Fd((function(){Bd(1)}))||!Fd((function(){new Bd(-1)}))||!xd((function(e){new Bd,new Bd(null),new Bd(1.5),new Bd(e)}),!0)||Fd((function(){return 1!==new Bd(new Pd(2),1,void 0).length})),Md=ii,Qd=function(e,t,n){for(var i in t)Md(e,i,t[i],n);return e},Ed=ke,Dd=TypeError,Od=function(e,t){if(Ed(t,e))return e;throw Dd("Incorrect invocation")},Ad=si,_d=pi,qd=RangeError,$d=function(e){if(void 0===e)return 0;var t=Ad(e),n=_d(t);if(t!==n)throw qd("Wrong length or index");return n},eu=Array,tu=Math.abs,nu=Math.pow,iu=Math.floor,lu=Math.log,ou=Math.LN2,cu={pack:function(e,t,n){var i,l,o,c=eu(n),r=8*n-t-1,a=(1<<r)-1,s=a>>1,d=23===t?nu(2,-24)-nu(2,-77):0,u=e<0||0===e&&1/e<0?1:0,h=0;for((e=tu(e))!=e||e===1/0?(l=e!=e?1:0,i=a):(i=iu(lu(e)/ou),e*(o=nu(2,-i))<1&&(i--,o*=2),(e+=i+s>=1?d/o:d*nu(2,1-s))*o>=2&&(i++,o/=2),i+s>=a?(l=0,i=a):i+s>=1?(l=(e*o-1)*nu(2,t),i+=s):(l=e*nu(2,s-1)*nu(2,t),i=0));t>=8;)c[h++]=255&l,l/=256,t-=8;for(i=i<<t|l,r+=t;r>0;)c[h++]=255&i,i/=256,r-=8;return c[--h]|=128*u,c},unpack:function(e,t){var n,i=e.length,l=8*i-t-1,o=(1<<l)-1,c=o>>1,r=l-7,a=i-1,s=e[a--],d=127&s;for(s>>=7;r>0;)d=256*d+e[a--],r-=8;for(n=d&(1<<-r)-1,d>>=-r,r+=t;r>0;)n=256*n+e[a--],r-=8;if(0===d)d=1-c;else{if(d===o)return n?NaN:s?-1/0:1/0;n+=nu(2,t),d-=c}return(s?-1:1)*n*nu(2,d-t)}},ru=X,au=Zi,su=Gi,du=function(e){for(var t=ru(this),n=su(t),i=arguments.length,l=au(i>1?arguments[1]:void 0,n),o=i>2?arguments[2]:void 0,c=void 0===o?n:au(o,n);c>l;)t[l++]=e;return t},uu=ct,hu=be,Zu=Yt,bu=function(e,t,n){var i=uu(t);i in e?hu.f(e,i,Zu(0,n)):e[i]=n},mu=Zi,pu=Gi,yu=bu,Gu=Array,Xu=Math.max,Vu=function(e,t,n){for(var i=pu(e),l=mu(t,i),o=mu(void 0===n?i:n,i),c=Gu(Xu(o-l,0)),r=0;l<o;l++,r++)yu(c,r,e[l]);return c.length=r,c},Wu=o,Iu=b,gu=me,Su=Ds,Ru=cn,fu=qt,vu=Qd,Yu=r,Ku=Od,Nu=si,Cu=pi,ku=$d,Ju=cu,Lu=Mc,Uu=td,Hu=li.f,Tu=be.f,wu=du,Fu=Vu,xu=or,zu=Ru.PROPER,Pu=Ru.CONFIGURABLE,Bu=xn.get,ju=xn.set,Mu="ArrayBuffer",Qu="DataView",Eu="Wrong index",Du=Wu.ArrayBuffer,Ou=Du,Au=Ou&&Ou.prototype,_u=Wu.DataView,qu=_u&&_u.prototype,$u=Object.prototype,eh=Wu.Array,th=Wu.RangeError,nh=Iu(wu),ih=Iu([].reverse),lh=Ju.pack,oh=Ju.unpack,ch=function(e){return[255&e]},rh=function(e){return[255&e,e>>8&255]},ah=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},sh=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},dh=function(e){return lh(e,23,4)},uh=function(e){return lh(e,52,8)},hh=function(e,t){Tu(e.prototype,t,{get:function(){return Bu(this)[t]}})},Zh=function(e,t,n,i){var l=ku(n),o=Bu(e);if(l+t>o.byteLength)throw th(Eu);var c=Bu(o.buffer).bytes,r=l+o.byteOffset,a=Fu(c,r,r+t);return i?a:ih(a)},bh=function(e,t,n,i,l,o){var c=ku(n),r=Bu(e);if(c+t>r.byteLength)throw th(Eu);for(var a=Bu(r.buffer).bytes,s=c+r.byteOffset,d=i(+l),u=0;u<t;u++)a[s+u]=d[o?u:t-u-1]};if(Su){var mh=zu&&Du.name!==Mu;if(Yu((function(){Du(1)}))&&Yu((function(){new Du(-1)}))&&!Yu((function(){return new Du,new Du(1.5),new Du(NaN),mh&&!Pu})))mh&&Pu&&fu(Du,"name",Mu);else{(Ou=function(e){return Ku(this,Au),new Du(ku(e))}).prototype=Au;for(var ph,yh=Hu(Du),Gh=0;yh.length>Gh;)(ph=yh[Gh++])in Ou||fu(Ou,ph,Du[ph]);Au.constructor=Ou}Uu&&Lu(qu)!==$u&&Uu(qu,$u);var Xh=new _u(new Ou(2)),Vh=Iu(qu.setInt8);Xh.setInt8(0,2147483648),Xh.setInt8(1,2147483649),!Xh.getInt8(0)&&Xh.getInt8(1)||vu(qu,{setInt8:function(e,t){Vh(this,e,t<<24>>24)},setUint8:function(e,t){Vh(this,e,t<<24>>24)}},{unsafe:!0})}else Ou=function(e){Ku(this,Au);var t=ku(e);ju(this,{bytes:nh(eh(t),0),byteLength:t}),gu||(this.byteLength=t)},Au=Ou.prototype,_u=function(e,t,n){Ku(this,qu),Ku(e,Au);var i=Bu(e).byteLength,l=Nu(t);if(l<0||l>i)throw th("Wrong offset");if(l+(n=void 0===n?i-l:Cu(n))>i)throw th("Wrong length");ju(this,{buffer:e,byteLength:n,byteOffset:l}),gu||(this.buffer=e,this.byteLength=n,this.byteOffset=l)},qu=_u.prototype,gu&&(hh(Ou,"byteLength"),hh(_u,"buffer"),hh(_u,"byteLength"),hh(_u,"byteOffset")),vu(qu,{getInt8:function(e){return Zh(this,1,e)[0]<<24>>24},getUint8:function(e){return Zh(this,1,e)[0]},getInt16:function(e){var t=Zh(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=Zh(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return sh(Zh(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function(e){return sh(Zh(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(e){return oh(Zh(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(e){return oh(Zh(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(e,t){bh(this,1,e,ch,t)},setUint8:function(e,t){bh(this,1,e,ch,t)},setInt16:function(e,t){bh(this,2,e,rh,t,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,t){bh(this,2,e,rh,t,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,t){bh(this,4,e,ah,t,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,t){bh(this,4,e,ah,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,t){bh(this,4,e,dh,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function(e,t){bh(this,8,e,uh,t,arguments.length>2?arguments[2]:void 0)}});xu(Ou,Mu),xu(_u,Qu);var Wh={ArrayBuffer:Ou,DataView:_u},Ih=ye,gh=Math.floor,Sh=Number.isInteger||function(e){return!Ih(e)&&isFinite(e)&&gh(e)===e},Rh=si,fh=RangeError,vh=function(e){var t=Rh(e);if(t<0)throw fh("The argument can't be less than 0");return t},Yh=RangeError,Kh=function(e,t){var n=vh(e);if(n%t)throw Yh("Wrong offset");return n},Nh=Ml,Ch=Ce,kh=lc,Jh=X,Lh=Gi,Uh=yo,Hh=so,Th=Al,wh=Td.aTypedArrayConstructor,Fh=function(e){var t,n,i,l,o,c,r=kh(this),a=Jh(e),s=arguments.length,d=s>1?arguments[1]:void 0,u=void 0!==d,h=Hh(a);if(h&&!Th(h))for(c=(o=Uh(a,h)).next,a=[];!(l=Ch(c,o)).done;)a.push(l.value);for(u&&s>2&&(d=Nh(d,arguments[2])),n=Lh(a),i=new(wh(r))(n),t=0;n>t;t++)i[t]=u?d(a[t],t):a[t];return i},xh=kt,zh=Array.isArray||function(e){return"Array"==xh(e)},Ph=ec,Bh=ye,jh=he("species"),Mh=Array,Qh=function(e){var t;return zh(e)&&(t=e.constructor,(Ph(t)&&(t===Mh||zh(t.prototype))||Bh(t)&&null===(t=t[jh]))&&(t=void 0)),void 0===t?Mh:t},Eh=Ml,Dh=Tt,Oh=X,Ah=Gi,_h=function(e,t){return new(Qh(e))(0===t?0:t)},qh=b([].push),$h=function(e){var t=1==e,n=2==e,i=3==e,l=4==e,o=6==e,c=7==e,r=5==e||o;return function(a,s,d,u){for(var h,Z,b=Oh(a),m=Dh(b),p=Eh(s,d),y=Ah(m),G=0,X=u||_h,V=t?X(a,y):n||c?X(a,0):void 0;y>G;G++)if((r||G in m)&&(Z=p(h=m[G],G,b),e))if(t)V[G]=Z;else if(Z)switch(e){case 3:return!0;case 5:return h;case 6:return G;case 2:qh(V,h)}else switch(e){case 4:return!1;case 7:qh(V,h)}return o?-1:i||l?l:V}},eZ={forEach:$h(0),map:$h(1),filter:$h(2),some:$h(3),every:$h(4),find:$h(5),findIndex:$h(6),filterReject:$h(7)},tZ=B,nZ=be,iZ=me,lZ=he("species"),oZ=F,cZ=ye,rZ=td,aZ=cl,sZ=o,dZ=Ce,uZ=me,hZ=jd,ZZ=Td,bZ=Wh,mZ=Od,pZ=Yt,yZ=qt,GZ=Sh,XZ=pi,VZ=$d,WZ=Kh,IZ=ct,gZ=I,SZ=lo,RZ=ye,fZ=Te,vZ=Nl,YZ=ke,KZ=td,NZ=li.f,CZ=Fh,kZ=eZ.forEach,JZ=function(e){var t=tZ(e),n=nZ.f;iZ&&t&&!t[lZ]&&n(t,lZ,{configurable:!0,get:function(){return this}})},LZ=be,UZ=gt,HZ=function(e,t,n){var i,l;return rZ&&oZ(i=t.constructor)&&i!==n&&cZ(l=i.prototype)&&l!==n.prototype&&rZ(e,l),e},TZ=xn.get,wZ=xn.set,FZ=xn.enforce,xZ=LZ.f,zZ=UZ.f,PZ=Math.round,BZ=sZ.RangeError,jZ=bZ.ArrayBuffer,MZ=jZ.prototype,QZ=bZ.DataView,EZ=ZZ.NATIVE_ARRAY_BUFFER_VIEWS,DZ=ZZ.TYPED_ARRAY_TAG,OZ=ZZ.TypedArray,AZ=ZZ.TypedArrayPrototype,_Z=ZZ.aTypedArrayConstructor,qZ=ZZ.isTypedArray,$Z="BYTES_PER_ELEMENT",eb="Wrong length",tb=function(e,t){_Z(e);for(var n=0,i=t.length,l=new e(i);i>n;)l[n]=t[n++];return l},nb=function(e,t){xZ(e,t,{get:function(){return TZ(this)[t]}})},ib=function(e){var t;return YZ(MZ,e)||"ArrayBuffer"==(t=SZ(e))||"SharedArrayBuffer"==t},lb=function(e,t){return qZ(e)&&!fZ(t)&&t in e&&GZ(+t)&&t>=0},ob=function(e,t){return t=IZ(t),lb(e,t)?pZ(2,e[t]):zZ(e,t)},cb=function(e,t,n){return t=IZ(t),!(lb(e,t)&&RZ(n)&&gZ(n,"value"))||gZ(n,"get")||gZ(n,"set")||n.configurable||gZ(n,"writable")&&!n.writable||gZ(n,"enumerable")&&!n.enumerable?xZ(e,t,n):(e[t]=n.value,e)};uZ?(EZ||(UZ.f=ob,LZ.f=cb,nb(AZ,"buffer"),nb(AZ,"byteOffset"),nb(AZ,"byteLength"),nb(AZ,"length")),aZ({target:"Object",stat:!0,forced:!EZ},{getOwnPropertyDescriptor:ob,defineProperty:cb}),xs.exports=function(e,t,n){var i=e.match(/\d+$/)[0]/8,l=e+(n?"Clamped":"")+"Array",o="get"+e,c="set"+e,r=sZ[l],a=r,s=a&&a.prototype,d={},u=function(e,t){xZ(e,t,{get:function(){return function(e,t){var n=TZ(e);return n.view[o](t*i+n.byteOffset,!0)}(this,t)},set:function(e){return function(e,t,l){var o=TZ(e);n&&(l=(l=PZ(l))<0?0:l>255?255:255&l),o.view[c](t*i+o.byteOffset,l,!0)}(this,t,e)},enumerable:!0})};EZ?hZ&&(a=t((function(e,t,n,l){return mZ(e,s),HZ(RZ(t)?ib(t)?void 0!==l?new r(t,WZ(n,i),l):void 0!==n?new r(t,WZ(n,i)):new r(t):qZ(t)?tb(a,t):dZ(CZ,a,t):new r(VZ(t)),e,a)})),KZ&&KZ(a,OZ),kZ(NZ(r),(function(e){e in a||yZ(a,e,r[e])})),a.prototype=s):(a=t((function(e,t,n,l){mZ(e,s);var o,c,r,d=0,h=0;if(RZ(t)){if(!ib(t))return qZ(t)?tb(a,t):dZ(CZ,a,t);o=t,h=WZ(n,i);var Z=t.byteLength;if(void 0===l){if(Z%i)throw BZ(eb);if((c=Z-h)<0)throw BZ(eb)}else if((c=XZ(l)*i)+h>Z)throw BZ(eb);r=c/i}else r=VZ(t),o=new jZ(c=r*i);for(wZ(e,{buffer:o,byteOffset:h,byteLength:c,length:r,view:new QZ(o)});d<r;)u(e,d++)})),KZ&&KZ(a,OZ),s=a.prototype=vZ(AZ)),s.constructor!==a&&yZ(s,"constructor",a),FZ(s).TypedArrayConstructor=a,DZ&&yZ(s,DZ,l);var h=a!=r;d[l]=a,aZ({global:!0,constructor:!0,forced:h,sham:!EZ},d),$Z in a||yZ(a,$Z,i),$Z in s||yZ(s,$Z,i),JZ(l)}):xs.exports=function(){},(0,xs.exports)("Float32",(function(e){return function(t,n,i){return e(this,t,n,i)}})),(0,xs.exports)("Float64",(function(e){return function(t,n,i){return e(this,t,n,i)}})),(0,xs.exports)("Int8",(function(e){return function(t,n,i){return e(this,t,n,i)}})),(0,xs.exports)("Int16",(function(e){return function(t,n,i){return e(this,t,n,i)}})),(0,xs.exports)("Int32",(function(e){return function(t,n,i){return e(this,t,n,i)}})),(0,xs.exports)("Uint8",(function(e){return function(t,n,i){return e(this,t,n,i)}})),(0,xs.exports)("Uint8",(function(e){return function(t,n,i){return e(this,t,n,i)}}),!0),(0,xs.exports)("Uint16",(function(e){return function(t,n,i){return e(this,t,n,i)}})),(0,xs.exports)("Uint32",(function(e){return function(t,n,i){return e(this,t,n,i)}}));var rb=it,ab=TypeError,sb=du,db=function(e){var t=rb(e,"number");if("number"==typeof t)throw ab("Can't convert number to bigint");return BigInt(t)},ub=lo,hb=Ce,Zb=r,bb=Td.aTypedArray,mb=Td.exportTypedArrayMethod,pb=b("".slice);mb("fill",(function(e){var t=arguments.length;bb(this);var n="Big"===pb(ub(this),0,3)?db(e):+e;return hb(sb,this,n,t>1?arguments[1]:void 0,t>2?arguments[2]:void 0)}),Zb((function(){var e=0;return new Int8Array(2).fill({valueOf:function(){return e++}}),1!==e}))),(0,Td.exportTypedArrayStaticMethod)("from",Fh,jd);var yb=Td.aTypedArrayConstructor;(0,Td.exportTypedArrayStaticMethod)("of",(function(){for(var e=0,t=arguments.length,n=new(yb(this))(t);t>e;)n[e]=arguments[e++];return n}),jd);var Gb=o,Xb=Ce,Vb=Td,Wb=Gi,Ib=Kh,gb=X,Sb=r,Rb=Gb.RangeError,fb=Gb.Int8Array,vb=fb&&fb.prototype,Yb=vb&&vb.set,Kb=Vb.aTypedArray,Nb=Vb.exportTypedArrayMethod,Cb=!Sb((function(){var e=new Uint8ClampedArray(2);return Xb(Yb,e,{length:1,0:3},1),3!==e[1]})),kb=Cb&&Vb.NATIVE_ARRAY_BUFFER_VIEWS&&Sb((function(){var e=new fb(2);return e.set(1),e.set("2",1),0!==e[0]||2!==e[1]}));Nb("set",(function(e){Kb(this);var t=Ib(arguments.length>1?arguments[1]:void 0,1),n=gb(e);if(Cb)return Xb(Yb,this,n,t);var i=this.length,l=Wb(n),o=0;if(l+t>i)throw Rb("Wrong length");for(;o<l;)this[t+o]=n[o++]}),!Cb||kb);var Jb=Vu,Lb=Math.floor,Ub=function(e,t){var n=e.length,i=Lb(n/2);return n<8?Hb(e,t):Tb(e,Ub(Jb(e,0,i),t),Ub(Jb(e,i),t),t)},Hb=function(e,t){for(var n,i,l=e.length,o=1;o<l;){for(i=o,n=e[o];i&&t(e[i-1],n)>0;)e[i]=e[--i];i!==o++&&(e[i]=n)}return e},Tb=function(e,t,n,i){for(var l=t.length,o=n.length,c=0,r=0;c<l||r<o;)e[c+r]=c<l&&r<o?i(t[c],n[r])<=0?t[c++]:n[r++]:c<l?t[c++]:n[r++];return e},wb=Ub,Fb=j.match(/firefox\/(\d+)/i),xb=!!Fb&&+Fb[1],zb=/MSIE|Trident/.test(j),Pb=j.match(/AppleWebKit\/(\d+)\./),Bb=!!Pb&&+Pb[1],jb=b,Mb=r,Qb=Be,Eb=wb,Db=xb,Ob=zb,Ab=_,_b=Bb,qb=Td.aTypedArray,$b=Td.exportTypedArrayMethod,em=o.Uint16Array,tm=em&&jb(em.prototype.sort),nm=!(!tm||Mb((function(){tm(new em(2),null)}))&&Mb((function(){tm(new em(2),{})}))),im=!!tm&&!Mb((function(){if(Ab)return Ab<74;if(Db)return Db<67;if(Ob)return!0;if(_b)return _b<602;var e,t,n=new em(516),i=Array(516);for(e=0;e<516;e++)t=e%4,n[e]=515-e,i[e]=e-2*t+3;for(tm(n,(function(e,t){return(e/4|0)-(t/4|0)})),e=0;e<516;e++)if(n[e]!==i[e])return!0}));$b("sort",(function(e){return void 0!==e&&Qb(e),im?tm(this,e):Eb(qb(this),function(e){return function(t,n){return void 0!==e?+e(t,n)||0:n!=n?-1:t!=t?1:0===t&&0===n?1/t>0&&1/n<0?1:-1:t>n}}(e))}),!im||nm);var lm=We("span").classList,om=lm&&lm.constructor&&lm.constructor.prototype,cm=om===Object.prototype?void 0:om,rm=cl,am=Ce,sm=F,dm=hr,um=Mc,hm=td,Zm=or,bm=qt,mm=ii,pm=Ql,ym=cn.PROPER,Gm=cn.CONFIGURABLE,Xm=tr.IteratorPrototype,Vm=tr.BUGGY_SAFARI_ITERATORS,Wm=he("iterator"),Im="keys",gm="values",Sm="entries",Rm=function(){return this},fm=function(e,t,n,i,l,o,c){dm(n,t,i);var r,a,s,d=function(e){if(e===l&&m)return m;if(!Vm&&e in Z)return Z[e];switch(e){case Im:case gm:case Sm:return function(){return new n(this,e)}}return function(){return new n(this)}},u=t+" Iterator",h=!1,Z=e.prototype,b=Z[Wm]||Z["@@iterator"]||l&&Z[l],m=!Vm&&b||d(l),p="Array"==t&&Z.entries||b;if(p&&(r=um(p.call(new e)))!==Object.prototype&&r.next&&(um(r)!==Xm&&(hm?hm(r,Xm):sm(r[Wm])||mm(r,Wm,Rm)),Zm(r,u,!0)),ym&&l==gm&&b&&b.name!==gm&&(Gm?bm(Z,"name",gm):(h=!0,m=function(){return am(b,this)})),l)if(a={values:d(gm),keys:o?m:d(Im),entries:d(Sm)},c)for(s in a)(Vm||h||!(s in Z))&&mm(Z,s,a[s]);else rm({target:t,proto:!0,forced:Vm||h},a);return Z[Wm]!==m&&mm(Z,Wm,m,{name:l}),pm[t]=m,a},vm=xt,Ym=Hl,Km=Ql,Nm=xn,Cm=be.f,km=fm,Jm=me,Lm="Array Iterator",Um=Nm.set,Hm=Nm.getterFor(Lm),Tm=km(Array,"Array",(function(e,t){Um(this,{type:Lm,target:vm(e),index:0,kind:t})}),(function(){var e=Hm(this),t=e.target,n=e.kind,i=e.index++;return!t||i>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:i,done:!1}:"values"==n?{value:t[i],done:!1}:{value:[i,t[i]],done:!1}}),"values"),wm=Km.Arguments=Km.Array;if(Ym("keys"),Ym("values"),Ym("entries"),Jm&&"values"!==wm.name)try{Cm(wm,"name",{value:"values"})}catch(e){}var Fm=o,xm={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},zm=cm,Pm=Tm,Bm=qt,jm=he,Mm=jm("iterator"),Qm=jm("toStringTag"),Em=Pm.values,Dm=function(e,t){if(e){if(e[Mm]!==Em)try{Bm(e,Mm,Em)}catch(t){e[Mm]=Em}if(e[Qm]||Bm(e,Qm,t),xm[t])for(var n in Pm)if(e[n]!==Pm[n])try{Bm(e,n,Pm[n])}catch(t){e[n]=Pm[n]}}};for(var Om in xm)Dm(Fm[Om]&&Fm[Om].prototype,Om);Dm(zm,"DOMTokenList");var Am,_m,qm,$m,ep=b([].slice),tp=TypeError,np=function(e,t){if(e<t)throw tp("Not enough arguments");return e},ip=/(?:ipad|iphone|ipod).*applewebkit/i.test(j),lp="process"==kt(o.process),op=o,cp=$a,rp=Ml,ap=F,sp=I,dp=r,up=Gl,hp=ep,Zp=We,bp=np,mp=ip,pp=lp,yp=op.setImmediate,Gp=op.clearImmediate,Xp=op.process,Vp=op.Dispatch,Wp=op.Function,Ip=op.MessageChannel,gp=op.String,Sp=0,Rp={},fp="onreadystatechange";try{Am=op.location}catch(e){}var vp=function(e){if(sp(Rp,e)){var t=Rp[e];delete Rp[e],t()}},Yp=function(e){return function(){vp(e)}},Kp=function(e){vp(e.data)},Np=function(e){op.postMessage(gp(e),Am.protocol+"//"+Am.host)};yp&&Gp||(yp=function(e){bp(arguments.length,1);var t=ap(e)?e:Wp(e),n=hp(arguments,1);return Rp[++Sp]=function(){cp(t,void 0,n)},_m(Sp),Sp},Gp=function(e){delete Rp[e]},pp?_m=function(e){Xp.nextTick(Yp(e))}:Vp&&Vp.now?_m=function(e){Vp.now(Yp(e))}:Ip&&!mp?($m=(qm=new Ip).port2,qm.port1.onmessage=Kp,_m=rp($m.postMessage,$m)):op.addEventListener&&ap(op.postMessage)&&!op.importScripts&&Am&&"file:"!==Am.protocol&&!dp(Np)?(_m=Np,op.addEventListener("message",Kp,!1)):_m=fp in Zp("script")?function(e){up.appendChild(Zp("script")).onreadystatechange=function(){up.removeChild(this),vp(e)}}:function(e){setTimeout(Yp(e),0)});var Cp={set:yp,clear:Gp},kp=Cp.clear;cl({global:!0,bind:!0,enumerable:!0,forced:o.clearImmediate!==kp},{clearImmediate:kp});var Jp=Cp.set;cl({global:!0,bind:!0,enumerable:!0,forced:o.setImmediate!==Jp},{setImmediate:Jp});var Lp=kr.charAt,Up=mr,Hp=xn,Tp=fm,wp="String Iterator",Fp=Hp.set,xp=Hp.getterFor(wp);Tp(String,"String",(function(e){Fp(this,{type:wp,string:Up(e),index:0})}),(function(){var e,t=xp(this),n=t.string,i=t.index;return i>=n.length?{value:void 0,done:!0}:(e=Lp(n,i),t.index+=e.length,{value:e,done:!1})}));var zp=r,Pp=he("iterator"),Bp=!zp((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n="";return e.pathname="c%20d",t.forEach((function(e,i){t.delete("b"),n+=i+e})),!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[Pp]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host})),jp=me,Mp=b,Qp=Ce,Ep=r,Dp=dl,Op=Ji,Ap=St,_p=X,qp=Tt,$p=Object.assign,ey=Object.defineProperty,ty=Mp([].concat),ny=!$p||Ep((function(){if(jp&&1!==$p({b:1},$p(ey({},"a",{enumerable:!0,get:function(){ey(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach((function(e){t[e]=e})),7!=$p({},e)[n]||Dp($p({},t)).join("")!=i}))?function(e,t){for(var n=_p(e),i=arguments.length,l=1,o=Op.f,c=Ap.f;i>l;)for(var r,a=qp(arguments[l++]),s=o?ty(Dp(a),o(a)):Dp(a),d=s.length,u=0;d>u;)r=s[u++],jp&&!Qp(c,a,r)||(n[r]=a[r]);return n}:$p,iy=Ye,ly=Wo,oy=Ml,cy=Ce,ry=X,ay=function(e,t,n,i){try{return i?t(iy(n)[0],n[1]):t(n)}catch(t){ly(e,"throw",t)}},sy=Al,dy=ec,uy=Gi,hy=bu,Zy=yo,by=so,my=Array,py=b,yy=2147483647,Gy=/[^\0-\u007E]/,Xy=/[.\u3002\uFF0E\uFF61]/g,Vy="Overflow: input needs wider integers to process",Wy=RangeError,Iy=py(Xy.exec),gy=Math.floor,Sy=String.fromCharCode,Ry=py("".charCodeAt),fy=py([].join),vy=py([].push),Yy=py("".replace),Ky=py("".split),Ny=py("".toLowerCase),Cy=function(e){return e+22+75*(e<26)},ky=function(e,t,n){var i=0;for(e=n?gy(e/700):e>>1,e+=gy(e/t);e>455;)e=gy(e/35),i+=36;return gy(i+36*e/(e+38))},Jy=function(e){var t=[];e=function(e){for(var t=[],n=0,i=e.length;n<i;){var l=Ry(e,n++);if(l>=55296&&l<=56319&&n<i){var o=Ry(e,n++);56320==(64512&o)?vy(t,((1023&l)<<10)+(1023&o)+65536):(vy(t,l),n--)}else vy(t,l)}return t}(e);var n,i,l=e.length,o=128,c=0,r=72;for(n=0;n<e.length;n++)(i=e[n])<128&&vy(t,Sy(i));var a=t.length,s=a;for(a&&vy(t,"-");s<l;){var d=yy;for(n=0;n<e.length;n++)(i=e[n])>=o&&i<d&&(d=i);var u=s+1;if(d-o>gy((yy-c)/u))throw Wy(Vy);for(c+=(d-o)*u,o=d,n=0;n<e.length;n++){if((i=e[n])<o&&++c>yy)throw Wy(Vy);if(i==o){for(var h=c,Z=36;;){var b=Z<=r?1:Z>=r+26?26:Z-r;if(h<b)break;var m=h-b,p=36-b;vy(t,Sy(Cy(b+m%p))),h=gy(m/p),Z+=36}vy(t,Sy(Cy(h))),r=ky(c,u,s==a),c=0,s++}}c++,o++}return fy(t,"")},Ly=cl,Uy=o,Hy=Ce,Ty=b,wy=me,Fy=Bp,xy=ii,zy=Qd,Py=or,By=hr,jy=xn,My=Od,Qy=F,Ey=I,Dy=Ml,Oy=lo,Ay=Ye,_y=ye,qy=mr,$y=Nl,eG=Yt,tG=yo,nG=so,iG=np,lG=wb,oG=he("iterator"),cG="URLSearchParams",rG="URLSearchParamsIterator",aG=jy.set,sG=jy.getterFor(cG),dG=jy.getterFor(rG),uG=Object.getOwnPropertyDescriptor,hG=function(e){if(!wy)return Uy[e];var t=uG(Uy,e);return t&&t.value},ZG=hG("fetch"),bG=hG("Request"),mG=hG("Headers"),pG=bG&&bG.prototype,yG=mG&&mG.prototype,GG=Uy.RegExp,XG=Uy.TypeError,VG=Uy.decodeURIComponent,WG=Uy.encodeURIComponent,IG=Ty("".charAt),gG=Ty([].join),SG=Ty([].push),RG=Ty("".replace),fG=Ty([].shift),vG=Ty([].splice),YG=Ty("".split),KG=Ty("".slice),NG=/\+/g,CG=Array(4),kG=function(e){return CG[e-1]||(CG[e-1]=GG("((?:%[\\da-f]{2}){"+e+"})","gi"))},JG=function(e){try{return VG(e)}catch(t){return e}},LG=function(e){var t=RG(e,NG," "),n=4;try{return VG(t)}catch(e){for(;n;)t=RG(t,kG(n--),JG);return t}},UG=/[!'()~]|%20/g,HG={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},TG=function(e){return HG[e]},wG=function(e){return RG(WG(e),UG,TG)},FG=By((function(e,t){aG(this,{type:rG,iterator:tG(sG(e).entries),kind:t})}),"Iterator",(function(){var e=dG(this),t=e.kind,n=e.iterator.next(),i=n.value;return n.done||(n.value="keys"===t?i.key:"values"===t?i.value:[i.key,i.value]),n}),!0),xG=function(e){this.entries=[],this.url=null,void 0!==e&&(_y(e)?this.parseObject(e):this.parseQuery("string"==typeof e?"?"===IG(e,0)?KG(e,1):e:qy(e)))};xG.prototype={type:cG,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t,n,i,l,o,c,r,a=nG(e);if(a)for(n=(t=tG(e,a)).next;!(i=Hy(n,t)).done;){if(o=(l=tG(Ay(i.value))).next,(c=Hy(o,l)).done||(r=Hy(o,l)).done||!Hy(o,l).done)throw XG("Expected sequence with length 2");SG(this.entries,{key:qy(c.value),value:qy(r.value)})}else for(var s in e)Ey(e,s)&&SG(this.entries,{key:s,value:qy(e[s])})},parseQuery:function(e){if(e)for(var t,n,i=YG(e,"&"),l=0;l<i.length;)(t=i[l++]).length&&(n=YG(t,"="),SG(this.entries,{key:LG(fG(n)),value:LG(gG(n,"="))}))},serialize:function(){for(var e,t=this.entries,n=[],i=0;i<t.length;)e=t[i++],SG(n,wG(e.key)+"="+wG(e.value));return gG(n,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var zG=function(){My(this,PG);var e=arguments.length>0?arguments[0]:void 0;aG(this,new xG(e))},PG=zG.prototype;if(zy(PG,{append:function(e,t){iG(arguments.length,2);var n=sG(this);SG(n.entries,{key:qy(e),value:qy(t)}),n.updateURL()},delete:function(e){iG(arguments.length,1);for(var t=sG(this),n=t.entries,i=qy(e),l=0;l<n.length;)n[l].key===i?vG(n,l,1):l++;t.updateURL()},get:function(e){iG(arguments.length,1);for(var t=sG(this).entries,n=qy(e),i=0;i<t.length;i++)if(t[i].key===n)return t[i].value;return null},getAll:function(e){iG(arguments.length,1);for(var t=sG(this).entries,n=qy(e),i=[],l=0;l<t.length;l++)t[l].key===n&&SG(i,t[l].value);return i},has:function(e){iG(arguments.length,1);for(var t=sG(this).entries,n=qy(e),i=0;i<t.length;)if(t[i++].key===n)return!0;return!1},set:function(e,t){iG(arguments.length,1);for(var n,i=sG(this),l=i.entries,o=!1,c=qy(e),r=qy(t),a=0;a<l.length;a++)(n=l[a]).key===c&&(o?vG(l,a--,1):(o=!0,n.value=r));o||SG(l,{key:c,value:r}),i.updateURL()},sort:function(){var e=sG(this);lG(e.entries,(function(e,t){return e.key>t.key?1:-1})),e.updateURL()},forEach:function(e){for(var t,n=sG(this).entries,i=Dy(e,arguments.length>1?arguments[1]:void 0),l=0;l<n.length;)i((t=n[l++]).value,t.key,this)},keys:function(){return new FG(this,"keys")},values:function(){return new FG(this,"values")},entries:function(){return new FG(this,"entries")}},{enumerable:!0}),xy(PG,oG,PG.entries,{name:"entries"}),xy(PG,"toString",(function(){return sG(this).serialize()}),{enumerable:!0}),Py(zG,cG),Ly({global:!0,constructor:!0,forced:!Fy},{URLSearchParams:zG}),!Fy&&Qy(mG)){var BG=Ty(yG.has),jG=Ty(yG.set),MG=function(e){if(_y(e)){var t,n=e.body;if(Oy(n)===cG)return t=e.headers?new mG(e.headers):new mG,BG(t,"content-type")||jG(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),$y(e,{body:eG(0,qy(n)),headers:eG(0,t)})}return e};if(Qy(ZG)&&Ly({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(e){return ZG(e,arguments.length>1?MG(arguments[1]):{})}}),Qy(bG)){var QG=function(e){return My(this,pG),new bG(e,arguments.length>1?MG(arguments[1]):{})};pG.constructor=QG,QG.prototype=pG,Ly({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:QG})}}var EG,DG=cl,OG=me,AG=Bp,_G=o,qG=Ml,$G=b,eX=ii,tX=Sc,nX=Od,iX=I,lX=ny,oX=function(e){var t=ry(e),n=dy(this),i=arguments.length,l=i>1?arguments[1]:void 0,o=void 0!==l;o&&(l=oy(l,i>2?arguments[2]:void 0));var c,r,a,s,d,u,h=by(t),Z=0;if(!h||this===my&&sy(h))for(c=uy(t),r=n?new this(c):my(c);c>Z;Z++)u=o?l(t[Z],Z):t[Z],hy(r,Z,u);else for(d=(s=Zy(t,h)).next,r=n?new this:[];!(a=cy(d,s)).done;Z++)u=o?ay(s,l,[a.value,Z],!0):a.value,hy(r,Z,u);return r.length=Z,r},cX=Vu,rX=kr.codeAt,aX=function(e){var t,n,i=[],l=Ky(Yy(Ny(e),Xy,"."),".");for(t=0;t<l.length;t++)n=l[t],vy(i,Iy(Gy,n)?"xn--"+Jy(n):n);return fy(i,".")},sX=mr,dX=or,uX=np,hX={URLSearchParams:zG,getState:sG},ZX=xn,bX=ZX.set,mX=ZX.getterFor("URL"),pX=hX.URLSearchParams,yX=hX.getState,GX=_G.URL,XX=_G.TypeError,VX=_G.parseInt,WX=Math.floor,IX=Math.pow,gX=$G("".charAt),SX=$G(/./.exec),RX=$G([].join),fX=$G(1..toString),vX=$G([].pop),YX=$G([].push),KX=$G("".replace),NX=$G([].shift),CX=$G("".split),kX=$G("".slice),JX=$G("".toLowerCase),LX=$G([].unshift),UX="Invalid scheme",HX="Invalid host",TX="Invalid port",wX=/[a-z]/i,FX=/[\d+-.a-z]/i,xX=/\d/,zX=/^0x/i,PX=/^[0-7]+$/,BX=/^\d+$/,jX=/^[\da-f]+$/i,MX=/[\0\t\n\r #%/:<>?@[\\\]^|]/,QX=/[\0\t\n\r #/:<>?@[\\\]^|]/,EX=/^[\u0000-\u0020]+|[\u0000-\u0020]+$/g,DX=/[\t\n\r]/g,OX=function(e){var t,n,i,l;if("number"==typeof e){for(t=[],n=0;n<4;n++)LX(t,e%256),e=WX(e/256);return RX(t,".")}if("object"==typeof e){for(t="",i=function(e){for(var t=null,n=1,i=null,l=0,o=0;o<8;o++)0!==e[o]?(l>n&&(t=i,n=l),i=null,l=0):(null===i&&(i=o),++l);return l>n&&(t=i,n=l),t}(e),n=0;n<8;n++)l&&0===e[n]||(l&&(l=!1),i===n?(t+=n?":":"::",l=!0):(t+=fX(e[n],16),n<7&&(t+=":")));return"["+t+"]"}return e},AX={},_X=lX({},AX,{" ":1,'"':1,"<":1,">":1,"`":1}),qX=lX({},_X,{"#":1,"?":1,"{":1,"}":1}),$X=lX({},qX,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),eV=function(e,t){var n=rX(e,0);return n>32&&n<127&&!iX(t,e)?e:encodeURIComponent(e)},tV={ftp:21,file:null,http:80,https:443,ws:80,wss:443},nV=function(e,t){var n;return 2==e.length&&SX(wX,gX(e,0))&&(":"==(n=gX(e,1))||!t&&"|"==n)},iV=function(e){var t;return e.length>1&&nV(kX(e,0,2))&&(2==e.length||"/"===(t=gX(e,2))||"\\"===t||"?"===t||"#"===t)},lV=function(e){return"."===e||"%2e"===JX(e)},oV={},cV={},rV={},aV={},sV={},dV={},uV={},hV={},ZV={},bV={},mV={},pV={},yV={},GV={},XV={},VV={},WV={},IV={},gV={},SV={},RV={},fV=function(e,t,n){var i,l,o,c=sX(e);if(t){if(l=this.parse(c))throw XX(l);this.searchParams=null}else{if(void 0!==n&&(i=new fV(n,!0)),l=this.parse(c,null,i))throw XX(l);(o=yX(new pX)).bindURL(this),this.searchParams=o}};fV.prototype={type:"URL",parse:function(e,t,n){var i,l,o,c,r,a=this,s=t||oV,d=0,u="",h=!1,Z=!1,b=!1;for(e=sX(e),t||(a.scheme="",a.username="",a.password="",a.host=null,a.port=null,a.path=[],a.query=null,a.fragment=null,a.cannotBeABaseURL=!1,e=KX(e,EX,"")),e=KX(e,DX,""),i=oX(e);d<=i.length;){switch(l=i[d],s){case oV:if(!l||!SX(wX,l)){if(t)return UX;s=rV;continue}u+=JX(l),s=cV;break;case cV:if(l&&(SX(FX,l)||"+"==l||"-"==l||"."==l))u+=JX(l);else{if(":"!=l){if(t)return UX;u="",s=rV,d=0;continue}if(t&&(a.isSpecial()!=iX(tV,u)||"file"==u&&(a.includesCredentials()||null!==a.port)||"file"==a.scheme&&!a.host))return;if(a.scheme=u,t)return void(a.isSpecial()&&tV[a.scheme]==a.port&&(a.port=null));u="","file"==a.scheme?s=GV:a.isSpecial()&&n&&n.scheme==a.scheme?s=aV:a.isSpecial()?s=hV:"/"==i[d+1]?(s=sV,d++):(a.cannotBeABaseURL=!0,YX(a.path,""),s=gV)}break;case rV:if(!n||n.cannotBeABaseURL&&"#"!=l)return UX;if(n.cannotBeABaseURL&&"#"==l){a.scheme=n.scheme,a.path=cX(n.path),a.query=n.query,a.fragment="",a.cannotBeABaseURL=!0,s=RV;break}s="file"==n.scheme?GV:dV;continue;case aV:if("/"!=l||"/"!=i[d+1]){s=dV;continue}s=ZV,d++;break;case sV:if("/"==l){s=bV;break}s=IV;continue;case dV:if(a.scheme=n.scheme,l==EG)a.username=n.username,a.password=n.password,a.host=n.host,a.port=n.port,a.path=cX(n.path),a.query=n.query;else if("/"==l||"\\"==l&&a.isSpecial())s=uV;else if("?"==l)a.username=n.username,a.password=n.password,a.host=n.host,a.port=n.port,a.path=cX(n.path),a.query="",s=SV;else{if("#"!=l){a.username=n.username,a.password=n.password,a.host=n.host,a.port=n.port,a.path=cX(n.path),a.path.length--,s=IV;continue}a.username=n.username,a.password=n.password,a.host=n.host,a.port=n.port,a.path=cX(n.path),a.query=n.query,a.fragment="",s=RV}break;case uV:if(!a.isSpecial()||"/"!=l&&"\\"!=l){if("/"!=l){a.username=n.username,a.password=n.password,a.host=n.host,a.port=n.port,s=IV;continue}s=bV}else s=ZV;break;case hV:if(s=ZV,"/"!=l||"/"!=gX(u,d+1))continue;d++;break;case ZV:if("/"!=l&&"\\"!=l){s=bV;continue}break;case bV:if("@"==l){h&&(u="%40"+u),h=!0,o=oX(u);for(var m=0;m<o.length;m++){var p=o[m];if(":"!=p||b){var y=eV(p,$X);b?a.password+=y:a.username+=y}else b=!0}u=""}else if(l==EG||"/"==l||"?"==l||"#"==l||"\\"==l&&a.isSpecial()){if(h&&""==u)return"Invalid authority";d-=oX(u).length+1,u="",s=mV}else u+=l;break;case mV:case pV:if(t&&"file"==a.scheme){s=VV;continue}if(":"!=l||Z){if(l==EG||"/"==l||"?"==l||"#"==l||"\\"==l&&a.isSpecial()){if(a.isSpecial()&&""==u)return HX;if(t&&""==u&&(a.includesCredentials()||null!==a.port))return;if(c=a.parseHost(u))return c;if(u="",s=WV,t)return;continue}"["==l?Z=!0:"]"==l&&(Z=!1),u+=l}else{if(""==u)return HX;if(c=a.parseHost(u))return c;if(u="",s=yV,t==pV)return}break;case yV:if(!SX(xX,l)){if(l==EG||"/"==l||"?"==l||"#"==l||"\\"==l&&a.isSpecial()||t){if(""!=u){var G=VX(u,10);if(G>65535)return TX;a.port=a.isSpecial()&&G===tV[a.scheme]?null:G,u=""}if(t)return;s=WV;continue}return TX}u+=l;break;case GV:if(a.scheme="file","/"==l||"\\"==l)s=XV;else{if(!n||"file"!=n.scheme){s=IV;continue}if(l==EG)a.host=n.host,a.path=cX(n.path),a.query=n.query;else if("?"==l)a.host=n.host,a.path=cX(n.path),a.query="",s=SV;else{if("#"!=l){iV(RX(cX(i,d),""))||(a.host=n.host,a.path=cX(n.path),a.shortenPath()),s=IV;continue}a.host=n.host,a.path=cX(n.path),a.query=n.query,a.fragment="",s=RV}}break;case XV:if("/"==l||"\\"==l){s=VV;break}n&&"file"==n.scheme&&!iV(RX(cX(i,d),""))&&(nV(n.path[0],!0)?YX(a.path,n.path[0]):a.host=n.host),s=IV;continue;case VV:if(l==EG||"/"==l||"\\"==l||"?"==l||"#"==l){if(!t&&nV(u))s=IV;else if(""==u){if(a.host="",t)return;s=WV}else{if(c=a.parseHost(u))return c;if("localhost"==a.host&&(a.host=""),t)return;u="",s=WV}continue}u+=l;break;case WV:if(a.isSpecial()){if(s=IV,"/"!=l&&"\\"!=l)continue}else if(t||"?"!=l)if(t||"#"!=l){if(l!=EG&&(s=IV,"/"!=l))continue}else a.fragment="",s=RV;else a.query="",s=SV;break;case IV:if(l==EG||"/"==l||"\\"==l&&a.isSpecial()||!t&&("?"==l||"#"==l)){if(".."===(r=JX(r=u))||"%2e."===r||".%2e"===r||"%2e%2e"===r?(a.shortenPath(),"/"==l||"\\"==l&&a.isSpecial()||YX(a.path,"")):lV(u)?"/"==l||"\\"==l&&a.isSpecial()||YX(a.path,""):("file"==a.scheme&&!a.path.length&&nV(u)&&(a.host&&(a.host=""),u=gX(u,0)+":"),YX(a.path,u)),u="","file"==a.scheme&&(l==EG||"?"==l||"#"==l))for(;a.path.length>1&&""===a.path[0];)NX(a.path);"?"==l?(a.query="",s=SV):"#"==l&&(a.fragment="",s=RV)}else u+=eV(l,qX);break;case gV:"?"==l?(a.query="",s=SV):"#"==l?(a.fragment="",s=RV):l!=EG&&(a.path[0]+=eV(l,AX));break;case SV:t||"#"!=l?l!=EG&&("'"==l&&a.isSpecial()?a.query+="%27":a.query+="#"==l?"%23":eV(l,AX)):(a.fragment="",s=RV);break;case RV:l!=EG&&(a.fragment+=eV(l,_X))}d++}},parseHost:function(e){var t,n,i;if("["==gX(e,0)){if("]"!=gX(e,e.length-1))return HX;if(t=function(e){var t,n,i,l,o,c,r,a=[0,0,0,0,0,0,0,0],s=0,d=null,u=0,h=function(){return gX(e,u)};if(":"==h()){if(":"!=gX(e,1))return;u+=2,d=++s}for(;h();){if(8==s)return;if(":"!=h()){for(t=n=0;n<4&&SX(jX,h());)t=16*t+VX(h(),16),u++,n++;if("."==h()){if(0==n)return;if(u-=n,s>6)return;for(i=0;h();){if(l=null,i>0){if(!("."==h()&&i<4))return;u++}if(!SX(xX,h()))return;for(;SX(xX,h());){if(o=VX(h(),10),null===l)l=o;else{if(0==l)return;l=10*l+o}if(l>255)return;u++}a[s]=256*a[s]+l,2!=++i&&4!=i||s++}if(4!=i)return;break}if(":"==h()){if(u++,!h())return}else if(h())return;a[s++]=t}else{if(null!==d)return;u++,d=++s}}if(null!==d)for(c=s-d,s=7;0!=s&&c>0;)r=a[s],a[s--]=a[d+c-1],a[d+--c]=r;else if(8!=s)return;return a}(kX(e,1,-1)),!t)return HX;this.host=t}else if(this.isSpecial()){if(e=aX(e),SX(MX,e))return HX;if(t=function(e){var t,n,i,l,o,c,r,a=CX(e,".");if(a.length&&""==a[a.length-1]&&a.length--,(t=a.length)>4)return e;for(n=[],i=0;i<t;i++){if(""==(l=a[i]))return e;if(o=10,l.length>1&&"0"==gX(l,0)&&(o=SX(zX,l)?16:8,l=kX(l,8==o?1:2)),""===l)c=0;else{if(!SX(10==o?BX:8==o?PX:jX,l))return e;c=VX(l,o)}YX(n,c)}for(i=0;i<t;i++)if(c=n[i],i==t-1){if(c>=IX(256,5-t))return null}else if(c>255)return null;for(r=vX(n),i=0;i<n.length;i++)r+=n[i]*IX(256,3-i);return r}(e),null===t)return HX;this.host=t}else{if(SX(QX,e))return HX;for(t="",n=oX(e),i=0;i<n.length;i++)t+=eV(n[i],AX);this.host=t}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"==this.scheme},includesCredentials:function(){return""!=this.username||""!=this.password},isSpecial:function(){return iX(tV,this.scheme)},shortenPath:function(){var e=this.path,t=e.length;!t||"file"==this.scheme&&1==t&&nV(e[0],!0)||e.length--},serialize:function(){var e=this,t=e.scheme,n=e.username,i=e.password,l=e.host,o=e.port,c=e.path,r=e.query,a=e.fragment,s=t+":";return null!==l?(s+="//",e.includesCredentials()&&(s+=n+(i?":"+i:"")+"@"),s+=OX(l),null!==o&&(s+=":"+o)):"file"==t&&(s+="//"),s+=e.cannotBeABaseURL?c[0]:c.length?"/"+RX(c,"/"):"",null!==r&&(s+="?"+r),null!==a&&(s+="#"+a),s},setHref:function(e){var t=this.parse(e);if(t)throw XX(t);this.searchParams.update()},getOrigin:function(){var e=this.scheme,t=this.port;if("blob"==e)try{return new vV(e.path[0]).origin}catch(e){return"null"}return"file"!=e&&this.isSpecial()?e+"://"+OX(this.host)+(null!==t?":"+t:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(sX(e)+":",oV)},getUsername:function(){return this.username},setUsername:function(e){var t=oX(sX(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var n=0;n<t.length;n++)this.username+=eV(t[n],$X)}},getPassword:function(){return this.password},setPassword:function(e){var t=oX(sX(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var n=0;n<t.length;n++)this.password+=eV(t[n],$X)}},getHost:function(){var e=this.host,t=this.port;return null===e?"":null===t?OX(e):OX(e)+":"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,mV)},getHostname:function(){var e=this.host;return null===e?"":OX(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,pV)},getPort:function(){var e=this.port;return null===e?"":sX(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||(""==(e=sX(e))?this.port=null:this.parse(e,yV))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+RX(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,WV))},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){""==(e=sX(e))?this.query=null:("?"==gX(e,0)&&(e=kX(e,1)),this.query="",this.parse(e,SV)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){""!=(e=sX(e))?("#"==gX(e,0)&&(e=kX(e,1)),this.fragment="",this.parse(e,RV)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var vV=function(e){var t=nX(this,YV),n=uX(arguments.length,1)>1?arguments[1]:void 0,i=bX(t,new fV(e,!1,n));OG||(t.href=i.serialize(),t.origin=i.getOrigin(),t.protocol=i.getProtocol(),t.username=i.getUsername(),t.password=i.getPassword(),t.host=i.getHost(),t.hostname=i.getHostname(),t.port=i.getPort(),t.pathname=i.getPathname(),t.search=i.getSearch(),t.searchParams=i.getSearchParams(),t.hash=i.getHash())},YV=vV.prototype,KV=function(e,t){return{get:function(){return mX(this)[e]()},set:t&&function(e){return mX(this)[t](e)},configurable:!0,enumerable:!0}};if(OG&&(tX(YV,"href",KV("serialize","setHref")),tX(YV,"origin",KV("getOrigin")),tX(YV,"protocol",KV("getProtocol","setProtocol")),tX(YV,"username",KV("getUsername","setUsername")),tX(YV,"password",KV("getPassword","setPassword")),tX(YV,"host",KV("getHost","setHost")),tX(YV,"hostname",KV("getHostname","setHostname")),tX(YV,"port",KV("getPort","setPort")),tX(YV,"pathname",KV("getPathname","setPathname")),tX(YV,"search",KV("getSearch","setSearch")),tX(YV,"searchParams",KV("getSearchParams")),tX(YV,"hash",KV("getHash","setHash"))),eX(YV,"toJSON",(function(){return mX(this).serialize()}),{enumerable:!0}),eX(YV,"toString",(function(){return mX(this).serialize()}),{enumerable:!0}),GX){var NV=GX.createObjectURL,CV=GX.revokeObjectURL;NV&&eX(vV,"createObjectURL",qG(NV,GX)),CV&&eX(vV,"revokeObjectURL",qG(CV,GX))}dX(vV,"URL"),DG({global:!0,constructor:!0,forced:!AG,sham:!OG},{URL:vV});var kV=Ce;function JV(e,t,n,i){return new(n||(n=Promise))((function(l,o){function c(e){try{a(i.next(e))}catch(e){o(e)}}function r(e){try{a(i.throw(e))}catch(e){o(e)}}function a(e){var t;e.done?l(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,r)}a((i=i.apply(e,t||[])).next())}))}function LV(e,t,n,i){return new(n||(n=Promise))((function(l,o){function c(e){try{a(i.next(e))}catch(e){o(e)}}function r(e){try{a(i.throw(e))}catch(e){o(e)}}function a(e){var t;e.done?l(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,r)}a((i=i.apply(e,t||[])).next())}))}cl({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return kV(URL.prototype.toString,this)}}),e.ResponseMode=void 0,function(e){e.formPost="form_post",e.query="query"}(e.ResponseMode||(e.ResponseMode={}));e.Stores=void 0,function(e){e.ConfigData="config_data",e.OIDCProviderMetaData="oidc_provider_meta_data",e.SessionData="session_data",e.TemporaryData="temporary_data"}(e.Stores||(e.Stores={}));const UV="refresh_token_timer",HV=["RS256","RS512","RS384","PS256"],TV="code",wV="session_state",FV="sign_out_url",xV="sign_out_success",zV="state";var PV;!function(e){e.Include="include",e.SameOrigin="same-origin",e.Omit="omit"}(PV||(PV={}));class BV{constructor(e,t,n){this.message=n,this.name=t,this.code=e,Object.setPrototypeOf(this,new.target.prototype)}}class jV{constructor(){}static filterClaimsFromIDTokenPayload(e){const t=Object.assign({},e);null==t||delete t.iss,null==t||delete t.aud,null==t||delete t.exp,null==t||delete t.iat,null==t||delete t.acr,null==t||delete t.amr,null==t||delete t.azp,null==t||delete t.auth_time,null==t||delete t.nonce,null==t||delete t.c_hash,null==t||delete t.at_hash,null==t||delete t.nbf,null==t||delete t.isk,null==t||delete t.sid;const n={};return Object.entries(t).forEach((e=>{let[t,i]=e;const l=t.split("_").map(((e,t)=>0===t?e:[e[0].toUpperCase(),...e.slice(1)].join(""))).join("");n[l]=i})),n}static getTokenRequestHeaders(){return{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"}}static generateStateParamForRequestCorrelation(e,t){const n=parseInt(e.split("#")[1]);return t?"".concat(t,"_request_").concat(n):"request_".concat(n)}static extractPKCEKeyFromStateParam(e){return"pkce_code_verifier#".concat(parseInt(e.split("request_")[1]))}}jV.getTenantDomainFromIdTokenPayload=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"@";const n=e.sub.split(t);return n.length>2?n[n.length-1]:""};class MV{constructor(e,t){this._dataLayer=e,this._config=()=>LV(this,void 0,void 0,(function*(){return yield this._dataLayer.getConfigData()})),this._oidcProviderMetaData=()=>LV(this,void 0,void 0,(function*(){return yield this._dataLayer.getOIDCProviderMetaData()})),this._cryptoHelper=t}resolveEndpoints(e){return LV(this,void 0,void 0,(function*(){const t={},n=yield this._config();return n.endpoints&&Object.keys(n.endpoints).forEach((e=>{const i=e.replace(/[A-Z]/g,(e=>"_".concat(e.toLowerCase())));t[i]=(null==n?void 0:n.endpoints)?n.endpoints[e]:""})),Object.assign(Object.assign({},e),t)}))}resolveEndpointsExplicitly(){return LV(this,void 0,void 0,(function*(){const e={},t=yield this._config();if(!t.endpoints||!["authorization_endpoint","end_session_endpoint","jwks_uri","check_session_iframe","revocation_endpoint","token_endpoint","issuer","userinfo_endpoint"].every((e=>!!t.endpoints&&Object.keys(t.endpoints).some((t=>t.replace(/[A-Z]/g,(e=>"_".concat(e.toLowerCase())))===e)))))throw new BV("JS-AUTH_HELPER-REE-NF01","Required endpoints missing","Some or all of the required endpoints are missing in the object passed to the `endpoints` attribute of the`AuthConfig` object.");return t.endpoints&&Object.keys(t.endpoints).forEach((n=>{const i=n.replace(/[A-Z]/g,(e=>"_".concat(e.toLowerCase())));e[i]=(null==t?void 0:t.endpoints)?t.endpoints[n]:""})),Object.assign({},e)}))}resolveEndpointsByBaseURL(){return LV(this,void 0,void 0,(function*(){const e={},t=yield this._config(),n=t.baseUrl;if(!n)throw new BV("JS-AUTH_HELPER_REBO-NF01","Base URL not defined.","Base URL is not defined in AuthClient config.");t.endpoints&&Object.keys(t.endpoints).forEach((n=>{const i=n.replace(/[A-Z]/g,(e=>"_".concat(e.toLowerCase())));e[i]=(null==t?void 0:t.endpoints)?t.endpoints[n]:""}));const i={authorization_endpoint:"".concat(n).concat("/oauth2/authorize"),end_session_endpoint:"".concat(n).concat("/oidc/logout"),issuer:"".concat(n).concat("/oauth2/token"),jwks_uri:"".concat(n).concat("/oauth2/jwks"),check_session_iframe:"".concat(n).concat("/oidc/checksession"),revocation_endpoint:"".concat(n).concat("/oauth2/revoke"),token_endpoint:"".concat(n).concat("/oauth2/token"),userinfo_endpoint:"".concat(n).concat("/oauth2/userinfo")};return Object.assign(Object.assign({},i),e)}))}validateIdToken(e){return LV(this,void 0,void 0,(function*(){const t=(yield this._dataLayer.getOIDCProviderMetaData()).jwks_uri,n=yield this._config();if(!t||0===t.trim().length)throw new BV("JS_AUTH_HELPER-VIT-NF01","JWKS endpoint not found.","No JWKS endpoint was found in the OIDC provider meta data returned by the well-known endpoint or the JWKS endpoint passed to the SDK is empty.");let i;try{i=yield fetch(t,{credentials:n.sendCookiesInRequests?PV.Include:PV.SameOrigin})}catch(t){throw new BV("JS-AUTH_HELPER-VIT-NE02","Request to jwks endpoint failed.",null!=t?t:"The request sent to get the jwks from the server failed.")}if(200!==i.status||!i.ok)throw new BV("JS-AUTH_HELPER-VIT-HE03","Invalid response status received for jwks request (".concat(i.statusText,")."),yield i.json());const l=(yield this._oidcProviderMetaData()).issuer,{keys:o}=yield i.json(),c=yield this._cryptoHelper.getJWKForTheIdToken(e.split(".")[0],o);return this._cryptoHelper.isValidIdToken(e,c,(yield this._config()).clientID,null!=l?l:"",this._cryptoHelper.decodeIDToken(e).sub,(yield this._config()).clockTolerance)}))}getAuthenticatedUserInfo(e){var t,n,i,l;const o=this._cryptoHelper.decodeIDToken(e),c=jV.getTenantDomainFromIdTokenPayload(o),r=null!==(t=null==o?void 0:o.username)&&void 0!==t?t:"",a=null!==(n=o.given_name)&&void 0!==n?n:"",s=null!==(i=o.family_name)&&void 0!==i?i:"",d=a&&s?"".concat(a," ").concat(s):a||s||"",u=null!==(l=o.preferred_username)&&void 0!==l?l:d;return Object.assign({displayName:u,tenantDomain:c,username:r},jV.filterClaimsFromIDTokenPayload(o))}replaceCustomGrantTemplateTags(e,t){var n;return LV(this,void 0,void 0,(function*(){let i="openid";const l=yield this._config(),o=yield this._dataLayer.getSessionData(t);return l.scope&&l.scope.length>0&&(l.scope.includes("openid")||l.scope.push("openid"),i=l.scope.join(" ")),e.replace("{{token}}",o.access_token).replace("{{username}}",this.getAuthenticatedUserInfo(o.id_token).username).replace("{{scope}}",i).replace("{{clientID}}",l.clientID).replace("{{clientSecret}}",null!==(n=l.clientSecret)&&void 0!==n?n:"")}))}clearUserSessionData(e){return LV(this,void 0,void 0,(function*(){yield this._dataLayer.removeTemporaryData(e),yield this._dataLayer.removeSessionData(e)}))}handleTokenResponse(e,t){return LV(this,void 0,void 0,(function*(){if(200!==e.status||!e.ok)throw new BV("JS-AUTH_HELPER-HTR-NE01","Invalid response status received for token request (".concat(e.statusText,")."),yield e.json());const n=yield e.json();if(n.created_at=(new Date).getTime(),(yield this._config()).validateIDToken)return this.validateIdToken(n.id_token).then((()=>LV(this,void 0,void 0,(function*(){yield this._dataLayer.setSessionData(n,t);const e={accessToken:n.access_token,createdAt:n.created_at,expiresIn:n.expires_in,idToken:n.id_token,refreshToken:n.refresh_token,scope:n.scope,tokenType:n.token_type};return Promise.resolve(e)}))));{const e={accessToken:n.access_token,createdAt:n.created_at,expiresIn:n.expires_in,idToken:n.id_token,refreshToken:n.refresh_token,scope:n.scope,tokenType:n.token_type};return yield this._dataLayer.setSessionData(n,t),Promise.resolve(e)}}))}generatePKCEKey(e){var t;return LV(this,void 0,void 0,(function*(){const n=yield this._dataLayer.getTemporaryData(e),i=[];Object.keys(n).forEach((e=>{e.startsWith("pkce_code_verifier")&&i.push(e)}));const l=i.sort().pop();return"pkce_code_verifier#".concat(parseInt(null!==(t=null==l?void 0:l.split("#")[1])&&void 0!==t?t:"-1")+1)}))}}class QV{constructor(e){this._cryptoUtils=e}getCodeVerifier(){return this._cryptoUtils.base64URLEncode(this._cryptoUtils.generateRandomBytes(32))}getCodeChallenge(e){return this._cryptoUtils.base64URLEncode(this._cryptoUtils.hashSha256(e))}getJWKForTheIdToken(e,t){const n=JSON.parse(this._cryptoUtils.base64URLDecode(e));for(const e of t)if(n.kid===e.kid)return e;throw new BV("JS-CRYPTO_UTIL-GJFTIT-IV01","kid not found.","Failed to find the 'kid' specified in the id_token. 'kid' found in the header : "+n.kid+", Expected values: "+t.map((e=>e.kid)).join(", "))}isValidIdToken(e,t,n,i,l,o){return this._cryptoUtils.verifyJwt(e,t,HV,n,i,l,o).then((e=>e?Promise.resolve(!0):Promise.reject(new BV("JS-CRYPTO_HELPER-IVIT-IV01","Invalid ID token.","ID token validation returned false"))))}decodeIDToken(e){try{const t=this._cryptoUtils.base64URLDecode(e.split(".")[1]);return JSON.parse(t)}catch(e){throw new BV("JS-CRYPTO_UTIL-DIT-IV01","Decoding ID token failed.",e)}}}class EV{constructor(e,t){this._cryptoUtils=t,this._cryptoHelper=new QV(t),this._authenticationHelper=new MV(e,this._cryptoHelper),this._dataLayer=e,this._config=()=>LV(this,void 0,void 0,(function*(){return yield this._dataLayer.getConfigData()})),this._oidcProviderMetaData=()=>LV(this,void 0,void 0,(function*(){return yield this._dataLayer.getOIDCProviderMetaData()}))}getAuthorizationURL(e,t){var n,i,l;return LV(this,void 0,void 0,(function*(){const o=yield this._dataLayer.getOIDCProviderMetaDataParameter("authorization_endpoint"),c=yield this._config();if(!o||0===o.trim().length)throw new BV("JS-AUTH_CORE-GAU-NF01","No authorization endpoint found.","No authorization endpoint was found in the OIDC provider meta data from the well-known endpoint or the authorization endpoint passed to the SDK is empty.");const r=new URL(o),a=new Map;a.set("response_type","code"),a.set("client_id",c.clientID);let s="openid";c.scope&&c.scope.length>0&&(c.scope.includes("openid")||c.scope.push("openid"),s=c.scope.join(" ")),a.set("scope",s),a.set("redirect_uri",c.signInRedirectURL),c.responseMode&&a.set("response_mode",c.responseMode);const d=yield this._authenticationHelper.generatePKCEKey(t);if(c.enablePKCE){const e=null===(n=this._cryptoHelper)||void 0===n?void 0:n.getCodeVerifier(),l=null===(i=this._cryptoHelper)||void 0===i?void 0:i.getCodeChallenge(e);yield this._dataLayer.setTemporaryDataParameter(d,e,t),a.set("code_challenge_method","S256"),a.set("code_challenge",l)}c.prompt&&a.set("prompt",c.prompt);const u=e;if(u)for(const[e,t]of Object.entries(u))if(""!=e&&""!=t&&"state"!==e){const n=e.replace(/[A-Z]/g,(e=>"_".concat(e.toLowerCase())));a.set(n,t.toString())}a.set("state",jV.generateStateParamForRequestCorrelation(d,u?null===(l=u.state)||void 0===l?void 0:l.toString():""));for(const[e,t]of a.entries())r.searchParams.append(e,t);return r.toString()}))}requestAccessToken(e,t,n,i){return LV(this,void 0,void 0,(function*(){const l=(yield this._oidcProviderMetaData()).token_endpoint,o=yield this._config();if(!l||0===l.trim().length)throw new BV("JS-AUTH_CORE-RAT1-NF01","Token endpoint not found.","No token endpoint was found in the OIDC provider meta data returned by the well-known endpoint or the token endpoint passed to the SDK is empty.");t&&(yield this._dataLayer.setSessionDataParameter("session_state",t,i));const c=[];c.push("client_id=".concat(o.clientID)),o.clientSecret&&o.clientSecret.trim().length>0&&c.push("client_secret=".concat(o.clientSecret));const r=e;let a;c.push("code=".concat(r)),c.push("grant_type=authorization_code"),c.push("redirect_uri=".concat(o.signInRedirectURL)),o.enablePKCE&&(c.push("code_verifier=".concat(yield this._dataLayer.getTemporaryDataParameter(jV.extractPKCEKeyFromStateParam(n),i))),yield this._dataLayer.removeTemporaryDataParameter(jV.extractPKCEKeyFromStateParam(n),i));try{a=yield fetch(l,{body:c.join("&"),credentials:o.sendCookiesInRequests?PV.Include:PV.SameOrigin,headers:new Headers(jV.getTokenRequestHeaders()),method:"POST"})}catch(l){throw new BV("JS-AUTH_CORE-RAT1-NE02","Requesting access token failed",null!=l?l:"The request to get the access token from the server failed.")}if(!a.ok)throw new BV("JS-AUTH_CORE-RAT1-HE03","Requesting access token failed with ".concat(a.statusText),yield a.json());return yield this._authenticationHelper.handleTokenResponse(a,i)}))}refreshAccessToken(e){return LV(this,void 0,void 0,(function*(){const t=(yield this._oidcProviderMetaData()).token_endpoint,n=yield this._config(),i=yield this._dataLayer.getSessionData(e);if(!i.refresh_token)throw new BV("JS-AUTH_CORE-RAT2-NF01","No refresh token found.","There was no refresh token found. Asgardeo doesn't return a refresh token if the refresh token grant is not enabled.");if(!t||0===t.trim().length)throw new BV("JS-AUTH_CORE-RAT2-NF02","No refresh token endpoint found.","No refresh token endpoint was in the OIDC provider meta data returned by the well-known endpoint or the refresh token endpoint passed to the SDK is empty.");const l=[];let o;l.push("client_id=".concat(n.clientID)),l.push("refresh_token=".concat(i.refresh_token)),l.push("grant_type=refresh_token"),n.clientSecret&&n.clientSecret.trim().length>0&&l.push("client_secret=".concat(n.clientSecret));try{o=yield fetch(t,{body:l.join("&"),credentials:n.sendCookiesInRequests?PV.Include:PV.SameOrigin,headers:new Headers(jV.getTokenRequestHeaders()),method:"POST"})}catch(t){throw new BV("JS-AUTH_CORE-RAT2-NR03","Refresh access token request failed.",null!=t?t:"The request to refresh the access token failed.")}if(!o.ok)throw new BV("JS-AUTH_CORE-RAT2-HE04","Refreshing access token failed with ".concat(o.statusText),yield o.json());return this._authenticationHelper.handleTokenResponse(o,e)}))}revokeAccessToken(e){return LV(this,void 0,void 0,(function*(){const t=(yield this._oidcProviderMetaData()).revocation_endpoint,n=yield this._config();if(!t||0===t.trim().length)throw new BV("JS-AUTH_CORE-RAT3-NF01","No revoke access token endpoint found.","No revoke access token endpoint was found in the OIDC provider meta data returned by the well-known endpoint or the revoke access token endpoint passed to the SDK is empty.");const i=[];let l;i.push("client_id=".concat(n.clientID)),i.push("token=".concat((yield this._dataLayer.getSessionData(e)).access_token)),i.push("token_type_hint=access_token");try{l=yield fetch(t,{body:i.join("&"),credentials:n.sendCookiesInRequests?PV.Include:PV.SameOrigin,headers:new Headers(jV.getTokenRequestHeaders()),method:"POST"})}catch(t){throw new BV("JS-AUTH_CORE-RAT3-NE02","The request to revoke access token failed.",null!=t?t:"The request sent to revoke the access token failed.")}if(200!==l.status||!l.ok)throw new BV("JS-AUTH_CORE-RAT3-HE03","Invalid response status received for revoke access token request (".concat(l.statusText,")."),yield l.json());return this._authenticationHelper.clearUserSessionData(e),Promise.resolve(l)}))}requestCustomGrant(e,t){return LV(this,void 0,void 0,(function*(){const n=yield this._oidcProviderMetaData(),i=yield this._config();let l;if(l=e.tokenEndpoint&&0!==e.tokenEndpoint.trim().length?e.tokenEndpoint:n.token_endpoint,!l||0===l.trim().length)throw new BV("JS-AUTH_CORE-RCG-NF01","Token endpoint not found.","No token endpoint was found in the OIDC provider meta data returned by the well-known endpoint or the token endpoint passed to the SDK is empty.");const o=yield Promise.all(Object.entries(e.data).map((e=>{let[n,i]=e;return LV(this,void 0,void 0,(function*(){const e=yield this._authenticationHelper.replaceCustomGrantTemplateTags(i,t);return"".concat(n,"=").concat(e)}))})));let c=Object.assign({},jV.getTokenRequestHeaders());e.attachToken&&(c=Object.assign(Object.assign({},c),{Authorization:"Bearer ".concat((yield this._dataLayer.getSessionData(t)).access_token)}));const r={body:o.join("&"),credentials:i.sendCookiesInRequests?PV.Include:PV.SameOrigin,headers:new Headers(c),method:"POST"};let a;try{a=yield fetch(l,r)}catch(e){throw new BV("JS-AUTH_CORE-RCG-NE02","The custom grant request failed.",null!=e?e:"The request sent to get the custom grant failed.")}if(200!==a.status||!a.ok)throw new BV("JS-AUTH_CORE-RCG-HE03","Invalid response status received for the custom grant request. (".concat(a.statusText,")"),yield a.json());return e.returnsSession?this._authenticationHelper.handleTokenResponse(a,t):Promise.resolve(yield a.json())}))}getBasicUserInfo(e){return LV(this,void 0,void 0,(function*(){const t=yield this._dataLayer.getSessionData(e),n=this._authenticationHelper.getAuthenticatedUserInfo(null==t?void 0:t.id_token);let i={allowedScopes:t.scope,sessionState:t.session_state};return Object.keys(n).forEach((e=>{void 0!==n[e]&&""!==n[e]&&null!==n[e]||delete n[e]})),i=Object.assign(Object.assign({},i),n),i}))}getDecodedIDToken(e){return LV(this,void 0,void 0,(function*(){const t=(yield this._dataLayer.getSessionData(e)).id_token;return this._cryptoHelper.decodeIDToken(t)}))}getCryptoHelper(){return LV(this,void 0,void 0,(function*(){return this._cryptoHelper}))}getIDToken(e){return LV(this,void 0,void 0,(function*(){return(yield this._dataLayer.getSessionData(e)).id_token}))}getOIDCProviderMetaData(e){return LV(this,void 0,void 0,(function*(){const t=yield this._config();if(!e&&(yield this._dataLayer.getTemporaryDataParameter("op_config_initiated")))return Promise.resolve();const n=t.wellKnownEndpoint;if(n){let e;try{if(e=yield fetch(n),200!==e.status||!e.ok)throw new Error}catch(t){throw new BV("JS-AUTH_CORE-GOPMD-HE01","Invalid well-known response","The well known endpoint response has been failed with an error.")}return yield this._dataLayer.setOIDCProviderMetaData(yield this._authenticationHelper.resolveEndpoints(yield e.json())),yield this._dataLayer.setTemporaryDataParameter("op_config_initiated",!0),Promise.resolve()}if(t.baseUrl){try{yield this._dataLayer.setOIDCProviderMetaData(yield this._authenticationHelper.resolveEndpointsByBaseURL())}catch(t){throw new BV("JS-AUTH_CORE-GOPMD-IV02","Resolving endpoints failed.",null!=t?t:"Resolving endpoints by base url failed.")}return yield this._dataLayer.setTemporaryDataParameter("op_config_initiated",!0),Promise.resolve()}return yield this._dataLayer.setOIDCProviderMetaData(yield this._authenticationHelper.resolveEndpointsExplicitly()),yield this._dataLayer.setTemporaryDataParameter("op_config_initiated",!0),Promise.resolve()}))}getOIDCServiceEndpoints(){var e,t,n,i,l,o,c,r,a,s;return LV(this,void 0,void 0,(function*(){const d=yield this._oidcProviderMetaData();return{authorizationEndpoint:null!==(e=d.authorization_endpoint)&&void 0!==e?e:"",checkSessionIframe:null!==(t=d.check_session_iframe)&&void 0!==t?t:"",endSessionEndpoint:null!==(n=d.end_session_endpoint)&&void 0!==n?n:"",introspectionEndpoint:null!==(i=d.introspection_endpoint)&&void 0!==i?i:"",issuer:null!==(l=d.issuer)&&void 0!==l?l:"",jwksUri:null!==(o=d.jwks_uri)&&void 0!==o?o:"",registrationEndpoint:null!==(c=d.registration_endpoint)&&void 0!==c?c:"",revocationEndpoint:null!==(r=d.revocation_endpoint)&&void 0!==r?r:"",tokenEndpoint:null!==(a=d.token_endpoint)&&void 0!==a?a:"",userinfoEndpoint:null!==(s=d.userinfo_endpoint)&&void 0!==s?s:""}}))}getSignOutURL(e){var t,n,i;return LV(this,void 0,void 0,(function*(){const l=null===(t=yield this._oidcProviderMetaData())||void 0===t?void 0:t.end_session_endpoint,o=yield this._config();if(!l||0===l.trim().length)throw new BV("JS-AUTH_CORE-GSOU-NF01","Sign-out endpoint not found.","No sign-out endpoint was found in the OIDC provider meta data returned by the well-known endpoint or the sign-out endpoint passed to the SDK is empty.");const c=null===(n=yield this._dataLayer.getSessionData(e))||void 0===n?void 0:n.id_token;if(!c||0===c.trim().length)throw new BV("JS-AUTH_CORE-GSOU-NF02","ID token not found.","No ID token could be found. Either the session information is lost or you have not signed in.");const r=null!==(i=null==o?void 0:o.signOutRedirectURL)&&void 0!==i?i:null==o?void 0:o.signInRedirectURL;if(!r||0===r.trim().length)throw new BV("JS-AUTH_CORE-GSOU-NF03","No sign-out redirect URL found.","The sign-out redirect URL cannot be found or the URL passed to the SDK is empty. No sign-in redirect URL has been found either. ");return"".concat(l,"?id_token_hint=").concat(c,"&post_logout_redirect_uri=").concat(r,"&state=sign_out_success")}))}clearUserSessionData(e){return LV(this,void 0,void 0,(function*(){yield this._authenticationHelper.clearUserSessionData(e)}))}getAccessToken(e){var t;return LV(this,void 0,void 0,(function*(){return null===(t=yield this._dataLayer.getSessionData(e))||void 0===t?void 0:t.access_token}))}isAuthenticated(e){return LV(this,void 0,void 0,(function*(){return Boolean(yield this.getAccessToken(e))}))}getPKCECode(e,t){return LV(this,void 0,void 0,(function*(){return yield this._dataLayer.getTemporaryDataParameter(jV.extractPKCEKeyFromStateParam(e),t)}))}setPKCECode(e,t,n){return LV(this,void 0,void 0,(function*(){return yield this._dataLayer.setTemporaryDataParameter(jV.extractPKCEKeyFromStateParam(t),e,n)}))}updateConfig(e){return LV(this,void 0,void 0,(function*(){yield this._dataLayer.setConfigData(e),yield this.getOIDCProviderMetaData(!0)}))}}class DV{constructor(e,t){this._id=e,this._store=t}setDataInBulk(e,t){var n;return LV(this,void 0,void 0,(function*(){const i=null!==(n=yield this._store.getData(e))&&void 0!==n?n:null,l=i&&JSON.parse(i),o=Object.assign(Object.assign({},l),t),c=JSON.stringify(o);yield this._store.setData(e,c)}))}setValue(e,t,n){var i;return LV(this,void 0,void 0,(function*(){const l=null!==(i=yield this._store.getData(e))&&void 0!==i?i:null,o=l&&JSON.parse(l),c=Object.assign(Object.assign({},o),{[t]:n}),r=JSON.stringify(c);yield this._store.setData(e,r)}))}removeValue(e,t){var n;return LV(this,void 0,void 0,(function*(){const i=null!==(n=yield this._store.getData(e))&&void 0!==n?n:null,l=i&&JSON.parse(i),o=Object.assign({},l);delete o[t];const c=JSON.stringify(o);yield this._store.setData(e,c)}))}_resolveKey(e,t){return t?"".concat(e,"-").concat(this._id,"-").concat(t):"".concat(e,"-").concat(this._id)}isLocalStorageAvailable(){try{const e="__ASGARDEO_AUTH_CORE_LOCAL_STORAGE_TEST__";return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return!1}}setConfigData(t){return LV(this,void 0,void 0,(function*(){yield this.setDataInBulk(this._resolveKey(e.Stores.ConfigData),t)}))}setOIDCProviderMetaData(t){return LV(this,void 0,void 0,(function*(){this.setDataInBulk(this._resolveKey(e.Stores.OIDCProviderMetaData),t)}))}setTemporaryData(t,n){return LV(this,void 0,void 0,(function*(){this.setDataInBulk(this._resolveKey(e.Stores.TemporaryData,n),t)}))}setSessionData(t,n){return LV(this,void 0,void 0,(function*(){this.setDataInBulk(this._resolveKey(e.Stores.SessionData,n),t)}))}setCustomData(e,t,n){return LV(this,void 0,void 0,(function*(){this.setDataInBulk(this._resolveKey(e,n),t)}))}getConfigData(){var t;return LV(this,void 0,void 0,(function*(){return JSON.parse(null!==(t=yield this._store.getData(this._resolveKey(e.Stores.ConfigData)))&&void 0!==t?t:null)}))}getOIDCProviderMetaData(){var t;return LV(this,void 0,void 0,(function*(){return JSON.parse(null!==(t=yield this._store.getData(this._resolveKey(e.Stores.OIDCProviderMetaData)))&&void 0!==t?t:null)}))}getTemporaryData(t){var n;return LV(this,void 0,void 0,(function*(){return JSON.parse(null!==(n=yield this._store.getData(this._resolveKey(e.Stores.TemporaryData,t)))&&void 0!==n?n:null)}))}getSessionData(t){var n;return LV(this,void 0,void 0,(function*(){return JSON.parse(null!==(n=yield this._store.getData(this._resolveKey(e.Stores.SessionData,t)))&&void 0!==n?n:null)}))}getCustomData(e,t){var n;return LV(this,void 0,void 0,(function*(){return JSON.parse(null!==(n=yield this._store.getData(this._resolveKey(e,t)))&&void 0!==n?n:null)}))}setSessionStatus(e){this.isLocalStorageAvailable()&&localStorage.setItem("asgardeo-session-active",e)}getSessionStatus(){var e;return this.isLocalStorageAvailable()&&null!==(e=localStorage.getItem("asgardeo-session-active"))&&void 0!==e?e:""}removeSessionStatus(){this.isLocalStorageAvailable()&&localStorage.removeItem("asgardeo-session-active")}removeConfigData(){return LV(this,void 0,void 0,(function*(){yield this._store.removeData(this._resolveKey(e.Stores.ConfigData))}))}removeOIDCProviderMetaData(){return LV(this,void 0,void 0,(function*(){yield this._store.removeData(this._resolveKey(e.Stores.OIDCProviderMetaData))}))}removeTemporaryData(t){return LV(this,void 0,void 0,(function*(){yield this._store.removeData(this._resolveKey(e.Stores.TemporaryData,t))}))}removeSessionData(t){return LV(this,void 0,void 0,(function*(){yield this._store.removeData(this._resolveKey(e.Stores.SessionData,t))}))}getConfigDataParameter(t){return LV(this,void 0,void 0,(function*(){const n=yield this._store.getData(this._resolveKey(e.Stores.ConfigData));return n&&JSON.parse(n)[t]}))}getOIDCProviderMetaDataParameter(t){return LV(this,void 0,void 0,(function*(){const n=yield this._store.getData(this._resolveKey(e.Stores.OIDCProviderMetaData));return n&&JSON.parse(n)[t]}))}getTemporaryDataParameter(t,n){return LV(this,void 0,void 0,(function*(){const i=yield this._store.getData(this._resolveKey(e.Stores.TemporaryData,n));return i&&JSON.parse(i)[t]}))}getSessionDataParameter(t,n){return LV(this,void 0,void 0,(function*(){const i=yield this._store.getData(this._resolveKey(e.Stores.SessionData,n));return i&&JSON.parse(i)[t]}))}setConfigDataParameter(t,n){return LV(this,void 0,void 0,(function*(){yield this.setValue(this._resolveKey(e.Stores.ConfigData),t,n)}))}setOIDCProviderMetaDataParameter(t,n){return LV(this,void 0,void 0,(function*(){yield this.setValue(this._resolveKey(e.Stores.OIDCProviderMetaData),t,n)}))}setTemporaryDataParameter(t,n,i){return LV(this,void 0,void 0,(function*(){yield this.setValue(this._resolveKey(e.Stores.TemporaryData,i),t,n)}))}setSessionDataParameter(t,n,i){return LV(this,void 0,void 0,(function*(){yield this.setValue(this._resolveKey(e.Stores.SessionData,i),t,n)}))}removeConfigDataParameter(t){return LV(this,void 0,void 0,(function*(){yield this.removeValue(this._resolveKey(e.Stores.ConfigData),t)}))}removeOIDCProviderMetaDataParameter(t){return LV(this,void 0,void 0,(function*(){yield this.removeValue(this._resolveKey(e.Stores.OIDCProviderMetaData),t)}))}removeTemporaryDataParameter(t,n){return LV(this,void 0,void 0,(function*(){yield this.removeValue(this._resolveKey(e.Stores.TemporaryData,n),t)}))}removeSessionDataParameter(t,n){return LV(this,void 0,void 0,(function*(){yield this.removeValue(this._resolveKey(e.Stores.SessionData,n),t)}))}}const OV={clockTolerance:300,enablePKCE:!0,responseMode:e.ResponseMode.query,scope:["openid"],sendCookiesInRequests:!0,validateIDToken:!0};class AV{constructor(){}initialize(e,t,n,i){var l,o,c;return LV(this,void 0,void 0,(function*(){const r=e.clientID;AV._instanceID?AV._instanceID+=1:AV._instanceID=0,i&&(AV._instanceID=i),this._dataLayer=new DV(r?"instance_".concat(AV._instanceID,"-").concat(r):"instance_".concat(AV._instanceID),t),this._authenticationCore=new EV(this._dataLayer,n),AV._authenticationCore=new EV(this._dataLayer,n),yield this._dataLayer.setConfigData(Object.assign(Object.assign(Object.assign({},OV),e),{scope:[...null!==(l=OV.scope)&&void 0!==l?l:[],...null!==(c=null===(o=e.scope)||void 0===o?void 0:o.filter((e=>{var t;return!(null===(t=null==OV?void 0:OV.scope)||void 0===t?void 0:t.includes(e))})))&&void 0!==c?c:[]]}))}))}getDataLayer(){return this._dataLayer}getInstanceID(){return AV._instanceID}getAuthorizationURL(e,t){return LV(this,void 0,void 0,(function*(){const n=Object.assign({},e);return null==n||delete n.forceInit,(yield this._dataLayer.getTemporaryDataParameter("op_config_initiated"))?this._authenticationCore.getAuthorizationURL(n,t):this._authenticationCore.getOIDCProviderMetaData(null==e?void 0:e.forceInit).then((()=>this._authenticationCore.getAuthorizationURL(n,t)))}))}requestAccessToken(e,t,n,i){return LV(this,void 0,void 0,(function*(){return(yield this._dataLayer.getTemporaryDataParameter("op_config_initiated"))?this._authenticationCore.requestAccessToken(e,t,n,i):this._authenticationCore.getOIDCProviderMetaData(!1).then((()=>this._authenticationCore.requestAccessToken(e,t,n,i)))}))}getSignOutURL(e){return LV(this,void 0,void 0,(function*(){return this._authenticationCore.getSignOutURL(e)}))}getOIDCServiceEndpoints(){return LV(this,void 0,void 0,(function*(){return this._authenticationCore.getOIDCServiceEndpoints()}))}getDecodedIDToken(e){return LV(this,void 0,void 0,(function*(){return this._authenticationCore.getDecodedIDToken(e)}))}getIDToken(e){return LV(this,void 0,void 0,(function*(){return this._authenticationCore.getIDToken(e)}))}getBasicUserInfo(e){return LV(this,void 0,void 0,(function*(){return this._authenticationCore.getBasicUserInfo(e)}))}getCryptoHelper(){return LV(this,void 0,void 0,(function*(){return this._authenticationCore.getCryptoHelper()}))}revokeAccessToken(e){return this._authenticationCore.revokeAccessToken(e)}refreshAccessToken(e){return this._authenticationCore.refreshAccessToken(e)}getAccessToken(e){return LV(this,void 0,void 0,(function*(){return this._authenticationCore.getAccessToken(e)}))}requestCustomGrant(e,t){return this._authenticationCore.requestCustomGrant(e,t)}isAuthenticated(e){return LV(this,void 0,void 0,(function*(){return this._authenticationCore.isAuthenticated(e)}))}getPKCECode(e,t){return LV(this,void 0,void 0,(function*(){return this._authenticationCore.getPKCECode(e,t)}))}setPKCECode(e,t,n){return LV(this,void 0,void 0,(function*(){yield this._authenticationCore.setPKCECode(e,t,n)}))}static isSignOutSuccessful(e){const t=new URL(e),n=t.searchParams.get("state"),i=Boolean(t.searchParams.get("error"));return!!n&&"sign_out_success"===n&&!i}static didSignOutFail(e){const t=new URL(e),n=t.searchParams.get("state"),i=Boolean(t.searchParams.get("error"));return!!n&&"sign_out_success"===n&&i}updateConfig(e){return LV(this,void 0,void 0,(function*(){yield this._authenticationCore.updateConfig(e)}))}static clearUserSessionData(e){return LV(this,void 0,void 0,(function*(){yield this._authenticationCore.clearUserSessionData(e)}))}}function _V(e,t,n){var i=void 0===t?null:t,l=function(e,t){var n=atob(e);if(t){for(var i=new Uint8Array(n.length),l=0,o=n.length;l<o;++l)i[l]=n.charCodeAt(l);return String.fromCharCode.apply(null,new Uint16Array(i.buffer))}return n}(e,void 0!==n&&n),o=l.indexOf("\n",10)+1,c=l.substring(o)+(i?"//# sourceMappingURL="+i:""),r=new Blob([c],{type:"application/javascript"});return URL.createObjectURL(r)}var qV,$V,eW,tW,nW=(qV="Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwp2YXIgd29ya2VyX2NvZGU9ZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZShlLHQsbixyKXtyZXR1cm4gbmV3KG58fChuPVByb21pc2UpKSgoZnVuY3Rpb24oaSxvKXtmdW5jdGlvbiBzKGUpe3RyeXtjKHIubmV4dChlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gYShlKXt0cnl7YyhyLnRocm93KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBjKGUpe3ZhciB0O2UuZG9uZT9pKGUudmFsdWUpOih0PWUudmFsdWUsdCBpbnN0YW5jZW9mIG4/dDpuZXcgbigoZnVuY3Rpb24oZSl7ZSh0KX0pKSkudGhlbihzLGEpfWMoKHI9ci5hcHBseShlLHR8fFtdKSkubmV4dCgpKX0pKX1mdW5jdGlvbiB0KGUsdCxuLHIpe3JldHVybiBuZXcobnx8KG49UHJvbWlzZSkpKChmdW5jdGlvbihpLG8pe2Z1bmN0aW9uIHMoZSl7dHJ5e2Moci5uZXh0KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBhKGUpe3RyeXtjKHIudGhyb3coZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIGMoZSl7dmFyIHQ7ZS5kb25lP2koZS52YWx1ZSk6KHQ9ZS52YWx1ZSx0IGluc3RhbmNlb2Ygbj90Om5ldyBuKChmdW5jdGlvbihlKXtlKHQpfSkpKS50aGVuKHMsYSl9Yygocj1yLmFwcGx5KGUsdHx8W10pKS5uZXh0KCkpfSkpfXZhciBuOyFmdW5jdGlvbihlKXtlLmZvcm1Qb3N0PSJmb3JtX3Bvc3QiLGUucXVlcnk9InF1ZXJ5In0obnx8KG49e30pKTt2YXIgcjshZnVuY3Rpb24oZSl7ZS5Db25maWdEYXRhPSJjb25maWdfZGF0YSIsZS5PSURDUHJvdmlkZXJNZXRhRGF0YT0ib2lkY19wcm92aWRlcl9tZXRhX2RhdGEiLGUuU2Vzc2lvbkRhdGE9InNlc3Npb25fZGF0YSIsZS5UZW1wb3JhcnlEYXRhPSJ0ZW1wb3JhcnlfZGF0YSJ9KHJ8fChyPXt9KSk7Y29uc3QgaT0icmVmcmVzaF90b2tlbl90aW1lciIsbz1bIlJTMjU2IiwiUlM1MTIiLCJSUzM4NCIsIlBTMjU2Il0scz0ic2lnbl9vdXRfdXJsIjt2YXIgYTshZnVuY3Rpb24oZSl7ZS5JbmNsdWRlPSJpbmNsdWRlIixlLlNhbWVPcmlnaW49InNhbWUtb3JpZ2luIixlLk9taXQ9Im9taXQifShhfHwoYT17fSkpO2NsYXNzIGN7Y29uc3RydWN0b3IoZSx0LG4pe3RoaXMubWVzc2FnZT1uLHRoaXMubmFtZT10LHRoaXMuY29kZT1lLE9iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLG5ldy50YXJnZXQucHJvdG90eXBlKX19Y2xhc3MgdXtjb25zdHJ1Y3Rvcigpe31zdGF0aWMgZmlsdGVyQ2xhaW1zRnJvbUlEVG9rZW5QYXlsb2FkKGUpe2NvbnN0IHQ9T2JqZWN0LmFzc2lnbih7fSxlKTtudWxsPT10fHxkZWxldGUgdC5pc3MsbnVsbD09dHx8ZGVsZXRlIHQuYXVkLG51bGw9PXR8fGRlbGV0ZSB0LmV4cCxudWxsPT10fHxkZWxldGUgdC5pYXQsbnVsbD09dHx8ZGVsZXRlIHQuYWNyLG51bGw9PXR8fGRlbGV0ZSB0LmFtcixudWxsPT10fHxkZWxldGUgdC5henAsbnVsbD09dHx8ZGVsZXRlIHQuYXV0aF90aW1lLG51bGw9PXR8fGRlbGV0ZSB0Lm5vbmNlLG51bGw9PXR8fGRlbGV0ZSB0LmNfaGFzaCxudWxsPT10fHxkZWxldGUgdC5hdF9oYXNoLG51bGw9PXR8fGRlbGV0ZSB0Lm5iZixudWxsPT10fHxkZWxldGUgdC5pc2ssbnVsbD09dHx8ZGVsZXRlIHQuc2lkO2NvbnN0IG49e307cmV0dXJuIE9iamVjdC5lbnRyaWVzKHQpLmZvckVhY2goKGU9PntsZXRbdCxyXT1lO2NvbnN0IGk9dC5zcGxpdCgiXyIpLm1hcCgoKGUsdCk9PjA9PT10P2U6W2VbMF0udG9VcHBlckNhc2UoKSwuLi5lLnNsaWNlKDEpXS5qb2luKCIiKSkpLmpvaW4oIiIpO25baV09cn0pKSxufXN0YXRpYyBnZXRUb2tlblJlcXVlc3RIZWFkZXJzKCl7cmV0dXJue0FjY2VwdDoiYXBwbGljYXRpb24vanNvbiIsIkNvbnRlbnQtVHlwZSI6ImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCJ9fXN0YXRpYyBnZW5lcmF0ZVN0YXRlUGFyYW1Gb3JSZXF1ZXN0Q29ycmVsYXRpb24oZSx0KXtjb25zdCBuPXBhcnNlSW50KGUuc3BsaXQoIiMiKVsxXSk7cmV0dXJuIHQ/IiIuY29uY2F0KHQsIl9yZXF1ZXN0XyIpLmNvbmNhdChuKToicmVxdWVzdF8iLmNvbmNhdChuKX1zdGF0aWMgZXh0cmFjdFBLQ0VLZXlGcm9tU3RhdGVQYXJhbShlKXtyZXR1cm4icGtjZV9jb2RlX3ZlcmlmaWVyIyIuY29uY2F0KHBhcnNlSW50KGUuc3BsaXQoInJlcXVlc3RfIilbMV0pKX19dS5nZXRUZW5hbnREb21haW5Gcm9tSWRUb2tlblBheWxvYWQ9ZnVuY3Rpb24oZSl7bGV0IHQ9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOiJAIjtjb25zdCBuPWUuc3ViLnNwbGl0KHQpO3JldHVybiBuLmxlbmd0aD4yP25bbi5sZW5ndGgtMV06IiJ9O2NsYXNzIGx7Y29uc3RydWN0b3IoZSxuKXt0aGlzLl9kYXRhTGF5ZXI9ZSx0aGlzLl9jb25maWc9KCk9PnQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtyZXR1cm4geWllbGQgdGhpcy5fZGF0YUxheWVyLmdldENvbmZpZ0RhdGEoKX0pKSx0aGlzLl9vaWRjUHJvdmlkZXJNZXRhRGF0YT0oKT0+dCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3JldHVybiB5aWVsZCB0aGlzLl9kYXRhTGF5ZXIuZ2V0T0lEQ1Byb3ZpZGVyTWV0YURhdGEoKX0pKSx0aGlzLl9jcnlwdG9IZWxwZXI9bn1yZXNvbHZlRW5kcG9pbnRzKGUpe3JldHVybiB0KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7Y29uc3QgdD17fSxuPXlpZWxkIHRoaXMuX2NvbmZpZygpO3JldHVybiBuLmVuZHBvaW50cyYmT2JqZWN0LmtleXMobi5lbmRwb2ludHMpLmZvckVhY2goKGU9Pntjb25zdCByPWUucmVwbGFjZSgvW0EtWl0vZywoZT0+Il8iLmNvbmNhdChlLnRvTG93ZXJDYXNlKCkpKSk7dFtyXT0obnVsbD09bj92b2lkIDA6bi5lbmRwb2ludHMpP24uZW5kcG9pbnRzW2VdOiIifSkpLE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxlKSx0KX0pKX1yZXNvbHZlRW5kcG9pbnRzRXhwbGljaXRseSgpe3JldHVybiB0KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7Y29uc3QgZT17fSx0PXlpZWxkIHRoaXMuX2NvbmZpZygpO2lmKCF0LmVuZHBvaW50c3x8IVsiYXV0aG9yaXphdGlvbl9lbmRwb2ludCIsImVuZF9zZXNzaW9uX2VuZHBvaW50Iiwiandrc191cmkiLCJjaGVja19zZXNzaW9uX2lmcmFtZSIsInJldm9jYXRpb25fZW5kcG9pbnQiLCJ0b2tlbl9lbmRwb2ludCIsImlzc3VlciIsInVzZXJpbmZvX2VuZHBvaW50Il0uZXZlcnkoKGU9PiEhdC5lbmRwb2ludHMmJk9iamVjdC5rZXlzKHQuZW5kcG9pbnRzKS5zb21lKCh0PT50LnJlcGxhY2UoL1tBLVpdL2csKGU9PiJfIi5jb25jYXQoZS50b0xvd2VyQ2FzZSgpKSkpPT09ZSkpKSkpdGhyb3cgbmV3IGMoIkpTLUFVVEhfSEVMUEVSLVJFRS1ORjAxIiwiUmVxdWlyZWQgZW5kcG9pbnRzIG1pc3NpbmciLCJTb21lIG9yIGFsbCBvZiB0aGUgcmVxdWlyZWQgZW5kcG9pbnRzIGFyZSBtaXNzaW5nIGluIHRoZSBvYmplY3QgcGFzc2VkIHRvIHRoZSBgZW5kcG9pbnRzYCBhdHRyaWJ1dGUgb2YgdGhlYEF1dGhDb25maWdgIG9iamVjdC4iKTtyZXR1cm4gdC5lbmRwb2ludHMmJk9iamVjdC5rZXlzKHQuZW5kcG9pbnRzKS5mb3JFYWNoKChuPT57Y29uc3Qgcj1uLnJlcGxhY2UoL1tBLVpdL2csKGU9PiJfIi5jb25jYXQoZS50b0xvd2VyQ2FzZSgpKSkpO2Vbcl09KG51bGw9PXQ/dm9pZCAwOnQuZW5kcG9pbnRzKT90LmVuZHBvaW50c1tuXToiIn0pKSxPYmplY3QuYXNzaWduKHt9LGUpfSkpfXJlc29sdmVFbmRwb2ludHNCeUJhc2VVUkwoKXtyZXR1cm4gdCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2NvbnN0IGU9e30sdD15aWVsZCB0aGlzLl9jb25maWcoKSxuPXQuYmFzZVVybDtpZighbil0aHJvdyBuZXcgYygiSlMtQVVUSF9IRUxQRVJfUkVCTy1ORjAxIiwiQmFzZSBVUkwgbm90IGRlZmluZWQuIiwiQmFzZSBVUkwgaXMgbm90IGRlZmluZWQgaW4gQXV0aENsaWVudCBjb25maWcuIik7dC5lbmRwb2ludHMmJk9iamVjdC5rZXlzKHQuZW5kcG9pbnRzKS5mb3JFYWNoKChuPT57Y29uc3Qgcj1uLnJlcGxhY2UoL1tBLVpdL2csKGU9PiJfIi5jb25jYXQoZS50b0xvd2VyQ2FzZSgpKSkpO2Vbcl09KG51bGw9PXQ/dm9pZCAwOnQuZW5kcG9pbnRzKT90LmVuZHBvaW50c1tuXToiIn0pKTtjb25zdCByPXthdXRob3JpemF0aW9uX2VuZHBvaW50OiIiLmNvbmNhdChuKS5jb25jYXQoIi9vYXV0aDIvYXV0aG9yaXplIiksZW5kX3Nlc3Npb25fZW5kcG9pbnQ6IiIuY29uY2F0KG4pLmNvbmNhdCgiL29pZGMvbG9nb3V0IiksaXNzdWVyOiIiLmNvbmNhdChuKS5jb25jYXQoIi9vYXV0aDIvdG9rZW4iKSxqd2tzX3VyaToiIi5jb25jYXQobikuY29uY2F0KCIvb2F1dGgyL2p3a3MiKSxjaGVja19zZXNzaW9uX2lmcmFtZToiIi5jb25jYXQobikuY29uY2F0KCIvb2lkYy9jaGVja3Nlc3Npb24iKSxyZXZvY2F0aW9uX2VuZHBvaW50OiIiLmNvbmNhdChuKS5jb25jYXQoIi9vYXV0aDIvcmV2b2tlIiksdG9rZW5fZW5kcG9pbnQ6IiIuY29uY2F0KG4pLmNvbmNhdCgiL29hdXRoMi90b2tlbiIpLHVzZXJpbmZvX2VuZHBvaW50OiIiLmNvbmNhdChuKS5jb25jYXQoIi9vYXV0aDIvdXNlcmluZm8iKX07cmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxyKSxlKX0pKX12YWxpZGF0ZUlkVG9rZW4oZSl7cmV0dXJuIHQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtjb25zdCB0PSh5aWVsZCB0aGlzLl9kYXRhTGF5ZXIuZ2V0T0lEQ1Byb3ZpZGVyTWV0YURhdGEoKSkuandrc191cmksbj15aWVsZCB0aGlzLl9jb25maWcoKTtpZighdHx8MD09PXQudHJpbSgpLmxlbmd0aCl0aHJvdyBuZXcgYygiSlNfQVVUSF9IRUxQRVItVklULU5GMDEiLCJKV0tTIGVuZHBvaW50IG5vdCBmb3VuZC4iLCJObyBKV0tTIGVuZHBvaW50IHdhcyBmb3VuZCBpbiB0aGUgT0lEQyBwcm92aWRlciBtZXRhIGRhdGEgcmV0dXJuZWQgYnkgdGhlIHdlbGwta25vd24gZW5kcG9pbnQgb3IgdGhlIEpXS1MgZW5kcG9pbnQgcGFzc2VkIHRvIHRoZSBTREsgaXMgZW1wdHkuIik7bGV0IHI7dHJ5e3I9eWllbGQgZmV0Y2godCx7Y3JlZGVudGlhbHM6bi5zZW5kQ29va2llc0luUmVxdWVzdHM/YS5JbmNsdWRlOmEuU2FtZU9yaWdpbn0pfWNhdGNoKHQpe3Rocm93IG5ldyBjKCJKUy1BVVRIX0hFTFBFUi1WSVQtTkUwMiIsIlJlcXVlc3QgdG8gandrcyBlbmRwb2ludCBmYWlsZWQuIixudWxsIT10P3Q6IlRoZSByZXF1ZXN0IHNlbnQgdG8gZ2V0IHRoZSBqd2tzIGZyb20gdGhlIHNlcnZlciBmYWlsZWQuIil9aWYoMjAwIT09ci5zdGF0dXN8fCFyLm9rKXRocm93IG5ldyBjKCJKUy1BVVRIX0hFTFBFUi1WSVQtSEUwMyIsIkludmFsaWQgcmVzcG9uc2Ugc3RhdHVzIHJlY2VpdmVkIGZvciBqd2tzIHJlcXVlc3QgKCIuY29uY2F0KHIuc3RhdHVzVGV4dCwiKS4iKSx5aWVsZCByLmpzb24oKSk7Y29uc3QgaT0oeWllbGQgdGhpcy5fb2lkY1Byb3ZpZGVyTWV0YURhdGEoKSkuaXNzdWVyLHtrZXlzOm99PXlpZWxkIHIuanNvbigpLHM9eWllbGQgdGhpcy5fY3J5cHRvSGVscGVyLmdldEpXS0ZvclRoZUlkVG9rZW4oZS5zcGxpdCgiLiIpWzBdLG8pO3JldHVybiB0aGlzLl9jcnlwdG9IZWxwZXIuaXNWYWxpZElkVG9rZW4oZSxzLCh5aWVsZCB0aGlzLl9jb25maWcoKSkuY2xpZW50SUQsbnVsbCE9aT9pOiIiLHRoaXMuX2NyeXB0b0hlbHBlci5kZWNvZGVJRFRva2VuKGUpLnN1YiwoeWllbGQgdGhpcy5fY29uZmlnKCkpLmNsb2NrVG9sZXJhbmNlKX0pKX1nZXRBdXRoZW50aWNhdGVkVXNlckluZm8oZSl7dmFyIHQsbixyLGk7Y29uc3Qgbz10aGlzLl9jcnlwdG9IZWxwZXIuZGVjb2RlSURUb2tlbihlKSxzPXUuZ2V0VGVuYW50RG9tYWluRnJvbUlkVG9rZW5QYXlsb2FkKG8pLGE9bnVsbCE9PSh0PW51bGw9PW8/dm9pZCAwOm8udXNlcm5hbWUpJiZ2b2lkIDAhPT10P3Q6IiIsYz1udWxsIT09KG49by5naXZlbl9uYW1lKSYmdm9pZCAwIT09bj9uOiIiLGw9bnVsbCE9PShyPW8uZmFtaWx5X25hbWUpJiZ2b2lkIDAhPT1yP3I6IiIsZD1jJiZsPyIiLmNvbmNhdChjLCIgIikuY29uY2F0KGwpOmN8fGx8fCIiLGg9bnVsbCE9PShpPW8ucHJlZmVycmVkX3VzZXJuYW1lKSYmdm9pZCAwIT09aT9pOmQ7cmV0dXJuIE9iamVjdC5hc3NpZ24oe2Rpc3BsYXlOYW1lOmgsdGVuYW50RG9tYWluOnMsdXNlcm5hbWU6YX0sdS5maWx0ZXJDbGFpbXNGcm9tSURUb2tlblBheWxvYWQobykpfXJlcGxhY2VDdXN0b21HcmFudFRlbXBsYXRlVGFncyhlLG4pe3ZhciByO3JldHVybiB0KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7bGV0IHQ9Im9wZW5pZCI7Y29uc3QgaT15aWVsZCB0aGlzLl9jb25maWcoKSxvPXlpZWxkIHRoaXMuX2RhdGFMYXllci5nZXRTZXNzaW9uRGF0YShuKTtyZXR1cm4gaS5zY29wZSYmaS5zY29wZS5sZW5ndGg+MCYmKGkuc2NvcGUuaW5jbHVkZXMoIm9wZW5pZCIpfHxpLnNjb3BlLnB1c2goIm9wZW5pZCIpLHQ9aS5zY29wZS5qb2luKCIgIikpLGUucmVwbGFjZSgie3t0b2tlbn19IixvLmFjY2Vzc190b2tlbikucmVwbGFjZSgie3t1c2VybmFtZX19Iix0aGlzLmdldEF1dGhlbnRpY2F0ZWRVc2VySW5mbyhvLmlkX3Rva2VuKS51c2VybmFtZSkucmVwbGFjZSgie3tzY29wZX19Iix0KS5yZXBsYWNlKCJ7e2NsaWVudElEfX0iLGkuY2xpZW50SUQpLnJlcGxhY2UoInt7Y2xpZW50U2VjcmV0fX0iLG51bGwhPT0ocj1pLmNsaWVudFNlY3JldCkmJnZvaWQgMCE9PXI/cjoiIil9KSl9Y2xlYXJVc2VyU2Vzc2lvbkRhdGEoZSl7cmV0dXJuIHQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXt5aWVsZCB0aGlzLl9kYXRhTGF5ZXIucmVtb3ZlVGVtcG9yYXJ5RGF0YShlKSx5aWVsZCB0aGlzLl9kYXRhTGF5ZXIucmVtb3ZlU2Vzc2lvbkRhdGEoZSl9KSl9aGFuZGxlVG9rZW5SZXNwb25zZShlLG4pe3JldHVybiB0KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7aWYoMjAwIT09ZS5zdGF0dXN8fCFlLm9rKXRocm93IG5ldyBjKCJKUy1BVVRIX0hFTFBFUi1IVFItTkUwMSIsIkludmFsaWQgcmVzcG9uc2Ugc3RhdHVzIHJlY2VpdmVkIGZvciB0b2tlbiByZXF1ZXN0ICgiLmNvbmNhdChlLnN0YXR1c1RleHQsIikuIikseWllbGQgZS5qc29uKCkpO2NvbnN0IHI9eWllbGQgZS5qc29uKCk7aWYoci5jcmVhdGVkX2F0PShuZXcgRGF0ZSkuZ2V0VGltZSgpLCh5aWVsZCB0aGlzLl9jb25maWcoKSkudmFsaWRhdGVJRFRva2VuKXJldHVybiB0aGlzLnZhbGlkYXRlSWRUb2tlbihyLmlkX3Rva2VuKS50aGVuKCgoKT0+dCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3lpZWxkIHRoaXMuX2RhdGFMYXllci5zZXRTZXNzaW9uRGF0YShyLG4pO2NvbnN0IGU9e2FjY2Vzc1Rva2VuOnIuYWNjZXNzX3Rva2VuLGNyZWF0ZWRBdDpyLmNyZWF0ZWRfYXQsZXhwaXJlc0luOnIuZXhwaXJlc19pbixpZFRva2VuOnIuaWRfdG9rZW4scmVmcmVzaFRva2VuOnIucmVmcmVzaF90b2tlbixzY29wZTpyLnNjb3BlLHRva2VuVHlwZTpyLnRva2VuX3R5cGV9O3JldHVybiBQcm9taXNlLnJlc29sdmUoZSl9KSkpKTt7Y29uc3QgZT17YWNjZXNzVG9rZW46ci5hY2Nlc3NfdG9rZW4sY3JlYXRlZEF0OnIuY3JlYXRlZF9hdCxleHBpcmVzSW46ci5leHBpcmVzX2luLGlkVG9rZW46ci5pZF90b2tlbixyZWZyZXNoVG9rZW46ci5yZWZyZXNoX3Rva2VuLHNjb3BlOnIuc2NvcGUsdG9rZW5UeXBlOnIudG9rZW5fdHlwZX07cmV0dXJuIHlpZWxkIHRoaXMuX2RhdGFMYXllci5zZXRTZXNzaW9uRGF0YShyLG4pLFByb21pc2UucmVzb2x2ZShlKX19KSl9Z2VuZXJhdGVQS0NFS2V5KGUpe3ZhciBuO3JldHVybiB0KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7Y29uc3QgdD15aWVsZCB0aGlzLl9kYXRhTGF5ZXIuZ2V0VGVtcG9yYXJ5RGF0YShlKSxyPVtdO09iamVjdC5rZXlzKHQpLmZvckVhY2goKGU9PntlLnN0YXJ0c1dpdGgoInBrY2VfY29kZV92ZXJpZmllciIpJiZyLnB1c2goZSl9KSk7Y29uc3QgaT1yLnNvcnQoKS5wb3AoKTtyZXR1cm4icGtjZV9jb2RlX3ZlcmlmaWVyIyIuY29uY2F0KHBhcnNlSW50KG51bGwhPT0obj1udWxsPT1pP3ZvaWQgMDppLnNwbGl0KCIjIilbMV0pJiZ2b2lkIDAhPT1uP246Ii0xIikrMSl9KSl9fWNsYXNzIGR7Y29uc3RydWN0b3IoZSl7dGhpcy5fY3J5cHRvVXRpbHM9ZX1nZXRDb2RlVmVyaWZpZXIoKXtyZXR1cm4gdGhpcy5fY3J5cHRvVXRpbHMuYmFzZTY0VVJMRW5jb2RlKHRoaXMuX2NyeXB0b1V0aWxzLmdlbmVyYXRlUmFuZG9tQnl0ZXMoMzIpKX1nZXRDb2RlQ2hhbGxlbmdlKGUpe3JldHVybiB0aGlzLl9jcnlwdG9VdGlscy5iYXNlNjRVUkxFbmNvZGUodGhpcy5fY3J5cHRvVXRpbHMuaGFzaFNoYTI1NihlKSl9Z2V0SldLRm9yVGhlSWRUb2tlbihlLHQpe2NvbnN0IG49SlNPTi5wYXJzZSh0aGlzLl9jcnlwdG9VdGlscy5iYXNlNjRVUkxEZWNvZGUoZSkpO2Zvcihjb25zdCBlIG9mIHQpaWYobi5raWQ9PT1lLmtpZClyZXR1cm4gZTt0aHJvdyBuZXcgYygiSlMtQ1JZUFRPX1VUSUwtR0pGVElULUlWMDEiLCJraWQgbm90IGZvdW5kLiIsIkZhaWxlZCB0byBmaW5kIHRoZSAna2lkJyBzcGVjaWZpZWQgaW4gdGhlIGlkX3Rva2VuLiAna2lkJyBmb3VuZCBpbiB0aGUgaGVhZGVyIDogIituLmtpZCsiLCBFeHBlY3RlZCB2YWx1ZXM6ICIrdC5tYXAoKGU9PmUua2lkKSkuam9pbigiLCAiKSl9aXNWYWxpZElkVG9rZW4oZSx0LG4scixpLHMpe3JldHVybiB0aGlzLl9jcnlwdG9VdGlscy52ZXJpZnlKd3QoZSx0LG8sbixyLGkscykudGhlbigoZT0+ZT9Qcm9taXNlLnJlc29sdmUoITApOlByb21pc2UucmVqZWN0KG5ldyBjKCJKUy1DUllQVE9fSEVMUEVSLUlWSVQtSVYwMSIsIkludmFsaWQgSUQgdG9rZW4uIiwiSUQgdG9rZW4gdmFsaWRhdGlvbiByZXR1cm5lZCBmYWxzZSIpKSkpfWRlY29kZUlEVG9rZW4oZSl7dHJ5e2NvbnN0IHQ9dGhpcy5fY3J5cHRvVXRpbHMuYmFzZTY0VVJMRGVjb2RlKGUuc3BsaXQoIi4iKVsxXSk7cmV0dXJuIEpTT04ucGFyc2UodCl9Y2F0Y2goZSl7dGhyb3cgbmV3IGMoIkpTLUNSWVBUT19VVElMLURJVC1JVjAxIiwiRGVjb2RpbmcgSUQgdG9rZW4gZmFpbGVkLiIsZSl9fX1jbGFzcyBoe2NvbnN0cnVjdG9yKGUsbil7dGhpcy5fY3J5cHRvVXRpbHM9bix0aGlzLl9jcnlwdG9IZWxwZXI9bmV3IGQobiksdGhpcy5fYXV0aGVudGljYXRpb25IZWxwZXI9bmV3IGwoZSx0aGlzLl9jcnlwdG9IZWxwZXIpLHRoaXMuX2RhdGFMYXllcj1lLHRoaXMuX2NvbmZpZz0oKT0+dCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3JldHVybiB5aWVsZCB0aGlzLl9kYXRhTGF5ZXIuZ2V0Q29uZmlnRGF0YSgpfSkpLHRoaXMuX29pZGNQcm92aWRlck1ldGFEYXRhPSgpPT50KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7cmV0dXJuIHlpZWxkIHRoaXMuX2RhdGFMYXllci5nZXRPSURDUHJvdmlkZXJNZXRhRGF0YSgpfSkpfWdldEF1dGhvcml6YXRpb25VUkwoZSxuKXt2YXIgcixpLG87cmV0dXJuIHQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtjb25zdCB0PXlpZWxkIHRoaXMuX2RhdGFMYXllci5nZXRPSURDUHJvdmlkZXJNZXRhRGF0YVBhcmFtZXRlcigiYXV0aG9yaXphdGlvbl9lbmRwb2ludCIpLHM9eWllbGQgdGhpcy5fY29uZmlnKCk7aWYoIXR8fDA9PT10LnRyaW0oKS5sZW5ndGgpdGhyb3cgbmV3IGMoIkpTLUFVVEhfQ09SRS1HQVUtTkYwMSIsIk5vIGF1dGhvcml6YXRpb24gZW5kcG9pbnQgZm91bmQuIiwiTm8gYXV0aG9yaXphdGlvbiBlbmRwb2ludCB3YXMgZm91bmQgaW4gdGhlIE9JREMgcHJvdmlkZXIgbWV0YSBkYXRhIGZyb20gdGhlIHdlbGwta25vd24gZW5kcG9pbnQgb3IgdGhlIGF1dGhvcml6YXRpb24gZW5kcG9pbnQgcGFzc2VkIHRvIHRoZSBTREsgaXMgZW1wdHkuIik7Y29uc3QgYT1uZXcgVVJMKHQpLGw9bmV3IE1hcDtsLnNldCgicmVzcG9uc2VfdHlwZSIsImNvZGUiKSxsLnNldCgiY2xpZW50X2lkIixzLmNsaWVudElEKTtsZXQgZD0ib3BlbmlkIjtzLnNjb3BlJiZzLnNjb3BlLmxlbmd0aD4wJiYocy5zY29wZS5pbmNsdWRlcygib3BlbmlkIil8fHMuc2NvcGUucHVzaCgib3BlbmlkIiksZD1zLnNjb3BlLmpvaW4oIiAiKSksbC5zZXQoInNjb3BlIixkKSxsLnNldCgicmVkaXJlY3RfdXJpIixzLnNpZ25JblJlZGlyZWN0VVJMKSxzLnJlc3BvbnNlTW9kZSYmbC5zZXQoInJlc3BvbnNlX21vZGUiLHMucmVzcG9uc2VNb2RlKTtjb25zdCBoPXlpZWxkIHRoaXMuX2F1dGhlbnRpY2F0aW9uSGVscGVyLmdlbmVyYXRlUEtDRUtleShuKTtpZihzLmVuYWJsZVBLQ0Upe2NvbnN0IGU9bnVsbD09PShyPXRoaXMuX2NyeXB0b0hlbHBlcil8fHZvaWQgMD09PXI/dm9pZCAwOnIuZ2V0Q29kZVZlcmlmaWVyKCksdD1udWxsPT09KGk9dGhpcy5fY3J5cHRvSGVscGVyKXx8dm9pZCAwPT09aT92b2lkIDA6aS5nZXRDb2RlQ2hhbGxlbmdlKGUpO3lpZWxkIHRoaXMuX2RhdGFMYXllci5zZXRUZW1wb3JhcnlEYXRhUGFyYW1ldGVyKGgsZSxuKSxsLnNldCgiY29kZV9jaGFsbGVuZ2VfbWV0aG9kIiwiUzI1NiIpLGwuc2V0KCJjb2RlX2NoYWxsZW5nZSIsdCl9cy5wcm9tcHQmJmwuc2V0KCJwcm9tcHQiLHMucHJvbXB0KTtjb25zdCBmPWU7aWYoZilmb3IoY29uc3RbZSx0XW9mIE9iamVjdC5lbnRyaWVzKGYpKWlmKCIiIT1lJiYiIiE9dCYmInN0YXRlIiE9PWUpe2NvbnN0IG49ZS5yZXBsYWNlKC9bQS1aXS9nLChlPT4iXyIuY29uY2F0KGUudG9Mb3dlckNhc2UoKSkpKTtsLnNldChuLHQudG9TdHJpbmcoKSl9bC5zZXQoInN0YXRlIix1LmdlbmVyYXRlU3RhdGVQYXJhbUZvclJlcXVlc3RDb3JyZWxhdGlvbihoLGY/bnVsbD09PShvPWYuc3RhdGUpfHx2b2lkIDA9PT1vP3ZvaWQgMDpvLnRvU3RyaW5nKCk6IiIpKTtmb3IoY29uc3RbZSx0XW9mIGwuZW50cmllcygpKWEuc2VhcmNoUGFyYW1zLmFwcGVuZChlLHQpO3JldHVybiBhLnRvU3RyaW5nKCl9KSl9cmVxdWVzdEFjY2Vzc1Rva2VuKGUsbixyLGkpe3JldHVybiB0KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7Y29uc3QgdD0oeWllbGQgdGhpcy5fb2lkY1Byb3ZpZGVyTWV0YURhdGEoKSkudG9rZW5fZW5kcG9pbnQsbz15aWVsZCB0aGlzLl9jb25maWcoKTtpZighdHx8MD09PXQudHJpbSgpLmxlbmd0aCl0aHJvdyBuZXcgYygiSlMtQVVUSF9DT1JFLVJBVDEtTkYwMSIsIlRva2VuIGVuZHBvaW50IG5vdCBmb3VuZC4iLCJObyB0b2tlbiBlbmRwb2ludCB3YXMgZm91bmQgaW4gdGhlIE9JREMgcHJvdmlkZXIgbWV0YSBkYXRhIHJldHVybmVkIGJ5IHRoZSB3ZWxsLWtub3duIGVuZHBvaW50IG9yIHRoZSB0b2tlbiBlbmRwb2ludCBwYXNzZWQgdG8gdGhlIFNESyBpcyBlbXB0eS4iKTtuJiYoeWllbGQgdGhpcy5fZGF0YUxheWVyLnNldFNlc3Npb25EYXRhUGFyYW1ldGVyKCJzZXNzaW9uX3N0YXRlIixuLGkpKTtjb25zdCBzPVtdO3MucHVzaCgiY2xpZW50X2lkPSIuY29uY2F0KG8uY2xpZW50SUQpKSxvLmNsaWVudFNlY3JldCYmby5jbGllbnRTZWNyZXQudHJpbSgpLmxlbmd0aD4wJiZzLnB1c2goImNsaWVudF9zZWNyZXQ9Ii5jb25jYXQoby5jbGllbnRTZWNyZXQpKTtjb25zdCBsPWU7bGV0IGQ7cy5wdXNoKCJjb2RlPSIuY29uY2F0KGwpKSxzLnB1c2goImdyYW50X3R5cGU9YXV0aG9yaXphdGlvbl9jb2RlIikscy5wdXNoKCJyZWRpcmVjdF91cmk9Ii5jb25jYXQoby5zaWduSW5SZWRpcmVjdFVSTCkpLG8uZW5hYmxlUEtDRSYmKHMucHVzaCgiY29kZV92ZXJpZmllcj0iLmNvbmNhdCh5aWVsZCB0aGlzLl9kYXRhTGF5ZXIuZ2V0VGVtcG9yYXJ5RGF0YVBhcmFtZXRlcih1LmV4dHJhY3RQS0NFS2V5RnJvbVN0YXRlUGFyYW0ociksaSkpKSx5aWVsZCB0aGlzLl9kYXRhTGF5ZXIucmVtb3ZlVGVtcG9yYXJ5RGF0YVBhcmFtZXRlcih1LmV4dHJhY3RQS0NFS2V5RnJvbVN0YXRlUGFyYW0ociksaSkpO3RyeXtkPXlpZWxkIGZldGNoKHQse2JvZHk6cy5qb2luKCImIiksY3JlZGVudGlhbHM6by5zZW5kQ29va2llc0luUmVxdWVzdHM/YS5JbmNsdWRlOmEuU2FtZU9yaWdpbixoZWFkZXJzOm5ldyBIZWFkZXJzKHUuZ2V0VG9rZW5SZXF1ZXN0SGVhZGVycygpKSxtZXRob2Q6IlBPU1QifSl9Y2F0Y2godCl7dGhyb3cgbmV3IGMoIkpTLUFVVEhfQ09SRS1SQVQxLU5FMDIiLCJSZXF1ZXN0aW5nIGFjY2VzcyB0b2tlbiBmYWlsZWQiLG51bGwhPXQ/dDoiVGhlIHJlcXVlc3QgdG8gZ2V0IHRoZSBhY2Nlc3MgdG9rZW4gZnJvbSB0aGUgc2VydmVyIGZhaWxlZC4iKX1pZighZC5vayl0aHJvdyBuZXcgYygiSlMtQVVUSF9DT1JFLVJBVDEtSEUwMyIsIlJlcXVlc3RpbmcgYWNjZXNzIHRva2VuIGZhaWxlZCB3aXRoICIuY29uY2F0KGQuc3RhdHVzVGV4dCkseWllbGQgZC5qc29uKCkpO3JldHVybiB5aWVsZCB0aGlzLl9hdXRoZW50aWNhdGlvbkhlbHBlci5oYW5kbGVUb2tlblJlc3BvbnNlKGQsaSl9KSl9cmVmcmVzaEFjY2Vzc1Rva2VuKGUpe3JldHVybiB0KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7Y29uc3QgdD0oeWllbGQgdGhpcy5fb2lkY1Byb3ZpZGVyTWV0YURhdGEoKSkudG9rZW5fZW5kcG9pbnQsbj15aWVsZCB0aGlzLl9jb25maWcoKSxyPXlpZWxkIHRoaXMuX2RhdGFMYXllci5nZXRTZXNzaW9uRGF0YShlKTtpZighci5yZWZyZXNoX3Rva2VuKXRocm93IG5ldyBjKCJKUy1BVVRIX0NPUkUtUkFUMi1ORjAxIiwiTm8gcmVmcmVzaCB0b2tlbiBmb3VuZC4iLCJUaGVyZSB3YXMgbm8gcmVmcmVzaCB0b2tlbiBmb3VuZC4gQXNnYXJkZW8gZG9lc24ndCByZXR1cm4gYSByZWZyZXNoIHRva2VuIGlmIHRoZSByZWZyZXNoIHRva2VuIGdyYW50IGlzIG5vdCBlbmFibGVkLiIpO2lmKCF0fHwwPT09dC50cmltKCkubGVuZ3RoKXRocm93IG5ldyBjKCJKUy1BVVRIX0NPUkUtUkFUMi1ORjAyIiwiTm8gcmVmcmVzaCB0b2tlbiBlbmRwb2ludCBmb3VuZC4iLCJObyByZWZyZXNoIHRva2VuIGVuZHBvaW50IHdhcyBpbiB0aGUgT0lEQyBwcm92aWRlciBtZXRhIGRhdGEgcmV0dXJuZWQgYnkgdGhlIHdlbGwta25vd24gZW5kcG9pbnQgb3IgdGhlIHJlZnJlc2ggdG9rZW4gZW5kcG9pbnQgcGFzc2VkIHRvIHRoZSBTREsgaXMgZW1wdHkuIik7Y29uc3QgaT1bXTtsZXQgbztpLnB1c2goImNsaWVudF9pZD0iLmNvbmNhdChuLmNsaWVudElEKSksaS5wdXNoKCJyZWZyZXNoX3Rva2VuPSIuY29uY2F0KHIucmVmcmVzaF90b2tlbikpLGkucHVzaCgiZ3JhbnRfdHlwZT1yZWZyZXNoX3Rva2VuIiksbi5jbGllbnRTZWNyZXQmJm4uY2xpZW50U2VjcmV0LnRyaW0oKS5sZW5ndGg+MCYmaS5wdXNoKCJjbGllbnRfc2VjcmV0PSIuY29uY2F0KG4uY2xpZW50U2VjcmV0KSk7dHJ5e289eWllbGQgZmV0Y2godCx7Ym9keTppLmpvaW4oIiYiKSxjcmVkZW50aWFsczpuLnNlbmRDb29raWVzSW5SZXF1ZXN0cz9hLkluY2x1ZGU6YS5TYW1lT3JpZ2luLGhlYWRlcnM6bmV3IEhlYWRlcnModS5nZXRUb2tlblJlcXVlc3RIZWFkZXJzKCkpLG1ldGhvZDoiUE9TVCJ9KX1jYXRjaCh0KXt0aHJvdyBuZXcgYygiSlMtQVVUSF9DT1JFLVJBVDItTlIwMyIsIlJlZnJlc2ggYWNjZXNzIHRva2VuIHJlcXVlc3QgZmFpbGVkLiIsbnVsbCE9dD90OiJUaGUgcmVxdWVzdCB0byByZWZyZXNoIHRoZSBhY2Nlc3MgdG9rZW4gZmFpbGVkLiIpfWlmKCFvLm9rKXRocm93IG5ldyBjKCJKUy1BVVRIX0NPUkUtUkFUMi1IRTA0IiwiUmVmcmVzaGluZyBhY2Nlc3MgdG9rZW4gZmFpbGVkIHdpdGggIi5jb25jYXQoby5zdGF0dXNUZXh0KSx5aWVsZCBvLmpzb24oKSk7cmV0dXJuIHRoaXMuX2F1dGhlbnRpY2F0aW9uSGVscGVyLmhhbmRsZVRva2VuUmVzcG9uc2UobyxlKX0pKX1yZXZva2VBY2Nlc3NUb2tlbihlKXtyZXR1cm4gdCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2NvbnN0IHQ9KHlpZWxkIHRoaXMuX29pZGNQcm92aWRlck1ldGFEYXRhKCkpLnJldm9jYXRpb25fZW5kcG9pbnQsbj15aWVsZCB0aGlzLl9jb25maWcoKTtpZighdHx8MD09PXQudHJpbSgpLmxlbmd0aCl0aHJvdyBuZXcgYygiSlMtQVVUSF9DT1JFLVJBVDMtTkYwMSIsIk5vIHJldm9rZSBhY2Nlc3MgdG9rZW4gZW5kcG9pbnQgZm91bmQuIiwiTm8gcmV2b2tlIGFjY2VzcyB0b2tlbiBlbmRwb2ludCB3YXMgZm91bmQgaW4gdGhlIE9JREMgcHJvdmlkZXIgbWV0YSBkYXRhIHJldHVybmVkIGJ5IHRoZSB3ZWxsLWtub3duIGVuZHBvaW50IG9yIHRoZSByZXZva2UgYWNjZXNzIHRva2VuIGVuZHBvaW50IHBhc3NlZCB0byB0aGUgU0RLIGlzIGVtcHR5LiIpO2NvbnN0IHI9W107bGV0IGk7ci5wdXNoKCJjbGllbnRfaWQ9Ii5jb25jYXQobi5jbGllbnRJRCkpLHIucHVzaCgidG9rZW49Ii5jb25jYXQoKHlpZWxkIHRoaXMuX2RhdGFMYXllci5nZXRTZXNzaW9uRGF0YShlKSkuYWNjZXNzX3Rva2VuKSksci5wdXNoKCJ0b2tlbl90eXBlX2hpbnQ9YWNjZXNzX3Rva2VuIik7dHJ5e2k9eWllbGQgZmV0Y2godCx7Ym9keTpyLmpvaW4oIiYiKSxjcmVkZW50aWFsczpuLnNlbmRDb29raWVzSW5SZXF1ZXN0cz9hLkluY2x1ZGU6YS5TYW1lT3JpZ2luLGhlYWRlcnM6bmV3IEhlYWRlcnModS5nZXRUb2tlblJlcXVlc3RIZWFkZXJzKCkpLG1ldGhvZDoiUE9TVCJ9KX1jYXRjaCh0KXt0aHJvdyBuZXcgYygiSlMtQVVUSF9DT1JFLVJBVDMtTkUwMiIsIlRoZSByZXF1ZXN0IHRvIHJldm9rZSBhY2Nlc3MgdG9rZW4gZmFpbGVkLiIsbnVsbCE9dD90OiJUaGUgcmVxdWVzdCBzZW50IHRvIHJldm9rZSB0aGUgYWNjZXNzIHRva2VuIGZhaWxlZC4iKX1pZigyMDAhPT1pLnN0YXR1c3x8IWkub2spdGhyb3cgbmV3IGMoIkpTLUFVVEhfQ09SRS1SQVQzLUhFMDMiLCJJbnZhbGlkIHJlc3BvbnNlIHN0YXR1cyByZWNlaXZlZCBmb3IgcmV2b2tlIGFjY2VzcyB0b2tlbiByZXF1ZXN0ICgiLmNvbmNhdChpLnN0YXR1c1RleHQsIikuIikseWllbGQgaS5qc29uKCkpO3JldHVybiB0aGlzLl9hdXRoZW50aWNhdGlvbkhlbHBlci5jbGVhclVzZXJTZXNzaW9uRGF0YShlKSxQcm9taXNlLnJlc29sdmUoaSl9KSl9cmVxdWVzdEN1c3RvbUdyYW50KGUsbil7cmV0dXJuIHQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtjb25zdCByPXlpZWxkIHRoaXMuX29pZGNQcm92aWRlck1ldGFEYXRhKCksaT15aWVsZCB0aGlzLl9jb25maWcoKTtsZXQgbztpZihvPWUudG9rZW5FbmRwb2ludCYmMCE9PWUudG9rZW5FbmRwb2ludC50cmltKCkubGVuZ3RoP2UudG9rZW5FbmRwb2ludDpyLnRva2VuX2VuZHBvaW50LCFvfHwwPT09by50cmltKCkubGVuZ3RoKXRocm93IG5ldyBjKCJKUy1BVVRIX0NPUkUtUkNHLU5GMDEiLCJUb2tlbiBlbmRwb2ludCBub3QgZm91bmQuIiwiTm8gdG9rZW4gZW5kcG9pbnQgd2FzIGZvdW5kIGluIHRoZSBPSURDIHByb3ZpZGVyIG1ldGEgZGF0YSByZXR1cm5lZCBieSB0aGUgd2VsbC1rbm93biBlbmRwb2ludCBvciB0aGUgdG9rZW4gZW5kcG9pbnQgcGFzc2VkIHRvIHRoZSBTREsgaXMgZW1wdHkuIik7Y29uc3Qgcz15aWVsZCBQcm9taXNlLmFsbChPYmplY3QuZW50cmllcyhlLmRhdGEpLm1hcCgoZT0+e2xldFtyLGldPWU7cmV0dXJuIHQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtjb25zdCBlPXlpZWxkIHRoaXMuX2F1dGhlbnRpY2F0aW9uSGVscGVyLnJlcGxhY2VDdXN0b21HcmFudFRlbXBsYXRlVGFncyhpLG4pO3JldHVybiIiLmNvbmNhdChyLCI9IikuY29uY2F0KGUpfSkpfSkpKTtsZXQgbD1PYmplY3QuYXNzaWduKHt9LHUuZ2V0VG9rZW5SZXF1ZXN0SGVhZGVycygpKTtlLmF0dGFjaFRva2VuJiYobD1PYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sbCkse0F1dGhvcml6YXRpb246IkJlYXJlciAiLmNvbmNhdCgoeWllbGQgdGhpcy5fZGF0YUxheWVyLmdldFNlc3Npb25EYXRhKG4pKS5hY2Nlc3NfdG9rZW4pfSkpO2NvbnN0IGQ9e2JvZHk6cy5qb2luKCImIiksY3JlZGVudGlhbHM6aS5zZW5kQ29va2llc0luUmVxdWVzdHM/YS5JbmNsdWRlOmEuU2FtZU9yaWdpbixoZWFkZXJzOm5ldyBIZWFkZXJzKGwpLG1ldGhvZDoiUE9TVCJ9O2xldCBoO3RyeXtoPXlpZWxkIGZldGNoKG8sZCl9Y2F0Y2goZSl7dGhyb3cgbmV3IGMoIkpTLUFVVEhfQ09SRS1SQ0ctTkUwMiIsIlRoZSBjdXN0b20gZ3JhbnQgcmVxdWVzdCBmYWlsZWQuIixudWxsIT1lP2U6IlRoZSByZXF1ZXN0IHNlbnQgdG8gZ2V0IHRoZSBjdXN0b20gZ3JhbnQgZmFpbGVkLiIpfWlmKDIwMCE9PWguc3RhdHVzfHwhaC5vayl0aHJvdyBuZXcgYygiSlMtQVVUSF9DT1JFLVJDRy1IRTAzIiwiSW52YWxpZCByZXNwb25zZSBzdGF0dXMgcmVjZWl2ZWQgZm9yIHRoZSBjdXN0b20gZ3JhbnQgcmVxdWVzdC4gKCIuY29uY2F0KGguc3RhdHVzVGV4dCwiKSIpLHlpZWxkIGguanNvbigpKTtyZXR1cm4gZS5yZXR1cm5zU2Vzc2lvbj90aGlzLl9hdXRoZW50aWNhdGlvbkhlbHBlci5oYW5kbGVUb2tlblJlc3BvbnNlKGgsbik6UHJvbWlzZS5yZXNvbHZlKHlpZWxkIGguanNvbigpKX0pKX1nZXRCYXNpY1VzZXJJbmZvKGUpe3JldHVybiB0KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7Y29uc3QgdD15aWVsZCB0aGlzLl9kYXRhTGF5ZXIuZ2V0U2Vzc2lvbkRhdGEoZSksbj10aGlzLl9hdXRoZW50aWNhdGlvbkhlbHBlci5nZXRBdXRoZW50aWNhdGVkVXNlckluZm8obnVsbD09dD92b2lkIDA6dC5pZF90b2tlbik7bGV0IHI9e2FsbG93ZWRTY29wZXM6dC5zY29wZSxzZXNzaW9uU3RhdGU6dC5zZXNzaW9uX3N0YXRlfTtyZXR1cm4gT2JqZWN0LmtleXMobikuZm9yRWFjaCgoZT0+e3ZvaWQgMCE9PW5bZV0mJiIiIT09bltlXSYmbnVsbCE9PW5bZV18fGRlbGV0ZSBuW2VdfSkpLHI9T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LHIpLG4pLHJ9KSl9Z2V0RGVjb2RlZElEVG9rZW4oZSl7cmV0dXJuIHQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtjb25zdCB0PSh5aWVsZCB0aGlzLl9kYXRhTGF5ZXIuZ2V0U2Vzc2lvbkRhdGEoZSkpLmlkX3Rva2VuO3JldHVybiB0aGlzLl9jcnlwdG9IZWxwZXIuZGVjb2RlSURUb2tlbih0KX0pKX1nZXRDcnlwdG9IZWxwZXIoKXtyZXR1cm4gdCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3JldHVybiB0aGlzLl9jcnlwdG9IZWxwZXJ9KSl9Z2V0SURUb2tlbihlKXtyZXR1cm4gdCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3JldHVybih5aWVsZCB0aGlzLl9kYXRhTGF5ZXIuZ2V0U2Vzc2lvbkRhdGEoZSkpLmlkX3Rva2VufSkpfWdldE9JRENQcm92aWRlck1ldGFEYXRhKGUpe3JldHVybiB0KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7Y29uc3QgdD15aWVsZCB0aGlzLl9jb25maWcoKTtpZighZSYmKHlpZWxkIHRoaXMuX2RhdGFMYXllci5nZXRUZW1wb3JhcnlEYXRhUGFyYW1ldGVyKCJvcF9jb25maWdfaW5pdGlhdGVkIikpKXJldHVybiBQcm9taXNlLnJlc29sdmUoKTtjb25zdCBuPXQud2VsbEtub3duRW5kcG9pbnQ7aWYobil7bGV0IGU7dHJ5e2lmKGU9eWllbGQgZmV0Y2gobiksMjAwIT09ZS5zdGF0dXN8fCFlLm9rKXRocm93IG5ldyBFcnJvcn1jYXRjaCh0KXt0aHJvdyBuZXcgYygiSlMtQVVUSF9DT1JFLUdPUE1ELUhFMDEiLCJJbnZhbGlkIHdlbGwta25vd24gcmVzcG9uc2UiLCJUaGUgd2VsbCBrbm93biBlbmRwb2ludCByZXNwb25zZSBoYXMgYmVlbiBmYWlsZWQgd2l0aCBhbiBlcnJvci4iKX1yZXR1cm4geWllbGQgdGhpcy5fZGF0YUxheWVyLnNldE9JRENQcm92aWRlck1ldGFEYXRhKHlpZWxkIHRoaXMuX2F1dGhlbnRpY2F0aW9uSGVscGVyLnJlc29sdmVFbmRwb2ludHMoeWllbGQgZS5qc29uKCkpKSx5aWVsZCB0aGlzLl9kYXRhTGF5ZXIuc2V0VGVtcG9yYXJ5RGF0YVBhcmFtZXRlcigib3BfY29uZmlnX2luaXRpYXRlZCIsITApLFByb21pc2UucmVzb2x2ZSgpfWlmKHQuYmFzZVVybCl7dHJ5e3lpZWxkIHRoaXMuX2RhdGFMYXllci5zZXRPSURDUHJvdmlkZXJNZXRhRGF0YSh5aWVsZCB0aGlzLl9hdXRoZW50aWNhdGlvbkhlbHBlci5yZXNvbHZlRW5kcG9pbnRzQnlCYXNlVVJMKCkpfWNhdGNoKHQpe3Rocm93IG5ldyBjKCJKUy1BVVRIX0NPUkUtR09QTUQtSVYwMiIsIlJlc29sdmluZyBlbmRwb2ludHMgZmFpbGVkLiIsbnVsbCE9dD90OiJSZXNvbHZpbmcgZW5kcG9pbnRzIGJ5IGJhc2UgdXJsIGZhaWxlZC4iKX1yZXR1cm4geWllbGQgdGhpcy5fZGF0YUxheWVyLnNldFRlbXBvcmFyeURhdGFQYXJhbWV0ZXIoIm9wX2NvbmZpZ19pbml0aWF0ZWQiLCEwKSxQcm9taXNlLnJlc29sdmUoKX1yZXR1cm4geWllbGQgdGhpcy5fZGF0YUxheWVyLnNldE9JRENQcm92aWRlck1ldGFEYXRhKHlpZWxkIHRoaXMuX2F1dGhlbnRpY2F0aW9uSGVscGVyLnJlc29sdmVFbmRwb2ludHNFeHBsaWNpdGx5KCkpLHlpZWxkIHRoaXMuX2RhdGFMYXllci5zZXRUZW1wb3JhcnlEYXRhUGFyYW1ldGVyKCJvcF9jb25maWdfaW5pdGlhdGVkIiwhMCksUHJvbWlzZS5yZXNvbHZlKCl9KSl9Z2V0T0lEQ1NlcnZpY2VFbmRwb2ludHMoKXt2YXIgZSxuLHIsaSxvLHMsYSxjLHUsbDtyZXR1cm4gdCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2NvbnN0IHQ9eWllbGQgdGhpcy5fb2lkY1Byb3ZpZGVyTWV0YURhdGEoKTtyZXR1cm57YXV0aG9yaXphdGlvbkVuZHBvaW50Om51bGwhPT0oZT10LmF1dGhvcml6YXRpb25fZW5kcG9pbnQpJiZ2b2lkIDAhPT1lP2U6IiIsY2hlY2tTZXNzaW9uSWZyYW1lOm51bGwhPT0obj10LmNoZWNrX3Nlc3Npb25faWZyYW1lKSYmdm9pZCAwIT09bj9uOiIiLGVuZFNlc3Npb25FbmRwb2ludDpudWxsIT09KHI9dC5lbmRfc2Vzc2lvbl9lbmRwb2ludCkmJnZvaWQgMCE9PXI/cjoiIixpbnRyb3NwZWN0aW9uRW5kcG9pbnQ6bnVsbCE9PShpPXQuaW50cm9zcGVjdGlvbl9lbmRwb2ludCkmJnZvaWQgMCE9PWk/aToiIixpc3N1ZXI6bnVsbCE9PShvPXQuaXNzdWVyKSYmdm9pZCAwIT09bz9vOiIiLGp3a3NVcmk6bnVsbCE9PShzPXQuandrc191cmkpJiZ2b2lkIDAhPT1zP3M6IiIscmVnaXN0cmF0aW9uRW5kcG9pbnQ6bnVsbCE9PShhPXQucmVnaXN0cmF0aW9uX2VuZHBvaW50KSYmdm9pZCAwIT09YT9hOiIiLHJldm9jYXRpb25FbmRwb2ludDpudWxsIT09KGM9dC5yZXZvY2F0aW9uX2VuZHBvaW50KSYmdm9pZCAwIT09Yz9jOiIiLHRva2VuRW5kcG9pbnQ6bnVsbCE9PSh1PXQudG9rZW5fZW5kcG9pbnQpJiZ2b2lkIDAhPT11P3U6IiIsdXNlcmluZm9FbmRwb2ludDpudWxsIT09KGw9dC51c2VyaW5mb19lbmRwb2ludCkmJnZvaWQgMCE9PWw/bDoiIn19KSl9Z2V0U2lnbk91dFVSTChlKXt2YXIgbixyLGk7cmV0dXJuIHQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtjb25zdCB0PW51bGw9PT0obj15aWVsZCB0aGlzLl9vaWRjUHJvdmlkZXJNZXRhRGF0YSgpKXx8dm9pZCAwPT09bj92b2lkIDA6bi5lbmRfc2Vzc2lvbl9lbmRwb2ludCxvPXlpZWxkIHRoaXMuX2NvbmZpZygpO2lmKCF0fHwwPT09dC50cmltKCkubGVuZ3RoKXRocm93IG5ldyBjKCJKUy1BVVRIX0NPUkUtR1NPVS1ORjAxIiwiU2lnbi1vdXQgZW5kcG9pbnQgbm90IGZvdW5kLiIsIk5vIHNpZ24tb3V0IGVuZHBvaW50IHdhcyBmb3VuZCBpbiB0aGUgT0lEQyBwcm92aWRlciBtZXRhIGRhdGEgcmV0dXJuZWQgYnkgdGhlIHdlbGwta25vd24gZW5kcG9pbnQgb3IgdGhlIHNpZ24tb3V0IGVuZHBvaW50IHBhc3NlZCB0byB0aGUgU0RLIGlzIGVtcHR5LiIpO2NvbnN0IHM9bnVsbD09PShyPXlpZWxkIHRoaXMuX2RhdGFMYXllci5nZXRTZXNzaW9uRGF0YShlKSl8fHZvaWQgMD09PXI/dm9pZCAwOnIuaWRfdG9rZW47aWYoIXN8fDA9PT1zLnRyaW0oKS5sZW5ndGgpdGhyb3cgbmV3IGMoIkpTLUFVVEhfQ09SRS1HU09VLU5GMDIiLCJJRCB0b2tlbiBub3QgZm91bmQuIiwiTm8gSUQgdG9rZW4gY291bGQgYmUgZm91bmQuIEVpdGhlciB0aGUgc2Vzc2lvbiBpbmZvcm1hdGlvbiBpcyBsb3N0IG9yIHlvdSBoYXZlIG5vdCBzaWduZWQgaW4uIik7Y29uc3QgYT1udWxsIT09KGk9bnVsbD09bz92b2lkIDA6by5zaWduT3V0UmVkaXJlY3RVUkwpJiZ2b2lkIDAhPT1pP2k6bnVsbD09bz92b2lkIDA6by5zaWduSW5SZWRpcmVjdFVSTDtpZighYXx8MD09PWEudHJpbSgpLmxlbmd0aCl0aHJvdyBuZXcgYygiSlMtQVVUSF9DT1JFLUdTT1UtTkYwMyIsIk5vIHNpZ24tb3V0IHJlZGlyZWN0IFVSTCBmb3VuZC4iLCJUaGUgc2lnbi1vdXQgcmVkaXJlY3QgVVJMIGNhbm5vdCBiZSBmb3VuZCBvciB0aGUgVVJMIHBhc3NlZCB0byB0aGUgU0RLIGlzIGVtcHR5LiBObyBzaWduLWluIHJlZGlyZWN0IFVSTCBoYXMgYmVlbiBmb3VuZCBlaXRoZXIuICIpO3JldHVybiIiLmNvbmNhdCh0LCI/aWRfdG9rZW5faGludD0iKS5jb25jYXQocywiJnBvc3RfbG9nb3V0X3JlZGlyZWN0X3VyaT0iKS5jb25jYXQoYSwiJnN0YXRlPXNpZ25fb3V0X3N1Y2Nlc3MiKX0pKX1jbGVhclVzZXJTZXNzaW9uRGF0YShlKXtyZXR1cm4gdCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3lpZWxkIHRoaXMuX2F1dGhlbnRpY2F0aW9uSGVscGVyLmNsZWFyVXNlclNlc3Npb25EYXRhKGUpfSkpfWdldEFjY2Vzc1Rva2VuKGUpe3ZhciBuO3JldHVybiB0KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7cmV0dXJuIG51bGw9PT0obj15aWVsZCB0aGlzLl9kYXRhTGF5ZXIuZ2V0U2Vzc2lvbkRhdGEoZSkpfHx2b2lkIDA9PT1uP3ZvaWQgMDpuLmFjY2Vzc190b2tlbn0pKX1pc0F1dGhlbnRpY2F0ZWQoZSl7cmV0dXJuIHQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtyZXR1cm4gQm9vbGVhbih5aWVsZCB0aGlzLmdldEFjY2Vzc1Rva2VuKGUpKX0pKX1nZXRQS0NFQ29kZShlLG4pe3JldHVybiB0KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7cmV0dXJuIHlpZWxkIHRoaXMuX2RhdGFMYXllci5nZXRUZW1wb3JhcnlEYXRhUGFyYW1ldGVyKHUuZXh0cmFjdFBLQ0VLZXlGcm9tU3RhdGVQYXJhbShlKSxuKX0pKX1zZXRQS0NFQ29kZShlLG4scil7cmV0dXJuIHQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtyZXR1cm4geWllbGQgdGhpcy5fZGF0YUxheWVyLnNldFRlbXBvcmFyeURhdGFQYXJhbWV0ZXIodS5leHRyYWN0UEtDRUtleUZyb21TdGF0ZVBhcmFtKG4pLGUscil9KSl9dXBkYXRlQ29uZmlnKGUpe3JldHVybiB0KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7eWllbGQgdGhpcy5fZGF0YUxheWVyLnNldENvbmZpZ0RhdGEoZSkseWllbGQgdGhpcy5nZXRPSURDUHJvdmlkZXJNZXRhRGF0YSghMCl9KSl9fWNsYXNzIGZ7Y29uc3RydWN0b3IoZSx0KXt0aGlzLl9pZD1lLHRoaXMuX3N0b3JlPXR9c2V0RGF0YUluQnVsayhlLG4pe3ZhciByO3JldHVybiB0KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7Y29uc3QgdD1udWxsIT09KHI9eWllbGQgdGhpcy5fc3RvcmUuZ2V0RGF0YShlKSkmJnZvaWQgMCE9PXI/cjpudWxsLGk9dCYmSlNPTi5wYXJzZSh0KSxvPU9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxpKSxuKSxzPUpTT04uc3RyaW5naWZ5KG8pO3lpZWxkIHRoaXMuX3N0b3JlLnNldERhdGEoZSxzKX0pKX1zZXRWYWx1ZShlLG4scil7dmFyIGk7cmV0dXJuIHQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtjb25zdCB0PW51bGwhPT0oaT15aWVsZCB0aGlzLl9zdG9yZS5nZXREYXRhKGUpKSYmdm9pZCAwIT09aT9pOm51bGwsbz10JiZKU09OLnBhcnNlKHQpLHM9T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LG8pLHtbbl06cn0pLGE9SlNPTi5zdHJpbmdpZnkocyk7eWllbGQgdGhpcy5fc3RvcmUuc2V0RGF0YShlLGEpfSkpfXJlbW92ZVZhbHVlKGUsbil7dmFyIHI7cmV0dXJuIHQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtjb25zdCB0PW51bGwhPT0ocj15aWVsZCB0aGlzLl9zdG9yZS5nZXREYXRhKGUpKSYmdm9pZCAwIT09cj9yOm51bGwsaT10JiZKU09OLnBhcnNlKHQpLG89T2JqZWN0LmFzc2lnbih7fSxpKTtkZWxldGUgb1tuXTtjb25zdCBzPUpTT04uc3RyaW5naWZ5KG8pO3lpZWxkIHRoaXMuX3N0b3JlLnNldERhdGEoZSxzKX0pKX1fcmVzb2x2ZUtleShlLHQpe3JldHVybiB0PyIiLmNvbmNhdChlLCItIikuY29uY2F0KHRoaXMuX2lkLCItIikuY29uY2F0KHQpOiIiLmNvbmNhdChlLCItIikuY29uY2F0KHRoaXMuX2lkKX1pc0xvY2FsU3RvcmFnZUF2YWlsYWJsZSgpe3RyeXtjb25zdCBlPSJfX0FTR0FSREVPX0FVVEhfQ09SRV9MT0NBTF9TVE9SQUdFX1RFU1RfXyI7cmV0dXJuIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGUsZSksbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oZSksITB9Y2F0Y2goZSl7cmV0dXJuITF9fXNldENvbmZpZ0RhdGEoZSl7cmV0dXJuIHQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXt5aWVsZCB0aGlzLnNldERhdGFJbkJ1bGsodGhpcy5fcmVzb2x2ZUtleShyLkNvbmZpZ0RhdGEpLGUpfSkpfXNldE9JRENQcm92aWRlck1ldGFEYXRhKGUpe3JldHVybiB0KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7dGhpcy5zZXREYXRhSW5CdWxrKHRoaXMuX3Jlc29sdmVLZXkoci5PSURDUHJvdmlkZXJNZXRhRGF0YSksZSl9KSl9c2V0VGVtcG9yYXJ5RGF0YShlLG4pe3JldHVybiB0KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7dGhpcy5zZXREYXRhSW5CdWxrKHRoaXMuX3Jlc29sdmVLZXkoci5UZW1wb3JhcnlEYXRhLG4pLGUpfSkpfXNldFNlc3Npb25EYXRhKGUsbil7cmV0dXJuIHQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXt0aGlzLnNldERhdGFJbkJ1bGsodGhpcy5fcmVzb2x2ZUtleShyLlNlc3Npb25EYXRhLG4pLGUpfSkpfXNldEN1c3RvbURhdGEoZSxuLHIpe3JldHVybiB0KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7dGhpcy5zZXREYXRhSW5CdWxrKHRoaXMuX3Jlc29sdmVLZXkoZSxyKSxuKX0pKX1nZXRDb25maWdEYXRhKCl7dmFyIGU7cmV0dXJuIHQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtyZXR1cm4gSlNPTi5wYXJzZShudWxsIT09KGU9eWllbGQgdGhpcy5fc3RvcmUuZ2V0RGF0YSh0aGlzLl9yZXNvbHZlS2V5KHIuQ29uZmlnRGF0YSkpKSYmdm9pZCAwIT09ZT9lOm51bGwpfSkpfWdldE9JRENQcm92aWRlck1ldGFEYXRhKCl7dmFyIGU7cmV0dXJuIHQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtyZXR1cm4gSlNPTi5wYXJzZShudWxsIT09KGU9eWllbGQgdGhpcy5fc3RvcmUuZ2V0RGF0YSh0aGlzLl9yZXNvbHZlS2V5KHIuT0lEQ1Byb3ZpZGVyTWV0YURhdGEpKSkmJnZvaWQgMCE9PWU/ZTpudWxsKX0pKX1nZXRUZW1wb3JhcnlEYXRhKGUpe3ZhciBuO3JldHVybiB0KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7cmV0dXJuIEpTT04ucGFyc2UobnVsbCE9PShuPXlpZWxkIHRoaXMuX3N0b3JlLmdldERhdGEodGhpcy5fcmVzb2x2ZUtleShyLlRlbXBvcmFyeURhdGEsZSkpKSYmdm9pZCAwIT09bj9uOm51bGwpfSkpfWdldFNlc3Npb25EYXRhKGUpe3ZhciBuO3JldHVybiB0KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7cmV0dXJuIEpTT04ucGFyc2UobnVsbCE9PShuPXlpZWxkIHRoaXMuX3N0b3JlLmdldERhdGEodGhpcy5fcmVzb2x2ZUtleShyLlNlc3Npb25EYXRhLGUpKSkmJnZvaWQgMCE9PW4/bjpudWxsKX0pKX1nZXRDdXN0b21EYXRhKGUsbil7dmFyIHI7cmV0dXJuIHQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtyZXR1cm4gSlNPTi5wYXJzZShudWxsIT09KHI9eWllbGQgdGhpcy5fc3RvcmUuZ2V0RGF0YSh0aGlzLl9yZXNvbHZlS2V5KGUsbikpKSYmdm9pZCAwIT09cj9yOm51bGwpfSkpfXNldFNlc3Npb25TdGF0dXMoZSl7dGhpcy5pc0xvY2FsU3RvcmFnZUF2YWlsYWJsZSgpJiZsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgiYXNnYXJkZW8tc2Vzc2lvbi1hY3RpdmUiLGUpfWdldFNlc3Npb25TdGF0dXMoKXt2YXIgZTtyZXR1cm4gdGhpcy5pc0xvY2FsU3RvcmFnZUF2YWlsYWJsZSgpJiZudWxsIT09KGU9bG9jYWxTdG9yYWdlLmdldEl0ZW0oImFzZ2FyZGVvLXNlc3Npb24tYWN0aXZlIikpJiZ2b2lkIDAhPT1lP2U6IiJ9cmVtb3ZlU2Vzc2lvblN0YXR1cygpe3RoaXMuaXNMb2NhbFN0b3JhZ2VBdmFpbGFibGUoKSYmbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oImFzZ2FyZGVvLXNlc3Npb24tYWN0aXZlIil9cmVtb3ZlQ29uZmlnRGF0YSgpe3JldHVybiB0KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7eWllbGQgdGhpcy5fc3RvcmUucmVtb3ZlRGF0YSh0aGlzLl9yZXNvbHZlS2V5KHIuQ29uZmlnRGF0YSkpfSkpfXJlbW92ZU9JRENQcm92aWRlck1ldGFEYXRhKCl7cmV0dXJuIHQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXt5aWVsZCB0aGlzLl9zdG9yZS5yZW1vdmVEYXRhKHRoaXMuX3Jlc29sdmVLZXkoci5PSURDUHJvdmlkZXJNZXRhRGF0YSkpfSkpfXJlbW92ZVRlbXBvcmFyeURhdGEoZSl7cmV0dXJuIHQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXt5aWVsZCB0aGlzLl9zdG9yZS5yZW1vdmVEYXRhKHRoaXMuX3Jlc29sdmVLZXkoci5UZW1wb3JhcnlEYXRhLGUpKX0pKX1yZW1vdmVTZXNzaW9uRGF0YShlKXtyZXR1cm4gdCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3lpZWxkIHRoaXMuX3N0b3JlLnJlbW92ZURhdGEodGhpcy5fcmVzb2x2ZUtleShyLlNlc3Npb25EYXRhLGUpKX0pKX1nZXRDb25maWdEYXRhUGFyYW1ldGVyKGUpe3JldHVybiB0KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7Y29uc3QgdD15aWVsZCB0aGlzLl9zdG9yZS5nZXREYXRhKHRoaXMuX3Jlc29sdmVLZXkoci5Db25maWdEYXRhKSk7cmV0dXJuIHQmJkpTT04ucGFyc2UodClbZV19KSl9Z2V0T0lEQ1Byb3ZpZGVyTWV0YURhdGFQYXJhbWV0ZXIoZSl7cmV0dXJuIHQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtjb25zdCB0PXlpZWxkIHRoaXMuX3N0b3JlLmdldERhdGEodGhpcy5fcmVzb2x2ZUtleShyLk9JRENQcm92aWRlck1ldGFEYXRhKSk7cmV0dXJuIHQmJkpTT04ucGFyc2UodClbZV19KSl9Z2V0VGVtcG9yYXJ5RGF0YVBhcmFtZXRlcihlLG4pe3JldHVybiB0KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7Y29uc3QgdD15aWVsZCB0aGlzLl9zdG9yZS5nZXREYXRhKHRoaXMuX3Jlc29sdmVLZXkoci5UZW1wb3JhcnlEYXRhLG4pKTtyZXR1cm4gdCYmSlNPTi5wYXJzZSh0KVtlXX0pKX1nZXRTZXNzaW9uRGF0YVBhcmFtZXRlcihlLG4pe3JldHVybiB0KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7Y29uc3QgdD15aWVsZCB0aGlzLl9zdG9yZS5nZXREYXRhKHRoaXMuX3Jlc29sdmVLZXkoci5TZXNzaW9uRGF0YSxuKSk7cmV0dXJuIHQmJkpTT04ucGFyc2UodClbZV19KSl9c2V0Q29uZmlnRGF0YVBhcmFtZXRlcihlLG4pe3JldHVybiB0KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7eWllbGQgdGhpcy5zZXRWYWx1ZSh0aGlzLl9yZXNvbHZlS2V5KHIuQ29uZmlnRGF0YSksZSxuKX0pKX1zZXRPSURDUHJvdmlkZXJNZXRhRGF0YVBhcmFtZXRlcihlLG4pe3JldHVybiB0KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7eWllbGQgdGhpcy5zZXRWYWx1ZSh0aGlzLl9yZXNvbHZlS2V5KHIuT0lEQ1Byb3ZpZGVyTWV0YURhdGEpLGUsbil9KSl9c2V0VGVtcG9yYXJ5RGF0YVBhcmFtZXRlcihlLG4saSl7cmV0dXJuIHQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXt5aWVsZCB0aGlzLnNldFZhbHVlKHRoaXMuX3Jlc29sdmVLZXkoci5UZW1wb3JhcnlEYXRhLGkpLGUsbil9KSl9c2V0U2Vzc2lvbkRhdGFQYXJhbWV0ZXIoZSxuLGkpe3JldHVybiB0KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7eWllbGQgdGhpcy5zZXRWYWx1ZSh0aGlzLl9yZXNvbHZlS2V5KHIuU2Vzc2lvbkRhdGEsaSksZSxuKX0pKX1yZW1vdmVDb25maWdEYXRhUGFyYW1ldGVyKGUpe3JldHVybiB0KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7eWllbGQgdGhpcy5yZW1vdmVWYWx1ZSh0aGlzLl9yZXNvbHZlS2V5KHIuQ29uZmlnRGF0YSksZSl9KSl9cmVtb3ZlT0lEQ1Byb3ZpZGVyTWV0YURhdGFQYXJhbWV0ZXIoZSl7cmV0dXJuIHQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXt5aWVsZCB0aGlzLnJlbW92ZVZhbHVlKHRoaXMuX3Jlc29sdmVLZXkoci5PSURDUHJvdmlkZXJNZXRhRGF0YSksZSl9KSl9cmVtb3ZlVGVtcG9yYXJ5RGF0YVBhcmFtZXRlcihlLG4pe3JldHVybiB0KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7eWllbGQgdGhpcy5yZW1vdmVWYWx1ZSh0aGlzLl9yZXNvbHZlS2V5KHIuVGVtcG9yYXJ5RGF0YSxuKSxlKX0pKX1yZW1vdmVTZXNzaW9uRGF0YVBhcmFtZXRlcihlLG4pe3JldHVybiB0KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7eWllbGQgdGhpcy5yZW1vdmVWYWx1ZSh0aGlzLl9yZXNvbHZlS2V5KHIuU2Vzc2lvbkRhdGEsbiksZSl9KSl9fWNvbnN0IHA9e2Nsb2NrVG9sZXJhbmNlOjMwMCxlbmFibGVQS0NFOiEwLHJlc3BvbnNlTW9kZTpuLnF1ZXJ5LHNjb3BlOlsib3BlbmlkIl0sc2VuZENvb2tpZXNJblJlcXVlc3RzOiEwLHZhbGlkYXRlSURUb2tlbjohMH07Y2xhc3MgZ3tjb25zdHJ1Y3Rvcigpe31pbml0aWFsaXplKGUsbixyLGkpe3ZhciBvLHMsYTtyZXR1cm4gdCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2NvbnN0IHQ9ZS5jbGllbnRJRDtnLl9pbnN0YW5jZUlEP2cuX2luc3RhbmNlSUQrPTE6Zy5faW5zdGFuY2VJRD0wLGkmJihnLl9pbnN0YW5jZUlEPWkpLHRoaXMuX2RhdGFMYXllcj1uZXcgZih0PyJpbnN0YW5jZV8iLmNvbmNhdChnLl9pbnN0YW5jZUlELCItIikuY29uY2F0KHQpOiJpbnN0YW5jZV8iLmNvbmNhdChnLl9pbnN0YW5jZUlEKSxuKSx0aGlzLl9hdXRoZW50aWNhdGlvbkNvcmU9bmV3IGgodGhpcy5fZGF0YUxheWVyLHIpLGcuX2F1dGhlbnRpY2F0aW9uQ29yZT1uZXcgaCh0aGlzLl9kYXRhTGF5ZXIscikseWllbGQgdGhpcy5fZGF0YUxheWVyLnNldENvbmZpZ0RhdGEoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30scCksZSkse3Njb3BlOlsuLi5udWxsIT09KG89cC5zY29wZSkmJnZvaWQgMCE9PW8/bzpbXSwuLi5udWxsIT09KGE9bnVsbD09PShzPWUuc2NvcGUpfHx2b2lkIDA9PT1zP3ZvaWQgMDpzLmZpbHRlcigoZT0+e3ZhciB0O3JldHVybiEobnVsbD09PSh0PW51bGw9PXA/dm9pZCAwOnAuc2NvcGUpfHx2b2lkIDA9PT10P3ZvaWQgMDp0LmluY2x1ZGVzKGUpKX0pKSkmJnZvaWQgMCE9PWE/YTpbXV19KSl9KSl9Z2V0RGF0YUxheWVyKCl7cmV0dXJuIHRoaXMuX2RhdGFMYXllcn1nZXRJbnN0YW5jZUlEKCl7cmV0dXJuIGcuX2luc3RhbmNlSUR9Z2V0QXV0aG9yaXphdGlvblVSTChlLG4pe3JldHVybiB0KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7Y29uc3QgdD1PYmplY3QuYXNzaWduKHt9LGUpO3JldHVybiBudWxsPT10fHxkZWxldGUgdC5mb3JjZUluaXQsKHlpZWxkIHRoaXMuX2RhdGFMYXllci5nZXRUZW1wb3JhcnlEYXRhUGFyYW1ldGVyKCJvcF9jb25maWdfaW5pdGlhdGVkIikpP3RoaXMuX2F1dGhlbnRpY2F0aW9uQ29yZS5nZXRBdXRob3JpemF0aW9uVVJMKHQsbik6dGhpcy5fYXV0aGVudGljYXRpb25Db3JlLmdldE9JRENQcm92aWRlck1ldGFEYXRhKG51bGw9PWU/dm9pZCAwOmUuZm9yY2VJbml0KS50aGVuKCgoKT0+dGhpcy5fYXV0aGVudGljYXRpb25Db3JlLmdldEF1dGhvcml6YXRpb25VUkwodCxuKSkpfSkpfXJlcXVlc3RBY2Nlc3NUb2tlbihlLG4scixpKXtyZXR1cm4gdCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3JldHVybih5aWVsZCB0aGlzLl9kYXRhTGF5ZXIuZ2V0VGVtcG9yYXJ5RGF0YVBhcmFtZXRlcigib3BfY29uZmlnX2luaXRpYXRlZCIpKT90aGlzLl9hdXRoZW50aWNhdGlvbkNvcmUucmVxdWVzdEFjY2Vzc1Rva2VuKGUsbixyLGkpOnRoaXMuX2F1dGhlbnRpY2F0aW9uQ29yZS5nZXRPSURDUHJvdmlkZXJNZXRhRGF0YSghMSkudGhlbigoKCk9PnRoaXMuX2F1dGhlbnRpY2F0aW9uQ29yZS5yZXF1ZXN0QWNjZXNzVG9rZW4oZSxuLHIsaSkpKX0pKX1nZXRTaWduT3V0VVJMKGUpe3JldHVybiB0KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7cmV0dXJuIHRoaXMuX2F1dGhlbnRpY2F0aW9uQ29yZS5nZXRTaWduT3V0VVJMKGUpfSkpfWdldE9JRENTZXJ2aWNlRW5kcG9pbnRzKCl7cmV0dXJuIHQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtyZXR1cm4gdGhpcy5fYXV0aGVudGljYXRpb25Db3JlLmdldE9JRENTZXJ2aWNlRW5kcG9pbnRzKCl9KSl9Z2V0RGVjb2RlZElEVG9rZW4oZSl7cmV0dXJuIHQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtyZXR1cm4gdGhpcy5fYXV0aGVudGljYXRpb25Db3JlLmdldERlY29kZWRJRFRva2VuKGUpfSkpfWdldElEVG9rZW4oZSl7cmV0dXJuIHQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtyZXR1cm4gdGhpcy5fYXV0aGVudGljYXRpb25Db3JlLmdldElEVG9rZW4oZSl9KSl9Z2V0QmFzaWNVc2VySW5mbyhlKXtyZXR1cm4gdCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3JldHVybiB0aGlzLl9hdXRoZW50aWNhdGlvbkNvcmUuZ2V0QmFzaWNVc2VySW5mbyhlKX0pKX1nZXRDcnlwdG9IZWxwZXIoKXtyZXR1cm4gdCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3JldHVybiB0aGlzLl9hdXRoZW50aWNhdGlvbkNvcmUuZ2V0Q3J5cHRvSGVscGVyKCl9KSl9cmV2b2tlQWNjZXNzVG9rZW4oZSl7cmV0dXJuIHRoaXMuX2F1dGhlbnRpY2F0aW9uQ29yZS5yZXZva2VBY2Nlc3NUb2tlbihlKX1yZWZyZXNoQWNjZXNzVG9rZW4oZSl7cmV0dXJuIHRoaXMuX2F1dGhlbnRpY2F0aW9uQ29yZS5yZWZyZXNoQWNjZXNzVG9rZW4oZSl9Z2V0QWNjZXNzVG9rZW4oZSl7cmV0dXJuIHQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtyZXR1cm4gdGhpcy5fYXV0aGVudGljYXRpb25Db3JlLmdldEFjY2Vzc1Rva2VuKGUpfSkpfXJlcXVlc3RDdXN0b21HcmFudChlLHQpe3JldHVybiB0aGlzLl9hdXRoZW50aWNhdGlvbkNvcmUucmVxdWVzdEN1c3RvbUdyYW50KGUsdCl9aXNBdXRoZW50aWNhdGVkKGUpe3JldHVybiB0KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7cmV0dXJuIHRoaXMuX2F1dGhlbnRpY2F0aW9uQ29yZS5pc0F1dGhlbnRpY2F0ZWQoZSl9KSl9Z2V0UEtDRUNvZGUoZSxuKXtyZXR1cm4gdCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3JldHVybiB0aGlzLl9hdXRoZW50aWNhdGlvbkNvcmUuZ2V0UEtDRUNvZGUoZSxuKX0pKX1zZXRQS0NFQ29kZShlLG4scil7cmV0dXJuIHQodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXt5aWVsZCB0aGlzLl9hdXRoZW50aWNhdGlvbkNvcmUuc2V0UEtDRUNvZGUoZSxuLHIpfSkpfXN0YXRpYyBpc1NpZ25PdXRTdWNjZXNzZnVsKGUpe2NvbnN0IHQ9bmV3IFVSTChlKSxuPXQuc2VhcmNoUGFyYW1zLmdldCgic3RhdGUiKSxyPUJvb2xlYW4odC5zZWFyY2hQYXJhbXMuZ2V0KCJlcnJvciIpKTtyZXR1cm4hIW4mJiJzaWduX291dF9zdWNjZXNzIj09PW4mJiFyfXN0YXRpYyBkaWRTaWduT3V0RmFpbChlKXtjb25zdCB0PW5ldyBVUkwoZSksbj10LnNlYXJjaFBhcmFtcy5nZXQoInN0YXRlIikscj1Cb29sZWFuKHQuc2VhcmNoUGFyYW1zLmdldCgiZXJyb3IiKSk7cmV0dXJuISFuJiYic2lnbl9vdXRfc3VjY2VzcyI9PT1uJiZyfXVwZGF0ZUNvbmZpZyhlKXtyZXR1cm4gdCh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3lpZWxkIHRoaXMuX2F1dGhlbnRpY2F0aW9uQ29yZS51cGRhdGVDb25maWcoZSl9KSl9c3RhdGljIGNsZWFyVXNlclNlc3Npb25EYXRhKGUpe3JldHVybiB0KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7eWllbGQgdGhpcy5fYXV0aGVudGljYXRpb25Db3JlLmNsZWFyVXNlclNlc3Npb25EYXRhKGUpfSkpfX1jb25zdCB2PSJpbml0Ijt2YXIgeSxtOyFmdW5jdGlvbihlKXtlLkxvY2FsU3RvcmFnZT0ibG9jYWxTdG9yYWdlIixlLlNlc3Npb25TdG9yYWdlPSJzZXNzaW9uU3RvcmFnZSIsZS5XZWJXb3JrZXI9IndlYldvcmtlciIsZS5Ccm93c2VyTWVtb3J5PSJicm93c2VyTWVtb3J5In0oeXx8KHk9e30pKSxmdW5jdGlvbihlKXtlLlNpZ25Jbj0ic2lnbi1pbiIsZS5TaWduT3V0PSJzaWduLW91dCIsZS5Jbml0aWFsaXplPSJpbml0aWFsaXplIixlLkh0dHBSZXF1ZXN0U3RhcnQ9Imh0dHAtcmVxdWVzdC1zdGFydCIsZS5IdHRwUmVxdWVzdEZpbmlzaD0iaHR0cC1yZXF1ZXN0LWZpbmlzaCIsZS5IdHRwUmVxdWVzdEVycm9yPSJodHRwLXJlcXVlc3QtZXJyb3IiLGUuSHR0cFJlcXVlc3RTdWNjZXNzPSJodHRwLXJlcXVlc3Qtc3VjY2VzcyIsZS5SZXZva2VBY2Nlc3NUb2tlbj0icmV2b2tlLWFjY2Vzcy10b2tlbiIsZS5DdXN0b21HcmFudD0iY3VzdG9tLWdyYW50IixlLlNpZ25PdXRGYWlsZWQ9InNpZ24tb3V0LWZhaWxlZCJ9KG18fChtPXt9KSk7Y29uc3Qgdz0icHJvbXB0Tm9uZVJlcXVlc3RTZW50IixfPSJlcnJvciIsUz0iZXJyb3JfZGVzY3JpcHRpb24iLGI9ImN1c3RvbV9ncmFudF9jb25maWciLGs9IkFjY2VzcyB0b2tlbiBpcyBpbnZhbGlkIjtjbGFzcyBFe2NvbnN0cnVjdG9yKCl7fXN0YXRpYyBnZW5lcmF0ZVN1Y2Nlc3NNZXNzYWdlKGUpe3JldHVybntibG9iOihudWxsPT1lP3ZvaWQgMDplLmRhdGEpaW5zdGFuY2VvZiBCbG9iP251bGw9PWU/dm9pZCAwOmUuZGF0YTpudWxsLGRhdGE6SlNPTi5zdHJpbmdpZnkobnVsbCE9ZT9lOiIiKSxzdWNjZXNzOiEwfX1zdGF0aWMgZ2VuZXJhdGVGYWlsdXJlTWVzc2FnZShlKXtyZXR1cm4obnVsbD09ZT92b2lkIDA6ZS50b0pTT04pJiZkZWxldGUgZS50b0pTT04se2Vycm9yOkpTT04uc3RyaW5naWZ5KG51bGwhPWU/ZToiIiksc3VjY2VzczohMX19fWNsYXNzIFR7Y29uc3RydWN0b3IoKXt9c3RhdGljIHJlbW92ZUF1dGhvcml6YXRpb25Db2RlKCl7Y29uc3QgZT1sb2NhdGlvbi5ocmVmO2hpc3RvcnkucHVzaFN0YXRlKHt9LGRvY3VtZW50LnRpdGxlLGUucmVwbGFjZSgvXD9jb2RlPS4qJC8sIiIpKX1zdGF0aWMgZ2V0UEtDRShlKXt2YXIgdDtyZXR1cm4gbnVsbCE9PSh0PXNlc3Npb25TdG9yYWdlLmdldEl0ZW0oZSkpJiZ2b2lkIDAhPT10P3Q6IiJ9c3RhdGljIHNldFBLQ0UoZSx0KXtzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKGUsdCl9c3RhdGljIHNldFNpZ25PdXRVUkwoZSx0LG4pe3Nlc3Npb25TdG9yYWdlLnNldEl0ZW0oIiIuY29uY2F0KHMsIi1pbnN0YW5jZV8iKS5jb25jYXQobiwiLSIpLmNvbmNhdCh0KSxlKX1zdGF0aWMgZ2V0U2lnbk91dFVSTChlLHQpe3ZhciBuO3JldHVybiBudWxsIT09KG49c2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgiIi5jb25jYXQocywiLWluc3RhbmNlXyIpLmNvbmNhdCh0LCItIikuY29uY2F0KGUpKSkmJnZvaWQgMCE9PW4/bjoiIn1zdGF0aWMgcmVtb3ZlUEtDRShlKXtzZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKGUpfXN0YXRpYyBjYW5Db250aW51ZVNpZ25JbihlLHQpe3JldHVybiEoZSYmIVQuaGFzRXJyb3JJblVSTCgpJiYhVC5oYXNBdXRoU2VhcmNoUGFyYW1zSW5VUkwoKSYmIXQpfXN0YXRpYyBpc0luaXRpYWxpemVkU2lsZW50U2lnbkluKCl7cmV0dXJuIFQuaXNTaWxlbnRTdGF0ZVByZXNlbnRJblVSTCgpfXN0YXRpYyB3YXNTaWduSW5DYWxsZWQoKXtyZXR1cm4hKCFULmhhc0Vycm9ySW5VUkwoKSYmIVQuaGFzQXV0aFNlYXJjaFBhcmFtc0luVVJMKCl8fHRoaXMuaXNTaWxlbnRTdGF0ZVByZXNlbnRJblVSTCgpKX1zdGF0aWMgd2FzU2lsZW50U2lnbkluQ2FsbGVkKCl7Y29uc3QgZT1zZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJpbml0aWFsaXplZC1zaWxlbnQtc2lnbi1pbiIpLHQ9ZT9KU09OLnBhcnNlKGUpOm51bGw7cmV0dXJuIEJvb2xlYW4odCl9c3RhdGljIGlzU2lnbk91dFN1Y2Nlc3NmdWwoKXtyZXR1cm4gZSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2lmKGcuaXNTaWduT3V0U3VjY2Vzc2Z1bCh3aW5kb3cubG9jYXRpb24uaHJlZikpe2NvbnN0IGU9d2luZG93LmxvY2F0aW9uLmhyZWYuc3BsaXQoIj8iKVswXTtyZXR1cm4gaGlzdG9yeS5wdXNoU3RhdGUoe30sZG9jdW1lbnQudGl0bGUsZSkseWllbGQgZy5jbGVhclVzZXJTZXNzaW9uRGF0YSgpLCEwfXJldHVybiExfSkpfXN0YXRpYyBkaWRTaWduT3V0RmFpbCgpe2lmKGcuZGlkU2lnbk91dEZhaWwod2luZG93LmxvY2F0aW9uLmhyZWYpKXtjb25zdCBlPW5ldyBVUkwod2luZG93LmxvY2F0aW9uLmhyZWYpLHQ9ZS5zZWFyY2hQYXJhbXMuZ2V0KF8pLG49ZS5zZWFyY2hQYXJhbXMuZ2V0KFMpLHI9d2luZG93LmxvY2F0aW9uLmhyZWYuc3BsaXQoIj8iKVswXTtyZXR1cm4gaGlzdG9yeS5wdXNoU3RhdGUoe30sZG9jdW1lbnQudGl0bGUscikse2Rlc2NyaXB0aW9uOm51bGwhPW4/bjoiIixlcnJvcjpudWxsIT10P3Q6IiJ9fXJldHVybiExfXN0YXRpYyBpc1NpbGVudFN0YXRlUHJlc2VudEluVVJMKCl7dmFyIGU7Y29uc3QgdD1uZXcgVVJMKHdpbmRvdy5sb2NhdGlvbi5ocmVmKS5zZWFyY2hQYXJhbXMuZ2V0KCJzdGF0ZSIpO3JldHVybiBudWxsIT09KGU9bnVsbD09dD92b2lkIDA6dC5pbmNsdWRlcygic2lnbi1pbi1zaWxlbnRseSIpKSYmdm9pZCAwIT09ZSYmZX1zdGF0aWMgaGFzQXV0aFNlYXJjaFBhcmFtc0luVVJMKCl7bGV0IGU9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOndpbmRvdy5sb2NhdGlvbi5zZWFyY2g7cmV0dXJuL1s/Jl1jb2RlPVteJl0rLy50ZXN0KGUpfXN0YXRpYyBoYXNFcnJvckluVVJMKCl7bGV0IGU9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOndpbmRvdy5sb2NhdGlvbi5ocmVmO2NvbnN0IHQ9bmV3IFVSTChlKTtyZXR1cm4hIXQuc2VhcmNoUGFyYW1zLmdldChfKSYmInNpZ25fb3V0X3N1Y2Nlc3MiIT09dC5zZWFyY2hQYXJhbXMuZ2V0KCJzdGF0ZSIpfXN0YXRpYyBjYW5TZW5kUHJvbXB0Tm9uZVJlcXVlc3QoKXtjb25zdCBlPXNlc3Npb25TdG9yYWdlLmdldEl0ZW0odyk7cmV0dXJuIShlP0pTT04ucGFyc2UoZSk6bnVsbCl9c3RhdGljIHNldFByb21wdE5vbmVSZXF1ZXN0U2VudChlKXtzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKHcsSlNPTi5zdHJpbmdpZnkoZSkpfXN0YXRpYyB3YWl0VGlsbFBhZ2VSZWRpcmVjdCh0KXtyZXR1cm4gZSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2NvbnN0IGU9bnVsbCE9dD90OjNlMzt5aWVsZCBuZXcgUHJvbWlzZSgodD0+c2V0VGltZW91dCh0LDFlMyplKSkpfSkpfX1jbGFzcyBBe2NvbnN0cnVjdG9yKGUsdCl7dGhpcy5fYXV0aGVudGljYXRpb25DbGllbnQ9ZSx0aGlzLl9kYXRhTGF5ZXI9dGhpcy5fYXV0aGVudGljYXRpb25DbGllbnQuZ2V0RGF0YUxheWVyKCksdGhpcy5fc3BhSGVscGVyPXQsdGhpcy5faW5zdGFuY2VJRD10aGlzLl9hdXRoZW50aWNhdGlvbkNsaWVudC5nZXRJbnN0YW5jZUlEKCl9ZW5hYmxlSHR0cEhhbmRsZXIoZSl7KG51bGw9PWU/dm9pZCAwOmUuZW5hYmxlSGFuZGxlcikmJmUuZW5hYmxlSGFuZGxlcigpfWRpc2FibGVIdHRwSGFuZGxlcihlKXsobnVsbD09ZT92b2lkIDA6ZS5kaXNhYmxlSGFuZGxlcikmJmUuZGlzYWJsZUhhbmRsZXIoKX1pbml0aWFsaXplU2Vzc2lvbk1hbmdlcihlLHQsbixyLGkpe3ZhciBvLHMsYTtpLmluaXRpYWxpemUoZS5jbGllbnRJRCxudWxsIT09KG89dC5jaGVja1Nlc3Npb25JZnJhbWUpJiZ2b2lkIDAhPT1vP286IiIsbixudWxsIT09KHM9ZS5jaGVja1Nlc3Npb25JbnRlcnZhbCkmJnZvaWQgMCE9PXM/czozLG51bGwhPT0oYT1lLnNlc3Npb25SZWZyZXNoSW50ZXJ2YWwpJiZ2b2lkIDAhPT1hP2E6MzAwLGUuc2lnbkluUmVkaXJlY3RVUkwscil9cmVxdWVzdEN1c3RvbUdyYW50KHQsbil7dmFyIHIsaSxvO3JldHVybiBlKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7bGV0IHM9ITAsYT0hMTtpZihudWxsPT10P3ZvaWQgMDp0LnRva2VuRW5kcG9pbnQpe3M9ITE7Zm9yKGNvbnN0IGUgb2ZbLi4ubnVsbCE9PShpPW51bGw9PT0ocj15aWVsZCB0aGlzLl9kYXRhTGF5ZXIuZ2V0Q29uZmlnRGF0YSgpKXx8dm9pZCAwPT09cj92b2lkIDA6ci5yZXNvdXJjZVNlcnZlclVSTHMpJiZ2b2lkIDAhPT1pP2k6W10sdC5iYXNlVXJsXSlpZihlJiYobnVsbD09PShvPXQudG9rZW5FbmRwb2ludCl8fHZvaWQgMD09PW8/dm9pZCAwOm8uc3RhcnRzV2l0aChlKSkpe2E9ITA7YnJlYWt9fXJldHVybiB0LnNob3VsZFJlcGxheUFmdGVyUmVmcmVzaCYmdGhpcy5fZGF0YUxheWVyLnNldFRlbXBvcmFyeURhdGFQYXJhbWV0ZXIoYixKU09OLnN0cmluZ2lmeSh0KSksc3x8YT90aGlzLl9hdXRoZW50aWNhdGlvbkNsaWVudC5yZXF1ZXN0Q3VzdG9tR3JhbnQodCkudGhlbigocj0+ZSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3JldHVybiBuJiYiZnVuY3Rpb24iPT10eXBlb2YgbiYmbih0KSx0LnJldHVybnNTZXNzaW9uPyh0aGlzLl9zcGFIZWxwZXIucmVmcmVzaEFjY2Vzc1Rva2VuQXV0b21hdGljYWxseSh0aGlzKSx0aGlzLl9hdXRoZW50aWNhdGlvbkNsaWVudC5nZXRCYXNpY1VzZXJJbmZvKCkpOnJ9KSkpKS5jYXRjaCgoZT0+UHJvbWlzZS5yZWplY3QoZSkpKTpQcm9taXNlLnJlamVjdChuZXcgYygiU1BBLU1BSU5fVEhSRUFEX0NMSUVOVC1SQ0ctSVYwMSIsIlJlcXVlc3QgdG8gdGhlIHByb3ZpZGVkIGVuZHBvaW50IGlzIHByb2hpYml0ZWQuIiwiUmVxdWVzdHMgY2FuIG9ubHkgYmUgc2VudCB0byByZXNvdXJjZSBzZXJ2ZXJzIHNwZWNpZmllZCBieSB0aGUgYHJlc291cmNlU2VydmVyVVJMc2AgYXR0cmlidXRlIHdoaWxlIGluaXRpYWxpemluZyB0aGUgU0RLLiBUaGUgc3BlY2lmaWVkIHRva2VuIGVuZHBvaW50IGluIHRoaXMgcmVxdWVzdCBjYW5ub3QgYmUgZm91bmQgYW1vbmcgdGhlIGByZXNvdXJjZVNlcnZlclVSTHNgIikpfSkpfWdldEN1c3RvbUdyYW50Q29uZmlnRGF0YSgpe3JldHVybiBlKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7Y29uc3QgZT15aWVsZCB0aGlzLl9kYXRhTGF5ZXIuZ2V0VGVtcG9yYXJ5RGF0YVBhcmFtZXRlcihiKTtyZXR1cm4gZT9KU09OLnBhcnNlKGUpOm51bGx9KSl9cmVmcmVzaEFjY2Vzc1Rva2VuKHQpe3JldHVybiBlKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7dHJ5e3lpZWxkIHRoaXMuX2F1dGhlbnRpY2F0aW9uQ2xpZW50LnJlZnJlc2hBY2Nlc3NUb2tlbigpO2NvbnN0IGU9eWllbGQgdGhpcy5nZXRDdXN0b21HcmFudENvbmZpZ0RhdGEoKTtyZXR1cm4gZSYmKHlpZWxkIHRoaXMucmVxdWVzdEN1c3RvbUdyYW50KGUsdCkpLHRoaXMuX3NwYUhlbHBlci5yZWZyZXNoQWNjZXNzVG9rZW5BdXRvbWF0aWNhbGx5KHRoaXMpLHRoaXMuX2F1dGhlbnRpY2F0aW9uQ2xpZW50LmdldEJhc2ljVXNlckluZm8oKX1jYXRjaChlKXtjb25zdCB0PXt0eXBlOiJyZWZyZXNoLWFjY2Vzcy10b2tlbi1lcnJvciJ9O3JldHVybiB3aW5kb3cucG9zdE1lc3NhZ2UodCksUHJvbWlzZS5yZWplY3QoZSl9fSkpfWh0dHBSZXF1ZXN0KHQsbixyLGksbyxzKXt2YXIgYSx1O3JldHVybiBlKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7bGV0IGw9ITE7Y29uc3QgZD15aWVsZCB0aGlzLl9kYXRhTGF5ZXIuZ2V0Q29uZmlnRGF0YSgpO2Zvcihjb25zdCBlIG9mWy4uLm51bGwhPT0oYT15aWVsZCBudWxsPT1kP3ZvaWQgMDpkLnJlc291cmNlU2VydmVyVVJMcykmJnZvaWQgMCE9PWE/YTpbXSxkLmJhc2VVcmxdKWlmKGUmJihudWxsPT09KHU9bnVsbD09bj92b2lkIDA6bi51cmwpfHx2b2lkIDA9PT11P3ZvaWQgMDp1LnN0YXJ0c1dpdGgoZSkpKXtsPSEwO2JyZWFrfXJldHVybiBsP3QucmVxdWVzdChuKS50aGVuKChlPT5Qcm9taXNlLnJlc29sdmUoZSkpKS5jYXRjaCgoYT0+ZSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3ZhciBlLHUsbDtpZig0MDE9PT0obnVsbD09PShlPW51bGw9PWE/dm9pZCAwOmEucmVzcG9uc2UpfHx2b2lkIDA9PT1lP3ZvaWQgMDplLnN0YXR1cyl8fCEobnVsbD09YT92b2lkIDA6YS5yZXNwb25zZSkpe2xldCBlO3RyeXtlPXlpZWxkIHRoaXMucmVmcmVzaEFjY2Vzc1Rva2VuKHMpfWNhdGNoKGUpe3Rocm93IHImJigiZnVuY3Rpb24iPT10eXBlb2YgaSYmKHlpZWxkIGkoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LGEpLHtjb2RlOmt9KSkpLCJmdW5jdGlvbiI9PXR5cGVvZiBvJiZvKCkpLG5ldyBjKCJTUEEtQVVUSF9IRUxQRVItSFItU0UwMSIsbnVsbCE9PSh1PW51bGw9PWU/dm9pZCAwOmUubmFtZSkmJnZvaWQgMCE9PXU/dToiUmVmcmVzaCB0b2tlbiByZXF1ZXN0IGZhaWxlZC4iLG51bGwhPT0obD1udWxsPT1lP3ZvaWQgMDplLm1lc3NhZ2UpJiZ2b2lkIDAhPT1sP2w6IkFuIGVycm9yIG9jY3VycmVkIHdoaWxlIHRyeWluZyB0byByZWZyZXNoIHRoZSBhY2Nlc3MgdG9rZW4gZm9sbG93aW5nIGEgNDAxIHJlc3BvbnNlIGZyb20gdGhlIHNlcnZlci4iKX1pZihlKXRyeXtjb25zdCBlPXlpZWxkIHQucmVxdWVzdChuKTtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGUpfWNhdGNoKGUpe3JldHVybiByJiYoImZ1bmN0aW9uIj09dHlwZW9mIGkmJih5aWVsZCBpKGUpKSwiZnVuY3Rpb24iPT10eXBlb2YgbyYmbygpKSxQcm9taXNlLnJlamVjdChlKX19cmV0dXJuIHImJigiZnVuY3Rpb24iPT10eXBlb2YgaSYmKHlpZWxkIGkoYSkpLCJmdW5jdGlvbiI9PXR5cGVvZiBvJiZvKCkpLFByb21pc2UucmVqZWN0KGEpfSkpKSk6UHJvbWlzZS5yZWplY3QobmV3IGMoIlNQQS1BVVRIX0hFTFBFUi1IUi1JVjAyIiwiUmVxdWVzdCB0byB0aGUgcHJvdmlkZWQgZW5kcG9pbnQgaXMgcHJvaGliaXRlZC4iLCJSZXF1ZXN0cyBjYW4gb25seSBiZSBzZW50IHRvIHJlc291cmNlIHNlcnZlcnMgc3BlY2lmaWVkIGJ5IHRoZSBgcmVzb3VyY2VTZXJ2ZXJVUkxzYCBhdHRyaWJ1dGUgd2hpbGUgaW5pdGlhbGl6aW5nIHRoZSBTREsuIFRoZSBzcGVjaWZpZWQgZW5kcG9pbnQgaW4gdGhpcyByZXF1ZXN0IGNhbm5vdCBiZSBmb3VuZCBhbW9uZyB0aGUgYHJlc291cmNlU2VydmVyVVJMc2AiKSl9KSl9aHR0cFJlcXVlc3RBbGwodCxuLHIsaSxvKXt2YXIgcyxhLHU7cmV0dXJuIGUodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtsZXQgbD0hMDtjb25zdCBkPXlpZWxkIHRoaXMuX2RhdGFMYXllci5nZXRDb25maWdEYXRhKCk7Zm9yKGNvbnN0IGUgb2YgdCl7bGV0IHQ9ITE7Zm9yKGNvbnN0IG4gb2ZbLi4ubnVsbCE9PShhPW51bGw9PT0ocz15aWVsZCBkKXx8dm9pZCAwPT09cz92b2lkIDA6cy5yZXNvdXJjZVNlcnZlclVSTHMpJiZ2b2lkIDAhPT1hP2E6W10sZC5iYXNlVXJsXSlpZihuJiYobnVsbD09PSh1PWUudXJsKXx8dm9pZCAwPT09dT92b2lkIDA6dS5zdGFydHNXaXRoKG4pKSl7dD0hMDticmVha31pZighdCl7bD0hMTticmVha319Y29uc3QgaD1bXTtpZihsKXJldHVybiB0LmZvckVhY2goKGU9PntoLnB1c2gobi5yZXF1ZXN0KGUpKX0pKSwobnVsbD09bj92b2lkIDA6bi5hbGwpJiZuLmFsbChoKS50aGVuKChlPT5Qcm9taXNlLnJlc29sdmUoZSkpKS5jYXRjaCgodD0+ZSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3ZhciBzLGEsdTtpZig0MDE9PT0obnVsbD09PShzPW51bGw9PXQ/dm9pZCAwOnQucmVzcG9uc2UpfHx2b2lkIDA9PT1zP3ZvaWQgMDpzLnN0YXR1cyl8fCEobnVsbD09dD92b2lkIDA6dC5yZXNwb25zZSkpe2xldCBzO3RyeXtzPXlpZWxkIHRoaXMuX2F1dGhlbnRpY2F0aW9uQ2xpZW50LnJlZnJlc2hBY2Nlc3NUb2tlbigpfWNhdGNoKGUpe3Rocm93IHImJigiZnVuY3Rpb24iPT10eXBlb2YgaSYmKHlpZWxkIGkoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LHQpLHtjb2RlOmt9KSkpLCJmdW5jdGlvbiI9PXR5cGVvZiBvJiZvKCkpLG5ldyBjKCJTUEEtQVVUSF9IRUxQRVItSFJBLVNFMDEiLG51bGwhPT0oYT1udWxsPT1lP3ZvaWQgMDplLm5hbWUpJiZ2b2lkIDAhPT1hP2E6IlJlZnJlc2ggdG9rZW4gcmVxdWVzdCBmYWlsZWQuIixudWxsIT09KHU9bnVsbD09ZT92b2lkIDA6ZS5tZXNzYWdlKSYmdm9pZCAwIT09dT91OiJBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSB0cnlpbmcgdG8gcmVmcmVzaCB0aGUgYWNjZXNzIHRva2VuIGZvbGxvd2luZyBhIDQwMSByZXNwb25zZSBmcm9tIHRoZSBzZXJ2ZXIuIil9aWYocylyZXR1cm4gbi5hbGwmJm4uYWxsKGgpLnRoZW4oKGU9PlByb21pc2UucmVzb2x2ZShlKSkpLmNhdGNoKCh0PT5lKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7cmV0dXJuIHImJigiZnVuY3Rpb24iPT10eXBlb2YgaSYmKHlpZWxkIGkodCkpLCJmdW5jdGlvbiI9PXR5cGVvZiBvJiZvKCkpLFByb21pc2UucmVqZWN0KHQpfSkpKSl9cmV0dXJuIHImJigiZnVuY3Rpb24iPT10eXBlb2YgaSYmKHlpZWxkIGkodCkpLCJmdW5jdGlvbiI9PXR5cGVvZiBvJiZvKCkpLFByb21pc2UucmVqZWN0KHQpfSkpKSk7dGhyb3cgbmV3IGMoIlNQQS1BVVRIX0hFTFBFUi1IUkEtSVYwMiIsIlJlcXVlc3QgdG8gdGhlIHByb3ZpZGVkIGVuZHBvaW50IGlzIHByb2hpYml0ZWQuIiwiUmVxdWVzdHMgY2FuIG9ubHkgYmUgc2VudCB0byByZXNvdXJjZSBzZXJ2ZXJzIHNwZWNpZmllZCBieSB0aGUgYHJlc291cmNlU2VydmVyVVJMc2AgYXR0cmlidXRlIHdoaWxlIGluaXRpYWxpemluZyB0aGUgU0RLLiBUaGUgc3BlY2lmaWVkIGVuZHBvaW50IGluIHRoaXMgcmVxdWVzdCBjYW5ub3QgYmUgZm91bmQgYW1vbmcgdGhlIGByZXNvdXJjZVNlcnZlclVSTHNgIil9KSl9cmVxdWVzdEFjY2Vzc1Rva2VuKHQsbixyLGksbyl7cmV0dXJuIGUodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtjb25zdCBzPXlpZWxkIHRoaXMuX2RhdGFMYXllci5nZXRDb25maWdEYXRhKCk7aWYocy5zdG9yYWdlPT09eS5Ccm93c2VyTWVtb3J5JiZzLmVuYWJsZVBLQ0UmJm4pe2NvbnN0IGU9VC5nZXRQS0NFKHUuZXh0cmFjdFBLQ0VLZXlGcm9tU3RhdGVQYXJhbShuKSk7eWllbGQgdGhpcy5fYXV0aGVudGljYXRpb25DbGllbnQuc2V0UEtDRUNvZGUodS5leHRyYWN0UEtDRUtleUZyb21TdGF0ZVBhcmFtKG4pLGUpfWVsc2Ugcy5zdG9yYWdlPT09eS5XZWJXb3JrZXImJmkmJih5aWVsZCB0aGlzLl9hdXRoZW50aWNhdGlvbkNsaWVudC5zZXRQS0NFQ29kZShpLG51bGwhPW8/bzoiIikpO3JldHVybiB0P3RoaXMuX2F1dGhlbnRpY2F0aW9uQ2xpZW50LnJlcXVlc3RBY2Nlc3NUb2tlbih0LG51bGwhPW4/bjoiIixudWxsIT1vP286IiIpLnRoZW4oKCgpPT5lKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7cmV0dXJuIHMuc3RvcmFnZSE9PXkuV2ViV29ya2VyPyhULnNldFNpZ25PdXRVUkwoeWllbGQgdGhpcy5fYXV0aGVudGljYXRpb25DbGllbnQuZ2V0U2lnbk91dFVSTCgpLHMuY2xpZW50SUQsdGhpcy5faW5zdGFuY2VJRCksdGhpcy5fc3BhSGVscGVyJiYodGhpcy5fc3BhSGVscGVyLmNsZWFyUmVmcmVzaFRva2VuVGltZW91dCgpLHRoaXMuX3NwYUhlbHBlci5yZWZyZXNoQWNjZXNzVG9rZW5BdXRvbWF0aWNhbGx5KHRoaXMpKSxyJiYiZnVuY3Rpb24iPT10eXBlb2YgciYmcy5lbmFibGVPSURDU2Vzc2lvbk1hbmFnZW1lbnQmJnIoKSk6dGhpcy5fc3BhSGVscGVyJiZ0aGlzLl9zcGFIZWxwZXIucmVmcmVzaEFjY2Vzc1Rva2VuQXV0b21hdGljYWxseSh0aGlzKSx0aGlzLl9hdXRoZW50aWNhdGlvbkNsaWVudC5nZXRCYXNpY1VzZXJJbmZvKCl9KSkpKS5jYXRjaCgoZT0+UHJvbWlzZS5yZWplY3QoZSkpKTpQcm9taXNlLnJlamVjdChuZXcgYygiU1BBLUFVVEhfSEVMUEVSLVJBVDEtTkYwMSIsIk5vIGF1dGhvcml6YXRpb24gY29kZS4iLCJObyBhdXRob3JpemF0aW9uIGNvZGUgd2FzIGZvdW5kLiIpKX0pKX10cnlTaWduSW5TaWxlbnRseSh0LG4scil7dmFyIGk7cmV0dXJuIGUodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtpZihULmlzSW5pdGlhbGl6ZWRTaWxlbnRTaWduSW4oKSlyZXR1cm4geWllbGQgci5yZWNlaXZlUHJvbXB0Tm9uZVJlc3BvbnNlKCksUHJvbWlzZS5yZXNvbHZlKHthbGxvd2VkU2NvcGVzOiIiLGRpc3BsYXlOYW1lOiIiLGVtYWlsOiIiLHNlc3Npb25TdGF0ZToiIixzdWI6IiIsdGVuYW50RG9tYWluOiIiLHVzZXJuYW1lOiIifSk7Y29uc3Qgbz1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgicnBJRnJhbWUiKSxzPW51bGw9PT0oaT1udWxsPT1vP3ZvaWQgMDpvLmNvbnRlbnREb2N1bWVudCl8fHZvaWQgMD09PWk/dm9pZCAwOmkuZ2V0RWxlbWVudEJ5SWQoInByb21wdE5vbmVJRnJhbWUiKTt0cnl7Y29uc3QgZT15aWVsZCB0KCk7cy5zcmM9ZX1jYXRjaChlKXtyZXR1cm4gUHJvbWlzZS5yZWplY3QoZSl9cmV0dXJuIG5ldyBQcm9taXNlKCgodCxyKT0+e2NvbnN0IGk9c2V0VGltZW91dCgoKCk9Pnt0KCExKX0pLDFlNCksbz1zPT5lKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7dmFyIGUsYSxjLHU7Y29uc3QgbD1zLmRhdGE7ImNoZWNrX3Nlc3Npb25fc2lnbmVkX291dCI9PShudWxsPT1sP3ZvaWQgMDpsLnR5cGUpJiYod2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLG8pLGNsZWFyVGltZW91dChpKSx0KCExKSksImNoZWNrX3Nlc3Npb25fc2lnbmVkX2luIj09KG51bGw9PWw/dm9pZCAwOmwudHlwZSkmJihudWxsPT09KGU9bnVsbD09bD92b2lkIDA6bC5kYXRhKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5jb2RlKSYmbihudWxsPT09KGE9bnVsbD09bD92b2lkIDA6bC5kYXRhKXx8dm9pZCAwPT09YT92b2lkIDA6YS5jb2RlLG51bGw9PT0oYz1udWxsPT1sP3ZvaWQgMDpsLmRhdGEpfHx2b2lkIDA9PT1jP3ZvaWQgMDpjLnNlc3Npb25TdGF0ZSxudWxsPT09KHU9bnVsbD09bD92b2lkIDA6bC5kYXRhKXx8dm9pZCAwPT09dT92b2lkIDA6dS5zdGF0ZSkudGhlbigoZT0+e3dpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCJtZXNzYWdlIixvKSx0KGUpfSkpLmNhdGNoKChlPT57d2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLG8pLHIoZSl9KSkuZmluYWxseSgoKCk9PntjbGVhclRpbWVvdXQoaSl9KSl9KSk7d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLG8pfSkpfSkpfWhhbmRsZVNpZ25Jbih0LG4scil7cmV0dXJuIGUodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtjb25zdCBlPXlpZWxkIHRoaXMuX2RhdGFMYXllci5nZXRDb25maWdEYXRhKCk7aWYoeWllbGQgdCgpKXJldHVybiBQcm9taXNlLnJlc29sdmUoe2FsbG93ZWRTY29wZXM6IiIsZGlzcGxheU5hbWU6IiIsZW1haWw6IiIsc2Vzc2lvblN0YXRlOiIiLHN1YjoiIix0ZW5hbnREb21haW46IiIsdXNlcm5hbWU6IiJ9KTtpZihlLnN0b3JhZ2UhPT15LldlYldvcmtlciYmKHlpZWxkIHRoaXMuX2F1dGhlbnRpY2F0aW9uQ2xpZW50LmlzQXV0aGVudGljYXRlZCgpKSlyZXR1cm4gdGhpcy5fc3BhSGVscGVyLmNsZWFyUmVmcmVzaFRva2VuVGltZW91dCgpLHRoaXMuX3NwYUhlbHBlci5yZWZyZXNoQWNjZXNzVG9rZW5BdXRvbWF0aWNhbGx5KHRoaXMpLGUuZW5hYmxlT0lEQ1Nlc3Npb25NYW5hZ2VtZW50JiZuKCksUHJvbWlzZS5yZXNvbHZlKHlpZWxkIHRoaXMuX2F1dGhlbnRpY2F0aW9uQ2xpZW50LmdldEJhc2ljVXNlckluZm8oKSk7Y29uc3QgaT1uZXcgVVJMKHdpbmRvdy5sb2NhdGlvbi5ocmVmKS5zZWFyY2hQYXJhbXMuZ2V0KF8pLG89bmV3IFVSTCh3aW5kb3cubG9jYXRpb24uaHJlZikuc2VhcmNoUGFyYW1zLmdldChTKTtpZihpKXtjb25zdCBlPW5ldyBVUkwod2luZG93LmxvY2F0aW9uLmhyZWYpO3Rocm93IGUuc2VhcmNoUGFyYW1zLmRlbGV0ZShfKSxlLnNlYXJjaFBhcmFtcy5kZWxldGUoUyksaGlzdG9yeS5wdXNoU3RhdGUobnVsbCxkb2N1bWVudC50aXRsZSxlLnRvU3RyaW5nKCkpLG5ldyBjKCJTUEEtQVVUSF9IRUxQRVItU0ktU0UwMSIsaSxudWxsIT1vP286IiIpfWlmKGUuc3RvcmFnZT09PXkuV2ViV29ya2VyJiZyKXtjb25zdCBlPXlpZWxkIHIoKTtpZihlKXJldHVybiBlfX0pKX1hdHRhY2hUb2tlblRvUmVxdWVzdENvbmZpZyh0KXtyZXR1cm4gZSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2NvbnN0IGU9T2JqZWN0LmFzc2lnbih7YXR0YWNoVG9rZW46ITB9LHQpO2UuYXR0YWNoVG9rZW4mJihlLnNob3VsZEF0dGFjaElEUEFjY2Vzc1Rva2VuP3QuaGVhZGVycz1PYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sdC5oZWFkZXJzKSx7QXV0aG9yaXphdGlvbjoiQmVhcmVyICIuY29uY2F0KHlpZWxkIHRoaXMuZ2V0SURQQWNjZXNzVG9rZW4oKSl9KTp0LmhlYWRlcnM9T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LHQuaGVhZGVycykse0F1dGhvcml6YXRpb246IkJlYXJlciAiLmNvbmNhdCh5aWVsZCB0aGlzLmdldEFjY2Vzc1Rva2VuKCkpfSkpfSkpfWdldEJhc2ljVXNlckluZm8oKXtyZXR1cm4gZSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3JldHVybiB0aGlzLl9hdXRoZW50aWNhdGlvbkNsaWVudC5nZXRCYXNpY1VzZXJJbmZvKCl9KSl9Z2V0RGVjb2RlZElEVG9rZW4oKXtyZXR1cm4gZSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3JldHVybiB0aGlzLl9hdXRoZW50aWNhdGlvbkNsaWVudC5nZXREZWNvZGVkSURUb2tlbigpfSkpfWdldERlY29kZWRJRFBJRFRva2VuKCl7cmV0dXJuIGUodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtyZXR1cm4gdGhpcy5fYXV0aGVudGljYXRpb25DbGllbnQuZ2V0RGVjb2RlZElEVG9rZW4oKX0pKX1nZXRDcnlwdG9IZWxwZXIoKXtyZXR1cm4gZSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3JldHVybiB0aGlzLl9hdXRoZW50aWNhdGlvbkNsaWVudC5nZXRDcnlwdG9IZWxwZXIoKX0pKX1nZXRJRFRva2VuKCl7cmV0dXJuIGUodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtyZXR1cm4gdGhpcy5fYXV0aGVudGljYXRpb25DbGllbnQuZ2V0SURUb2tlbigpfSkpfWdldE9JRENTZXJ2aWNlRW5kcG9pbnRzKCl7cmV0dXJuIGUodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtyZXR1cm4gdGhpcy5fYXV0aGVudGljYXRpb25DbGllbnQuZ2V0T0lEQ1NlcnZpY2VFbmRwb2ludHMoKX0pKX1nZXRBY2Nlc3NUb2tlbigpe3JldHVybiBlKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7cmV0dXJuIHRoaXMuX2F1dGhlbnRpY2F0aW9uQ2xpZW50LmdldEFjY2Vzc1Rva2VuKCl9KSl9Z2V0SURQQWNjZXNzVG9rZW4oKXt2YXIgdDtyZXR1cm4gZSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3JldHVybiBudWxsPT09KHQ9eWllbGQgdGhpcy5fZGF0YUxheWVyLmdldFNlc3Npb25EYXRhKCkpfHx2b2lkIDA9PT10P3ZvaWQgMDp0LmFjY2Vzc190b2tlbn0pKX1nZXREYXRhTGF5ZXIoKXtyZXR1cm4gdGhpcy5fZGF0YUxheWVyfWlzQXV0aGVudGljYXRlZCgpe3JldHVybiBlKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7cmV0dXJuIHRoaXMuX2F1dGhlbnRpY2F0aW9uQ2xpZW50LmlzQXV0aGVudGljYXRlZCgpfSkpfX1jbGFzcyBSe2NvbnN0cnVjdG9yKGUpe3RoaXMuX2F1dGhlbnRpY2F0aW9uQ2xpZW50PWUsdGhpcy5fZGF0YUxheWVyPXRoaXMuX2F1dGhlbnRpY2F0aW9uQ2xpZW50LmdldERhdGFMYXllcigpfXJlZnJlc2hBY2Nlc3NUb2tlbkF1dG9tYXRpY2FsbHkodCl7cmV0dXJuIGUodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtjb25zdCBuPXlpZWxkIHRoaXMuX2RhdGFMYXllci5nZXRTZXNzaW9uRGF0YSgpO2lmKG4ucmVmcmVzaF90b2tlbil7Y29uc3Qgcj1wYXJzZUludChuLmV4cGlyZXNfaW4pLG89c2V0VGltZW91dCgoKCk9PmUodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXt5aWVsZCB0LnJlZnJlc2hBY2Nlc3NUb2tlbigpfSkpKSwxZTMqKHI8PTEwP3I6ci0xMCkpO3lpZWxkIHRoaXMuX2RhdGFMYXllci5zZXRUZW1wb3JhcnlEYXRhUGFyYW1ldGVyKGksSlNPTi5zdHJpbmdpZnkobykpfX0pKX1nZXRSZWZyZXNoVGltZW91dFRpbWVyKCl7cmV0dXJuIGUodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtyZXR1cm4oeWllbGQgdGhpcy5fZGF0YUxheWVyLmdldFRlbXBvcmFyeURhdGFQYXJhbWV0ZXIoaSkpP0pTT04ucGFyc2UoeWllbGQgdGhpcy5fZGF0YUxheWVyLmdldFRlbXBvcmFyeURhdGFQYXJhbWV0ZXIoaSkpOi0xfSkpfWNsZWFyUmVmcmVzaFRva2VuVGltZW91dCh0KXtyZXR1cm4gZSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2lmKHQpcmV0dXJuIHZvaWQgY2xlYXJUaW1lb3V0KHQpO2NvbnN0IGU9eWllbGQgdGhpcy5nZXRSZWZyZXNoVGltZW91dFRpbWVyKCk7LTEhPT1lJiZjbGVhclRpbWVvdXQoZSl9KSl9fXZhciBDPSJ1bmRlZmluZWQiIT10eXBlb2YgZ2xvYmFsVGhpcz9nbG9iYWxUaGlzOiJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93P3dpbmRvdzoidW5kZWZpbmVkIiE9dHlwZW9mIGdsb2JhbD9nbG9iYWw6InVuZGVmaW5lZCIhPXR5cGVvZiBzZWxmP3NlbGY6e307ZnVuY3Rpb24gRChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlJiZPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSwiZGVmYXVsdCIpP2UuZGVmYXVsdDplfWZ1bmN0aW9uIFAoZSl7aWYoZS5fX2VzTW9kdWxlKXJldHVybiBlO3ZhciB0PU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7cmV0dXJuIE9iamVjdC5rZXlzKGUpLmZvckVhY2goKGZ1bmN0aW9uKG4pe3ZhciByPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSxuKTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxuLHIuZ2V0P3I6e2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGVbbl19fSl9KSksdH12YXIgST17ZXhwb3J0czp7fX0sTz1mdW5jdGlvbihlLHQpe3JldHVybiBmdW5jdGlvbigpe2Zvcih2YXIgbj1uZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCkscj0wO3I8bi5sZW5ndGg7cisrKW5bcl09YXJndW1lbnRzW3JdO3JldHVybiBlLmFwcGx5KHQsbil9fSxVPU8sTD1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO2Z1bmN0aW9uIEgoZSl7cmV0dXJuIEFycmF5LmlzQXJyYXkoZSl9ZnVuY3Rpb24gTShlKXtyZXR1cm4gdm9pZCAwPT09ZX1mdW5jdGlvbiBqKGUpe3JldHVybiJbb2JqZWN0IEFycmF5QnVmZmVyXSI9PT1MLmNhbGwoZSl9ZnVuY3Rpb24gTihlKXtyZXR1cm4gbnVsbCE9PWUmJiJvYmplY3QiPT10eXBlb2YgZX1mdW5jdGlvbiBxKGUpe2lmKCJbb2JqZWN0IE9iamVjdF0iIT09TC5jYWxsKGUpKXJldHVybiExO3ZhciB0PU9iamVjdC5nZXRQcm90b3R5cGVPZihlKTtyZXR1cm4gbnVsbD09PXR8fHQ9PT1PYmplY3QucHJvdG90eXBlfWZ1bmN0aW9uIHgoZSl7cmV0dXJuIltvYmplY3QgRnVuY3Rpb25dIj09PUwuY2FsbChlKX1mdW5jdGlvbiBLKGUsdCl7aWYobnVsbCE9ZSlpZigib2JqZWN0IiE9dHlwZW9mIGUmJihlPVtlXSksSChlKSlmb3IodmFyIG49MCxyPWUubGVuZ3RoO248cjtuKyspdC5jYWxsKG51bGwsZVtuXSxuLGUpO2Vsc2UgZm9yKHZhciBpIGluIGUpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsaSkmJnQuY2FsbChudWxsLGVbaV0saSxlKX12YXIgQj17aXNBcnJheTpILGlzQXJyYXlCdWZmZXI6aixpc0J1ZmZlcjpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbCE9PWUmJiFNKGUpJiZudWxsIT09ZS5jb25zdHJ1Y3RvciYmIU0oZS5jb25zdHJ1Y3RvcikmJiJmdW5jdGlvbiI9PXR5cGVvZiBlLmNvbnN0cnVjdG9yLmlzQnVmZmVyJiZlLmNvbnN0cnVjdG9yLmlzQnVmZmVyKGUpfSxpc0Zvcm1EYXRhOmZ1bmN0aW9uKGUpe3JldHVybiJbb2JqZWN0IEZvcm1EYXRhXSI9PT1MLmNhbGwoZSl9LGlzQXJyYXlCdWZmZXJWaWV3OmZ1bmN0aW9uKGUpe3JldHVybiJ1bmRlZmluZWQiIT10eXBlb2YgQXJyYXlCdWZmZXImJkFycmF5QnVmZmVyLmlzVmlldz9BcnJheUJ1ZmZlci5pc1ZpZXcoZSk6ZSYmZS5idWZmZXImJmooZS5idWZmZXIpfSxpc1N0cmluZzpmdW5jdGlvbihlKXtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIGV9LGlzTnVtYmVyOmZ1bmN0aW9uKGUpe3JldHVybiJudW1iZXIiPT10eXBlb2YgZX0saXNPYmplY3Q6Tixpc1BsYWluT2JqZWN0OnEsaXNVbmRlZmluZWQ6TSxpc0RhdGU6ZnVuY3Rpb24oZSl7cmV0dXJuIltvYmplY3QgRGF0ZV0iPT09TC5jYWxsKGUpfSxpc0ZpbGU6ZnVuY3Rpb24oZSl7cmV0dXJuIltvYmplY3QgRmlsZV0iPT09TC5jYWxsKGUpfSxpc0Jsb2I6ZnVuY3Rpb24oZSl7cmV0dXJuIltvYmplY3QgQmxvYl0iPT09TC5jYWxsKGUpfSxpc0Z1bmN0aW9uOngsaXNTdHJlYW06ZnVuY3Rpb24oZSl7cmV0dXJuIE4oZSkmJngoZS5waXBlKX0saXNVUkxTZWFyY2hQYXJhbXM6ZnVuY3Rpb24oZSl7cmV0dXJuIltvYmplY3QgVVJMU2VhcmNoUGFyYW1zXSI9PT1MLmNhbGwoZSl9LGlzU3RhbmRhcmRCcm93c2VyRW52OmZ1bmN0aW9uKCl7cmV0dXJuKCJ1bmRlZmluZWQiPT10eXBlb2YgbmF2aWdhdG9yfHwiUmVhY3ROYXRpdmUiIT09bmF2aWdhdG9yLnByb2R1Y3QmJiJOYXRpdmVTY3JpcHQiIT09bmF2aWdhdG9yLnByb2R1Y3QmJiJOUyIhPT1uYXZpZ2F0b3IucHJvZHVjdCkmJigidW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdyYmInVuZGVmaW5lZCIhPXR5cGVvZiBkb2N1bWVudCl9LGZvckVhY2g6SyxtZXJnZTpmdW5jdGlvbiBlKCl7dmFyIHQ9e307ZnVuY3Rpb24gbihuLHIpe3EodFtyXSkmJnEobik/dFtyXT1lKHRbcl0sbik6cShuKT90W3JdPWUoe30sbik6SChuKT90W3JdPW4uc2xpY2UoKTp0W3JdPW59Zm9yKHZhciByPTAsaT1hcmd1bWVudHMubGVuZ3RoO3I8aTtyKyspSyhhcmd1bWVudHNbcl0sbik7cmV0dXJuIHR9LGV4dGVuZDpmdW5jdGlvbihlLHQsbil7cmV0dXJuIEsodCwoZnVuY3Rpb24odCxyKXtlW3JdPW4mJiJmdW5jdGlvbiI9PXR5cGVvZiB0P1UodCxuKTp0fSkpLGV9LHRyaW06ZnVuY3Rpb24oZSl7cmV0dXJuIGUudHJpbT9lLnRyaW0oKTplLnJlcGxhY2UoL15ccyt8XHMrJC9nLCIiKX0sc3RyaXBCT006ZnVuY3Rpb24oZSl7cmV0dXJuIDY1Mjc5PT09ZS5jaGFyQ29kZUF0KDApJiYoZT1lLnNsaWNlKDEpKSxlfX0sSj1CO2Z1bmN0aW9uIEYoZSl7cmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudChlKS5yZXBsYWNlKC8lM0EvZ2ksIjoiKS5yZXBsYWNlKC8lMjQvZywiJCIpLnJlcGxhY2UoLyUyQy9naSwiLCIpLnJlcGxhY2UoLyUyMC9nLCIrIikucmVwbGFjZSgvJTVCL2dpLCJbIikucmVwbGFjZSgvJTVEL2dpLCJdIil9dmFyIFc9ZnVuY3Rpb24oZSx0LG4pe2lmKCF0KXJldHVybiBlO3ZhciByO2lmKG4pcj1uKHQpO2Vsc2UgaWYoSi5pc1VSTFNlYXJjaFBhcmFtcyh0KSlyPXQudG9TdHJpbmcoKTtlbHNle3ZhciBpPVtdO0ouZm9yRWFjaCh0LChmdW5jdGlvbihlLHQpe251bGwhPWUmJihKLmlzQXJyYXkoZSk/dCs9IltdIjplPVtlXSxKLmZvckVhY2goZSwoZnVuY3Rpb24oZSl7Si5pc0RhdGUoZSk/ZT1lLnRvSVNPU3RyaW5nKCk6Si5pc09iamVjdChlKSYmKGU9SlNPTi5zdHJpbmdpZnkoZSkpLGkucHVzaChGKHQpKyI9IitGKGUpKX0pKSl9KSkscj1pLmpvaW4oIiYiKX1pZihyKXt2YXIgbz1lLmluZGV4T2YoIiMiKTstMSE9PW8mJihlPWUuc2xpY2UoMCxvKSksZSs9KC0xPT09ZS5pbmRleE9mKCI/Iik/Ij8iOiImIikrcn1yZXR1cm4gZX0sej1CO2Z1bmN0aW9uIFkoKXt0aGlzLmhhbmRsZXJzPVtdfVkucHJvdG90eXBlLnVzZT1mdW5jdGlvbihlLHQsbil7cmV0dXJuIHRoaXMuaGFuZGxlcnMucHVzaCh7ZnVsZmlsbGVkOmUscmVqZWN0ZWQ6dCxzeW5jaHJvbm91czohIW4mJm4uc3luY2hyb25vdXMscnVuV2hlbjpuP24ucnVuV2hlbjpudWxsfSksdGhpcy5oYW5kbGVycy5sZW5ndGgtMX0sWS5wcm90b3R5cGUuZWplY3Q9ZnVuY3Rpb24oZSl7dGhpcy5oYW5kbGVyc1tlXSYmKHRoaXMuaGFuZGxlcnNbZV09bnVsbCl9LFkucHJvdG90eXBlLmZvckVhY2g9ZnVuY3Rpb24oZSl7ei5mb3JFYWNoKHRoaXMuaGFuZGxlcnMsKGZ1bmN0aW9uKHQpe251bGwhPT10JiZlKHQpfSkpfTt2YXIgVj1ZLEc9InVuZGVmaW5lZCIhPXR5cGVvZiBnbG9iYWw/Z2xvYmFsOiJ1bmRlZmluZWQiIT10eXBlb2Ygc2VsZj9zZWxmOiJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93P3dpbmRvdzp7fTtmdW5jdGlvbiBYKCl7dGhyb3cgbmV3IEVycm9yKCJzZXRUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkIil9ZnVuY3Rpb24gJCgpe3Rocm93IG5ldyBFcnJvcigiY2xlYXJUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkIil9dmFyIFo9WCxRPSQ7ZnVuY3Rpb24gZWUoZSl7aWYoWj09PXNldFRpbWVvdXQpcmV0dXJuIHNldFRpbWVvdXQoZSwwKTtpZigoWj09PVh8fCFaKSYmc2V0VGltZW91dClyZXR1cm4gWj1zZXRUaW1lb3V0LHNldFRpbWVvdXQoZSwwKTt0cnl7cmV0dXJuIFooZSwwKX1jYXRjaCh0KXt0cnl7cmV0dXJuIFouY2FsbChudWxsLGUsMCl9Y2F0Y2godCl7cmV0dXJuIFouY2FsbCh0aGlzLGUsMCl9fX0iZnVuY3Rpb24iPT10eXBlb2YgRy5zZXRUaW1lb3V0JiYoWj1zZXRUaW1lb3V0KSwiZnVuY3Rpb24iPT10eXBlb2YgRy5jbGVhclRpbWVvdXQmJihRPWNsZWFyVGltZW91dCk7dmFyIHRlLG5lPVtdLHJlPSExLGllPS0xO2Z1bmN0aW9uIG9lKCl7cmUmJnRlJiYocmU9ITEsdGUubGVuZ3RoP25lPXRlLmNvbmNhdChuZSk6aWU9LTEsbmUubGVuZ3RoJiZzZSgpKX1mdW5jdGlvbiBzZSgpe2lmKCFyZSl7dmFyIGU9ZWUob2UpO3JlPSEwO2Zvcih2YXIgdD1uZS5sZW5ndGg7dDspe2Zvcih0ZT1uZSxuZT1bXTsrK2llPHQ7KXRlJiZ0ZVtpZV0ucnVuKCk7aWU9LTEsdD1uZS5sZW5ndGh9dGU9bnVsbCxyZT0hMSxmdW5jdGlvbihlKXtpZihRPT09Y2xlYXJUaW1lb3V0KXJldHVybiBjbGVhclRpbWVvdXQoZSk7aWYoKFE9PT0kfHwhUSkmJmNsZWFyVGltZW91dClyZXR1cm4gUT1jbGVhclRpbWVvdXQsY2xlYXJUaW1lb3V0KGUpO3RyeXtRKGUpfWNhdGNoKHQpe3RyeXtyZXR1cm4gUS5jYWxsKG51bGwsZSl9Y2F0Y2godCl7cmV0dXJuIFEuY2FsbCh0aGlzLGUpfX19KGUpfX1mdW5jdGlvbiBhZShlLHQpe3RoaXMuZnVuPWUsdGhpcy5hcnJheT10fWFlLnByb3RvdHlwZS5ydW49ZnVuY3Rpb24oKXt0aGlzLmZ1bi5hcHBseShudWxsLHRoaXMuYXJyYXkpfTtmdW5jdGlvbiBjZSgpe312YXIgdWU9Y2UsbGU9Y2UsZGU9Y2UsaGU9Y2UsZmU9Y2UscGU9Y2UsZ2U9Y2U7dmFyIHZlPUcucGVyZm9ybWFuY2V8fHt9LHllPXZlLm5vd3x8dmUubW96Tm93fHx2ZS5tc05vd3x8dmUub05vd3x8dmUud2Via2l0Tm93fHxmdW5jdGlvbigpe3JldHVybihuZXcgRGF0ZSkuZ2V0VGltZSgpfTt2YXIgbWU9bmV3IERhdGU7dmFyIHdlPXtuZXh0VGljazpmdW5jdGlvbihlKXt2YXIgdD1uZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aC0xKTtpZihhcmd1bWVudHMubGVuZ3RoPjEpZm9yKHZhciBuPTE7bjxhcmd1bWVudHMubGVuZ3RoO24rKyl0W24tMV09YXJndW1lbnRzW25dO25lLnB1c2gobmV3IGFlKGUsdCkpLDEhPT1uZS5sZW5ndGh8fHJlfHxlZShzZSl9LHRpdGxlOiJicm93c2VyIixicm93c2VyOiEwLGVudjp7fSxhcmd2OltdLHZlcnNpb246IiIsdmVyc2lvbnM6e30sb246dWUsYWRkTGlzdGVuZXI6bGUsb25jZTpkZSxvZmY6aGUscmVtb3ZlTGlzdGVuZXI6ZmUscmVtb3ZlQWxsTGlzdGVuZXJzOnBlLGVtaXQ6Z2UsYmluZGluZzpmdW5jdGlvbihlKXt0aHJvdyBuZXcgRXJyb3IoInByb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkIil9LGN3ZDpmdW5jdGlvbigpe3JldHVybiIvIn0sY2hkaXI6ZnVuY3Rpb24oZSl7dGhyb3cgbmV3IEVycm9yKCJwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQiKX0sdW1hc2s6ZnVuY3Rpb24oKXtyZXR1cm4gMH0saHJ0aW1lOmZ1bmN0aW9uKGUpe3ZhciB0PS4wMDEqeWUuY2FsbCh2ZSksbj1NYXRoLmZsb29yKHQpLHI9TWF0aC5mbG9vcih0JTEqMWU5KTtyZXR1cm4gZSYmKG4tPWVbMF0sKHItPWVbMV0pPDAmJihuLS0scis9MWU5KSksW24scl19LHBsYXRmb3JtOiJicm93c2VyIixyZWxlYXNlOnt9LGNvbmZpZzp7fSx1cHRpbWU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IERhdGUtbWUpLzFlM319LF9lPXdlLFNlPUIsYmU9ZnVuY3Rpb24oZSx0LG4scixpKXtyZXR1cm4gZS5jb25maWc9dCxuJiYoZS5jb2RlPW4pLGUucmVxdWVzdD1yLGUucmVzcG9uc2U9aSxlLmlzQXhpb3NFcnJvcj0hMCxlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybnttZXNzYWdlOnRoaXMubWVzc2FnZSxuYW1lOnRoaXMubmFtZSxkZXNjcmlwdGlvbjp0aGlzLmRlc2NyaXB0aW9uLG51bWJlcjp0aGlzLm51bWJlcixmaWxlTmFtZTp0aGlzLmZpbGVOYW1lLGxpbmVOdW1iZXI6dGhpcy5saW5lTnVtYmVyLGNvbHVtbk51bWJlcjp0aGlzLmNvbHVtbk51bWJlcixzdGFjazp0aGlzLnN0YWNrLGNvbmZpZzp0aGlzLmNvbmZpZyxjb2RlOnRoaXMuY29kZSxzdGF0dXM6dGhpcy5yZXNwb25zZSYmdGhpcy5yZXNwb25zZS5zdGF0dXM/dGhpcy5yZXNwb25zZS5zdGF0dXM6bnVsbH19LGV9LGtlPXtzaWxlbnRKU09OUGFyc2luZzohMCxmb3JjZWRKU09OUGFyc2luZzohMCxjbGFyaWZ5VGltZW91dEVycm9yOiExfSxFZT1iZSxUZT1mdW5jdGlvbihlLHQsbixyLGkpe3ZhciBvPW5ldyBFcnJvcihlKTtyZXR1cm4gRWUobyx0LG4scixpKX0sQWU9VGUsUmU9QixDZT1SZS5pc1N0YW5kYXJkQnJvd3NlckVudigpP3t3cml0ZTpmdW5jdGlvbihlLHQsbixyLGksbyl7dmFyIHM9W107cy5wdXNoKGUrIj0iK2VuY29kZVVSSUNvbXBvbmVudCh0KSksUmUuaXNOdW1iZXIobikmJnMucHVzaCgiZXhwaXJlcz0iK25ldyBEYXRlKG4pLnRvR01UU3RyaW5nKCkpLFJlLmlzU3RyaW5nKHIpJiZzLnB1c2goInBhdGg9IityKSxSZS5pc1N0cmluZyhpKSYmcy5wdXNoKCJkb21haW49IitpKSwhMD09PW8mJnMucHVzaCgic2VjdXJlIiksZG9jdW1lbnQuY29va2llPXMuam9pbigiOyAiKX0scmVhZDpmdW5jdGlvbihlKXt2YXIgdD1kb2N1bWVudC5jb29raWUubWF0Y2gobmV3IFJlZ0V4cCgiKF58O1xccyopKCIrZSsiKT0oW147XSopIikpO3JldHVybiB0P2RlY29kZVVSSUNvbXBvbmVudCh0WzNdKTpudWxsfSxyZW1vdmU6ZnVuY3Rpb24oZSl7dGhpcy53cml0ZShlLCIiLERhdGUubm93KCktODY0ZTUpfX06e3dyaXRlOmZ1bmN0aW9uKCl7fSxyZWFkOmZ1bmN0aW9uKCl7cmV0dXJuIG51bGx9LHJlbW92ZTpmdW5jdGlvbigpe319LERlPWZ1bmN0aW9uKGUpe3JldHVybi9eKFthLXpdW2EtelxkK1wtLl0qOik/XC9cLy9pLnRlc3QoZSl9LFBlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQ/ZS5yZXBsYWNlKC9cLyskLywiIikrIi8iK3QucmVwbGFjZSgvXlwvKy8sIiIpOmV9LEllPUIsT2U9WyJhZ2UiLCJhdXRob3JpemF0aW9uIiwiY29udGVudC1sZW5ndGgiLCJjb250ZW50LXR5cGUiLCJldGFnIiwiZXhwaXJlcyIsImZyb20iLCJob3N0IiwiaWYtbW9kaWZpZWQtc2luY2UiLCJpZi11bm1vZGlmaWVkLXNpbmNlIiwibGFzdC1tb2RpZmllZCIsImxvY2F0aW9uIiwibWF4LWZvcndhcmRzIiwicHJveHktYXV0aG9yaXphdGlvbiIsInJlZmVyZXIiLCJyZXRyeS1hZnRlciIsInVzZXItYWdlbnQiXSxVZT1CLExlPVVlLmlzU3RhbmRhcmRCcm93c2VyRW52KCk/ZnVuY3Rpb24oKXt2YXIgZSx0PS8obXNpZXx0cmlkZW50KS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCksbj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhIik7ZnVuY3Rpb24gcihlKXt2YXIgcj1lO3JldHVybiB0JiYobi5zZXRBdHRyaWJ1dGUoImhyZWYiLHIpLHI9bi5ocmVmKSxuLnNldEF0dHJpYnV0ZSgiaHJlZiIscikse2hyZWY6bi5ocmVmLHByb3RvY29sOm4ucHJvdG9jb2w/bi5wcm90b2NvbC5yZXBsYWNlKC86JC8sIiIpOiIiLGhvc3Q6bi5ob3N0LHNlYXJjaDpuLnNlYXJjaD9uLnNlYXJjaC5yZXBsYWNlKC9eXD8vLCIiKToiIixoYXNoOm4uaGFzaD9uLmhhc2gucmVwbGFjZSgvXiMvLCIiKToiIixob3N0bmFtZTpuLmhvc3RuYW1lLHBvcnQ6bi5wb3J0LHBhdGhuYW1lOiIvIj09PW4ucGF0aG5hbWUuY2hhckF0KDApP24ucGF0aG5hbWU6Ii8iK24ucGF0aG5hbWV9fXJldHVybiBlPXIod2luZG93LmxvY2F0aW9uLmhyZWYpLGZ1bmN0aW9uKHQpe3ZhciBuPVVlLmlzU3RyaW5nKHQpP3IodCk6dDtyZXR1cm4gbi5wcm90b2NvbD09PWUucHJvdG9jb2wmJm4uaG9zdD09PWUuaG9zdH19KCk6ZnVuY3Rpb24oKXtyZXR1cm4hMH07ZnVuY3Rpb24gSGUoZSl7dGhpcy5tZXNzYWdlPWV9SGUucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIkNhbmNlbCIrKHRoaXMubWVzc2FnZT8iOiAiK3RoaXMubWVzc2FnZToiIil9LEhlLnByb3RvdHlwZS5fX0NBTkNFTF9fPSEwO3ZhciBNZT1IZSxqZT1CLE5lPWZ1bmN0aW9uKGUsdCxuKXt2YXIgcj1uLmNvbmZpZy52YWxpZGF0ZVN0YXR1cztuLnN0YXR1cyYmciYmIXIobi5zdGF0dXMpP3QoQWUoIlJlcXVlc3QgZmFpbGVkIHdpdGggc3RhdHVzIGNvZGUgIituLnN0YXR1cyxuLmNvbmZpZyxudWxsLG4ucmVxdWVzdCxuKSk6ZShuKX0scWU9Q2UseGU9VyxLZT1mdW5jdGlvbihlLHQpe3JldHVybiBlJiYhRGUodCk/UGUoZSx0KTp0fSxCZT1mdW5jdGlvbihlKXt2YXIgdCxuLHIsaT17fTtyZXR1cm4gZT8oSWUuZm9yRWFjaChlLnNwbGl0KCJcbiIpLChmdW5jdGlvbihlKXtpZihyPWUuaW5kZXhPZigiOiIpLHQ9SWUudHJpbShlLnN1YnN0cigwLHIpKS50b0xvd2VyQ2FzZSgpLG49SWUudHJpbShlLnN1YnN0cihyKzEpKSx0KXtpZihpW3RdJiZPZS5pbmRleE9mKHQpPj0wKXJldHVybjtpW3RdPSJzZXQtY29va2llIj09PXQ/KGlbdF0/aVt0XTpbXSkuY29uY2F0KFtuXSk6aVt0XT9pW3RdKyIsICIrbjpufX0pKSxpKTppfSxKZT1MZSxGZT1UZSxXZT1rZSx6ZT1NZSxZZT1mdW5jdGlvbihlKXtyZXR1cm4gbmV3IFByb21pc2UoKGZ1bmN0aW9uKHQsbil7dmFyIHIsaT1lLmRhdGEsbz1lLmhlYWRlcnMscz1lLnJlc3BvbnNlVHlwZTtmdW5jdGlvbiBhKCl7ZS5jYW5jZWxUb2tlbiYmZS5jYW5jZWxUb2tlbi51bnN1YnNjcmliZShyKSxlLnNpZ25hbCYmZS5zaWduYWwucmVtb3ZlRXZlbnRMaXN0ZW5lcigiYWJvcnQiLHIpfWplLmlzRm9ybURhdGEoaSkmJmRlbGV0ZSBvWyJDb250ZW50LVR5cGUiXTt2YXIgYz1uZXcgWE1MSHR0cFJlcXVlc3Q7aWYoZS5hdXRoKXt2YXIgdT1lLmF1dGgudXNlcm5hbWV8fCIiLGw9ZS5hdXRoLnBhc3N3b3JkP3VuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChlLmF1dGgucGFzc3dvcmQpKToiIjtvLkF1dGhvcml6YXRpb249IkJhc2ljICIrYnRvYSh1KyI6IitsKX12YXIgZD1LZShlLmJhc2VVUkwsZS51cmwpO2Z1bmN0aW9uIGgoKXtpZihjKXt2YXIgcj0iZ2V0QWxsUmVzcG9uc2VIZWFkZXJzImluIGM/QmUoYy5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSk6bnVsbCxpPXtkYXRhOnMmJiJ0ZXh0IiE9PXMmJiJqc29uIiE9PXM/Yy5yZXNwb25zZTpjLnJlc3BvbnNlVGV4dCxzdGF0dXM6Yy5zdGF0dXMsc3RhdHVzVGV4dDpjLnN0YXR1c1RleHQsaGVhZGVyczpyLGNvbmZpZzplLHJlcXVlc3Q6Y307TmUoKGZ1bmN0aW9uKGUpe3QoZSksYSgpfSksKGZ1bmN0aW9uKGUpe24oZSksYSgpfSksaSksYz1udWxsfX1pZihjLm9wZW4oZS5tZXRob2QudG9VcHBlckNhc2UoKSx4ZShkLGUucGFyYW1zLGUucGFyYW1zU2VyaWFsaXplciksITApLGMudGltZW91dD1lLnRpbWVvdXQsIm9ubG9hZGVuZCJpbiBjP2Mub25sb2FkZW5kPWg6Yy5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXtjJiY0PT09Yy5yZWFkeVN0YXRlJiYoMCE9PWMuc3RhdHVzfHxjLnJlc3BvbnNlVVJMJiYwPT09Yy5yZXNwb25zZVVSTC5pbmRleE9mKCJmaWxlOiIpKSYmc2V0VGltZW91dChoKX0sYy5vbmFib3J0PWZ1bmN0aW9uKCl7YyYmKG4oRmUoIlJlcXVlc3QgYWJvcnRlZCIsZSwiRUNPTk5BQk9SVEVEIixjKSksYz1udWxsKX0sYy5vbmVycm9yPWZ1bmN0aW9uKCl7bihGZSgiTmV0d29yayBFcnJvciIsZSxudWxsLGMpKSxjPW51bGx9LGMub250aW1lb3V0PWZ1bmN0aW9uKCl7dmFyIHQ9ZS50aW1lb3V0PyJ0aW1lb3V0IG9mICIrZS50aW1lb3V0KyJtcyBleGNlZWRlZCI6InRpbWVvdXQgZXhjZWVkZWQiLHI9ZS50cmFuc2l0aW9uYWx8fFdlO2UudGltZW91dEVycm9yTWVzc2FnZSYmKHQ9ZS50aW1lb3V0RXJyb3JNZXNzYWdlKSxuKEZlKHQsZSxyLmNsYXJpZnlUaW1lb3V0RXJyb3I/IkVUSU1FRE9VVCI6IkVDT05OQUJPUlRFRCIsYykpLGM9bnVsbH0samUuaXNTdGFuZGFyZEJyb3dzZXJFbnYoKSl7dmFyIGY9KGUud2l0aENyZWRlbnRpYWxzfHxKZShkKSkmJmUueHNyZkNvb2tpZU5hbWU/cWUucmVhZChlLnhzcmZDb29raWVOYW1lKTp2b2lkIDA7ZiYmKG9bZS54c3JmSGVhZGVyTmFtZV09Zil9InNldFJlcXVlc3RIZWFkZXIiaW4gYyYmamUuZm9yRWFjaChvLChmdW5jdGlvbihlLHQpe3ZvaWQgMD09PWkmJiJjb250ZW50LXR5cGUiPT09dC50b0xvd2VyQ2FzZSgpP2RlbGV0ZSBvW3RdOmMuc2V0UmVxdWVzdEhlYWRlcih0LGUpfSkpLGplLmlzVW5kZWZpbmVkKGUud2l0aENyZWRlbnRpYWxzKXx8KGMud2l0aENyZWRlbnRpYWxzPSEhZS53aXRoQ3JlZGVudGlhbHMpLHMmJiJqc29uIiE9PXMmJihjLnJlc3BvbnNlVHlwZT1lLnJlc3BvbnNlVHlwZSksImZ1bmN0aW9uIj09dHlwZW9mIGUub25Eb3dubG9hZFByb2dyZXNzJiZjLmFkZEV2ZW50TGlzdGVuZXIoInByb2dyZXNzIixlLm9uRG93bmxvYWRQcm9ncmVzcyksImZ1bmN0aW9uIj09dHlwZW9mIGUub25VcGxvYWRQcm9ncmVzcyYmYy51cGxvYWQmJmMudXBsb2FkLmFkZEV2ZW50TGlzdGVuZXIoInByb2dyZXNzIixlLm9uVXBsb2FkUHJvZ3Jlc3MpLChlLmNhbmNlbFRva2VufHxlLnNpZ25hbCkmJihyPWZ1bmN0aW9uKGUpe2MmJihuKCFlfHxlJiZlLnR5cGU/bmV3IHplKCJjYW5jZWxlZCIpOmUpLGMuYWJvcnQoKSxjPW51bGwpfSxlLmNhbmNlbFRva2VuJiZlLmNhbmNlbFRva2VuLnN1YnNjcmliZShyKSxlLnNpZ25hbCYmKGUuc2lnbmFsLmFib3J0ZWQ/cigpOmUuc2lnbmFsLmFkZEV2ZW50TGlzdGVuZXIoImFib3J0IixyKSkpLGl8fChpPW51bGwpLGMuc2VuZChpKX0pKX0sVmU9QixHZT1mdW5jdGlvbihlLHQpe1NlLmZvckVhY2goZSwoZnVuY3Rpb24obixyKXtyIT09dCYmci50b1VwcGVyQ2FzZSgpPT09dC50b1VwcGVyQ2FzZSgpJiYoZVt0XT1uLGRlbGV0ZSBlW3JdKX0pKX0sWGU9YmUsJGU9eyJDb250ZW50LVR5cGUiOiJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQifTtmdW5jdGlvbiBaZShlLHQpeyFWZS5pc1VuZGVmaW5lZChlKSYmVmUuaXNVbmRlZmluZWQoZVsiQ29udGVudC1UeXBlIl0pJiYoZVsiQ29udGVudC1UeXBlIl09dCl9dmFyIFFlLGV0PXt0cmFuc2l0aW9uYWw6a2UsYWRhcHRlcjooKCJ1bmRlZmluZWQiIT10eXBlb2YgWE1MSHR0cFJlcXVlc3R8fHZvaWQgMCE9PV9lJiYiW29iamVjdCBwcm9jZXNzXSI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoX2UpKSYmKFFlPVllKSxRZSksdHJhbnNmb3JtUmVxdWVzdDpbZnVuY3Rpb24oZSx0KXtyZXR1cm4gR2UodCwiQWNjZXB0IiksR2UodCwiQ29udGVudC1UeXBlIiksVmUuaXNGb3JtRGF0YShlKXx8VmUuaXNBcnJheUJ1ZmZlcihlKXx8VmUuaXNCdWZmZXIoZSl8fFZlLmlzU3RyZWFtKGUpfHxWZS5pc0ZpbGUoZSl8fFZlLmlzQmxvYihlKT9lOlZlLmlzQXJyYXlCdWZmZXJWaWV3KGUpP2UuYnVmZmVyOlZlLmlzVVJMU2VhcmNoUGFyYW1zKGUpPyhaZSh0LCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7Y2hhcnNldD11dGYtOCIpLGUudG9TdHJpbmcoKSk6VmUuaXNPYmplY3QoZSl8fHQmJiJhcHBsaWNhdGlvbi9qc29uIj09PXRbIkNvbnRlbnQtVHlwZSJdPyhaZSh0LCJhcHBsaWNhdGlvbi9qc29uIiksZnVuY3Rpb24oZSx0LG4pe2lmKFZlLmlzU3RyaW5nKGUpKXRyeXtyZXR1cm4odHx8SlNPTi5wYXJzZSkoZSksVmUudHJpbShlKX1jYXRjaChlKXtpZigiU3ludGF4RXJyb3IiIT09ZS5uYW1lKXRocm93IGV9cmV0dXJuKG58fEpTT04uc3RyaW5naWZ5KShlKX0oZSkpOmV9XSx0cmFuc2Zvcm1SZXNwb25zZTpbZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy50cmFuc2l0aW9uYWx8fGV0LnRyYW5zaXRpb25hbCxuPXQmJnQuc2lsZW50SlNPTlBhcnNpbmcscj10JiZ0LmZvcmNlZEpTT05QYXJzaW5nLGk9IW4mJiJqc29uIj09PXRoaXMucmVzcG9uc2VUeXBlO2lmKGl8fHImJlZlLmlzU3RyaW5nKGUpJiZlLmxlbmd0aCl0cnl7cmV0dXJuIEpTT04ucGFyc2UoZSl9Y2F0Y2goZSl7aWYoaSl7aWYoIlN5bnRheEVycm9yIj09PWUubmFtZSl0aHJvdyBYZShlLHRoaXMsIkVfSlNPTl9QQVJTRSIpO3Rocm93IGV9fXJldHVybiBlfV0sdGltZW91dDowLHhzcmZDb29raWVOYW1lOiJYU1JGLVRPS0VOIix4c3JmSGVhZGVyTmFtZToiWC1YU1JGLVRPS0VOIixtYXhDb250ZW50TGVuZ3RoOi0xLG1heEJvZHlMZW5ndGg6LTEsdmFsaWRhdGVTdGF0dXM6ZnVuY3Rpb24oZSl7cmV0dXJuIGU+PTIwMCYmZTwzMDB9LGhlYWRlcnM6e2NvbW1vbjp7QWNjZXB0OiJhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L3BsYWluLCAqLyoifX19O1ZlLmZvckVhY2goWyJkZWxldGUiLCJnZXQiLCJoZWFkIl0sKGZ1bmN0aW9uKGUpe2V0LmhlYWRlcnNbZV09e319KSksVmUuZm9yRWFjaChbInBvc3QiLCJwdXQiLCJwYXRjaCJdLChmdW5jdGlvbihlKXtldC5oZWFkZXJzW2VdPVZlLm1lcmdlKCRlKX0pKTt2YXIgdHQ9ZXQsbnQ9QixydD10dCxpdD1mdW5jdGlvbihlKXtyZXR1cm4hKCFlfHwhZS5fX0NBTkNFTF9fKX0sb3Q9QixzdD1mdW5jdGlvbihlLHQsbil7dmFyIHI9dGhpc3x8cnQ7cmV0dXJuIG50LmZvckVhY2gobiwoZnVuY3Rpb24obil7ZT1uLmNhbGwocixlLHQpfSkpLGV9LGF0PWl0LGN0PXR0LHV0PU1lO2Z1bmN0aW9uIGx0KGUpe2lmKGUuY2FuY2VsVG9rZW4mJmUuY2FuY2VsVG9rZW4udGhyb3dJZlJlcXVlc3RlZCgpLGUuc2lnbmFsJiZlLnNpZ25hbC5hYm9ydGVkKXRocm93IG5ldyB1dCgiY2FuY2VsZWQiKX12YXIgZHQ9QixodD1mdW5jdGlvbihlLHQpe3Q9dHx8e307dmFyIG49e307ZnVuY3Rpb24gcihlLHQpe3JldHVybiBkdC5pc1BsYWluT2JqZWN0KGUpJiZkdC5pc1BsYWluT2JqZWN0KHQpP2R0Lm1lcmdlKGUsdCk6ZHQuaXNQbGFpbk9iamVjdCh0KT9kdC5tZXJnZSh7fSx0KTpkdC5pc0FycmF5KHQpP3Quc2xpY2UoKTp0fWZ1bmN0aW9uIGkobil7cmV0dXJuIGR0LmlzVW5kZWZpbmVkKHRbbl0pP2R0LmlzVW5kZWZpbmVkKGVbbl0pP3ZvaWQgMDpyKHZvaWQgMCxlW25dKTpyKGVbbl0sdFtuXSl9ZnVuY3Rpb24gbyhlKXtpZighZHQuaXNVbmRlZmluZWQodFtlXSkpcmV0dXJuIHIodm9pZCAwLHRbZV0pfWZ1bmN0aW9uIHMobil7cmV0dXJuIGR0LmlzVW5kZWZpbmVkKHRbbl0pP2R0LmlzVW5kZWZpbmVkKGVbbl0pP3ZvaWQgMDpyKHZvaWQgMCxlW25dKTpyKHZvaWQgMCx0W25dKX1mdW5jdGlvbiBhKG4pe3JldHVybiBuIGluIHQ/cihlW25dLHRbbl0pOm4gaW4gZT9yKHZvaWQgMCxlW25dKTp2b2lkIDB9dmFyIGM9e3VybDpvLG1ldGhvZDpvLGRhdGE6byxiYXNlVVJMOnMsdHJhbnNmb3JtUmVxdWVzdDpzLHRyYW5zZm9ybVJlc3BvbnNlOnMscGFyYW1zU2VyaWFsaXplcjpzLHRpbWVvdXQ6cyx0aW1lb3V0TWVzc2FnZTpzLHdpdGhDcmVkZW50aWFsczpzLGFkYXB0ZXI6cyxyZXNwb25zZVR5cGU6cyx4c3JmQ29va2llTmFtZTpzLHhzcmZIZWFkZXJOYW1lOnMsb25VcGxvYWRQcm9ncmVzczpzLG9uRG93bmxvYWRQcm9ncmVzczpzLGRlY29tcHJlc3M6cyxtYXhDb250ZW50TGVuZ3RoOnMsbWF4Qm9keUxlbmd0aDpzLHRyYW5zcG9ydDpzLGh0dHBBZ2VudDpzLGh0dHBzQWdlbnQ6cyxjYW5jZWxUb2tlbjpzLHNvY2tldFBhdGg6cyxyZXNwb25zZUVuY29kaW5nOnMsdmFsaWRhdGVTdGF0dXM6YX07cmV0dXJuIGR0LmZvckVhY2goT2JqZWN0LmtleXMoZSkuY29uY2F0KE9iamVjdC5rZXlzKHQpKSwoZnVuY3Rpb24oZSl7dmFyIHQ9Y1tlXXx8aSxyPXQoZSk7ZHQuaXNVbmRlZmluZWQocikmJnQhPT1hfHwobltlXT1yKX0pKSxufSxmdD0iMC4yNi4xIixwdD1mdCxndD17fTtbIm9iamVjdCIsImJvb2xlYW4iLCJudW1iZXIiLCJmdW5jdGlvbiIsInN0cmluZyIsInN5bWJvbCJdLmZvckVhY2goKGZ1bmN0aW9uKGUsdCl7Z3RbZV09ZnVuY3Rpb24obil7cmV0dXJuIHR5cGVvZiBuPT09ZXx8ImEiKyh0PDE/Im4gIjoiICIpK2V9fSkpO3ZhciB2dD17fTtndC50cmFuc2l0aW9uYWw9ZnVuY3Rpb24oZSx0LG4pe2Z1bmN0aW9uIHIoZSx0KXtyZXR1cm4iW0F4aW9zIHYiK3B0KyJdIFRyYW5zaXRpb25hbCBvcHRpb24gJyIrZSsiJyIrdCsobj8iLiAiK246IiIpfXJldHVybiBmdW5jdGlvbihuLGksbyl7aWYoITE9PT1lKXRocm93IG5ldyBFcnJvcihyKGksIiBoYXMgYmVlbiByZW1vdmVkIisodD8iIGluICIrdDoiIikpKTtyZXR1cm4gdCYmIXZ0W2ldJiYodnRbaV09ITAsY29uc29sZS53YXJuKHIoaSwiIGhhcyBiZWVuIGRlcHJlY2F0ZWQgc2luY2UgdiIrdCsiIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gdGhlIG5lYXIgZnV0dXJlIikpKSwhZXx8ZShuLGksbyl9fTt2YXIgeXQ9e2Fzc2VydE9wdGlvbnM6ZnVuY3Rpb24oZSx0LG4pe2lmKCJvYmplY3QiIT10eXBlb2YgZSl0aHJvdyBuZXcgVHlwZUVycm9yKCJvcHRpb25zIG11c3QgYmUgYW4gb2JqZWN0Iik7Zm9yKHZhciByPU9iamVjdC5rZXlzKGUpLGk9ci5sZW5ndGg7aS0tID4wOyl7dmFyIG89cltpXSxzPXRbb107aWYocyl7dmFyIGE9ZVtvXSxjPXZvaWQgMD09PWF8fHMoYSxvLGUpO2lmKCEwIT09Yyl0aHJvdyBuZXcgVHlwZUVycm9yKCJvcHRpb24gIitvKyIgbXVzdCBiZSAiK2MpfWVsc2UgaWYoITAhPT1uKXRocm93IEVycm9yKCJVbmtub3duIG9wdGlvbiAiK28pfX0sdmFsaWRhdG9yczpndH0sbXQ9Qix3dD1XLF90PVYsU3Q9ZnVuY3Rpb24oZSl7cmV0dXJuIGx0KGUpLGUuaGVhZGVycz1lLmhlYWRlcnN8fHt9LGUuZGF0YT1zdC5jYWxsKGUsZS5kYXRhLGUuaGVhZGVycyxlLnRyYW5zZm9ybVJlcXVlc3QpLGUuaGVhZGVycz1vdC5tZXJnZShlLmhlYWRlcnMuY29tbW9ufHx7fSxlLmhlYWRlcnNbZS5tZXRob2RdfHx7fSxlLmhlYWRlcnMpLG90LmZvckVhY2goWyJkZWxldGUiLCJnZXQiLCJoZWFkIiwicG9zdCIsInB1dCIsInBhdGNoIiwiY29tbW9uIl0sKGZ1bmN0aW9uKHQpe2RlbGV0ZSBlLmhlYWRlcnNbdF19KSksKGUuYWRhcHRlcnx8Y3QuYWRhcHRlcikoZSkudGhlbigoZnVuY3Rpb24odCl7cmV0dXJuIGx0KGUpLHQuZGF0YT1zdC5jYWxsKGUsdC5kYXRhLHQuaGVhZGVycyxlLnRyYW5zZm9ybVJlc3BvbnNlKSx0fSksKGZ1bmN0aW9uKHQpe3JldHVybiBhdCh0KXx8KGx0KGUpLHQmJnQucmVzcG9uc2UmJih0LnJlc3BvbnNlLmRhdGE9c3QuY2FsbChlLHQucmVzcG9uc2UuZGF0YSx0LnJlc3BvbnNlLmhlYWRlcnMsZS50cmFuc2Zvcm1SZXNwb25zZSkpKSxQcm9taXNlLnJlamVjdCh0KX0pKX0sYnQ9aHQsa3Q9eXQsRXQ9a3QudmFsaWRhdG9ycztmdW5jdGlvbiBUdChlKXt0aGlzLmRlZmF1bHRzPWUsdGhpcy5pbnRlcmNlcHRvcnM9e3JlcXVlc3Q6bmV3IF90LHJlc3BvbnNlOm5ldyBfdH19VHQucHJvdG90eXBlLnJlcXVlc3Q9ZnVuY3Rpb24oZSx0KXsic3RyaW5nIj09dHlwZW9mIGU/KHQ9dHx8e30pLnVybD1lOnQ9ZXx8e30sKHQ9YnQodGhpcy5kZWZhdWx0cyx0KSkubWV0aG9kP3QubWV0aG9kPXQubWV0aG9kLnRvTG93ZXJDYXNlKCk6dGhpcy5kZWZhdWx0cy5tZXRob2Q/dC5tZXRob2Q9dGhpcy5kZWZhdWx0cy5tZXRob2QudG9Mb3dlckNhc2UoKTp0Lm1ldGhvZD0iZ2V0Ijt2YXIgbj10LnRyYW5zaXRpb25hbDt2b2lkIDAhPT1uJiZrdC5hc3NlcnRPcHRpb25zKG4se3NpbGVudEpTT05QYXJzaW5nOkV0LnRyYW5zaXRpb25hbChFdC5ib29sZWFuKSxmb3JjZWRKU09OUGFyc2luZzpFdC50cmFuc2l0aW9uYWwoRXQuYm9vbGVhbiksY2xhcmlmeVRpbWVvdXRFcnJvcjpFdC50cmFuc2l0aW9uYWwoRXQuYm9vbGVhbil9LCExKTt2YXIgcj1bXSxpPSEwO3RoaXMuaW50ZXJjZXB0b3JzLnJlcXVlc3QuZm9yRWFjaCgoZnVuY3Rpb24oZSl7ImZ1bmN0aW9uIj09dHlwZW9mIGUucnVuV2hlbiYmITE9PT1lLnJ1bldoZW4odCl8fChpPWkmJmUuc3luY2hyb25vdXMsci51bnNoaWZ0KGUuZnVsZmlsbGVkLGUucmVqZWN0ZWQpKX0pKTt2YXIgbyxzPVtdO2lmKHRoaXMuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLmZvckVhY2goKGZ1bmN0aW9uKGUpe3MucHVzaChlLmZ1bGZpbGxlZCxlLnJlamVjdGVkKX0pKSwhaSl7dmFyIGE9W1N0LHZvaWQgMF07Zm9yKEFycmF5LnByb3RvdHlwZS51bnNoaWZ0LmFwcGx5KGEsciksYT1hLmNvbmNhdChzKSxvPVByb21pc2UucmVzb2x2ZSh0KTthLmxlbmd0aDspbz1vLnRoZW4oYS5zaGlmdCgpLGEuc2hpZnQoKSk7cmV0dXJuIG99Zm9yKHZhciBjPXQ7ci5sZW5ndGg7KXt2YXIgdT1yLnNoaWZ0KCksbD1yLnNoaWZ0KCk7dHJ5e2M9dShjKX1jYXRjaChlKXtsKGUpO2JyZWFrfX10cnl7bz1TdChjKX1jYXRjaChlKXtyZXR1cm4gUHJvbWlzZS5yZWplY3QoZSl9Zm9yKDtzLmxlbmd0aDspbz1vLnRoZW4ocy5zaGlmdCgpLHMuc2hpZnQoKSk7cmV0dXJuIG99LFR0LnByb3RvdHlwZS5nZXRVcmk9ZnVuY3Rpb24oZSl7cmV0dXJuIGU9YnQodGhpcy5kZWZhdWx0cyxlKSx3dChlLnVybCxlLnBhcmFtcyxlLnBhcmFtc1NlcmlhbGl6ZXIpLnJlcGxhY2UoL15cPy8sIiIpfSxtdC5mb3JFYWNoKFsiZGVsZXRlIiwiZ2V0IiwiaGVhZCIsIm9wdGlvbnMiXSwoZnVuY3Rpb24oZSl7VHQucHJvdG90eXBlW2VdPWZ1bmN0aW9uKHQsbil7cmV0dXJuIHRoaXMucmVxdWVzdChidChufHx7fSx7bWV0aG9kOmUsdXJsOnQsZGF0YToobnx8e30pLmRhdGF9KSl9fSkpLG10LmZvckVhY2goWyJwb3N0IiwicHV0IiwicGF0Y2giXSwoZnVuY3Rpb24oZSl7VHQucHJvdG90eXBlW2VdPWZ1bmN0aW9uKHQsbixyKXtyZXR1cm4gdGhpcy5yZXF1ZXN0KGJ0KHJ8fHt9LHttZXRob2Q6ZSx1cmw6dCxkYXRhOm59KSl9fSkpO3ZhciBBdD1UdCxSdD1NZTtmdW5jdGlvbiBDdChlKXtpZigiZnVuY3Rpb24iIT10eXBlb2YgZSl0aHJvdyBuZXcgVHlwZUVycm9yKCJleGVjdXRvciBtdXN0IGJlIGEgZnVuY3Rpb24uIik7dmFyIHQ7dGhpcy5wcm9taXNlPW5ldyBQcm9taXNlKChmdW5jdGlvbihlKXt0PWV9KSk7dmFyIG49dGhpczt0aGlzLnByb21pc2UudGhlbigoZnVuY3Rpb24oZSl7aWYobi5fbGlzdGVuZXJzKXt2YXIgdCxyPW4uX2xpc3RlbmVycy5sZW5ndGg7Zm9yKHQ9MDt0PHI7dCsrKW4uX2xpc3RlbmVyc1t0XShlKTtuLl9saXN0ZW5lcnM9bnVsbH19KSksdGhpcy5wcm9taXNlLnRoZW49ZnVuY3Rpb24oZSl7dmFyIHQscj1uZXcgUHJvbWlzZSgoZnVuY3Rpb24oZSl7bi5zdWJzY3JpYmUoZSksdD1lfSkpLnRoZW4oZSk7cmV0dXJuIHIuY2FuY2VsPWZ1bmN0aW9uKCl7bi51bnN1YnNjcmliZSh0KX0scn0sZSgoZnVuY3Rpb24oZSl7bi5yZWFzb258fChuLnJlYXNvbj1uZXcgUnQoZSksdChuLnJlYXNvbikpfSkpfUN0LnByb3RvdHlwZS50aHJvd0lmUmVxdWVzdGVkPWZ1bmN0aW9uKCl7aWYodGhpcy5yZWFzb24pdGhyb3cgdGhpcy5yZWFzb259LEN0LnByb3RvdHlwZS5zdWJzY3JpYmU9ZnVuY3Rpb24oZSl7dGhpcy5yZWFzb24/ZSh0aGlzLnJlYXNvbik6dGhpcy5fbGlzdGVuZXJzP3RoaXMuX2xpc3RlbmVycy5wdXNoKGUpOnRoaXMuX2xpc3RlbmVycz1bZV19LEN0LnByb3RvdHlwZS51bnN1YnNjcmliZT1mdW5jdGlvbihlKXtpZih0aGlzLl9saXN0ZW5lcnMpe3ZhciB0PXRoaXMuX2xpc3RlbmVycy5pbmRleE9mKGUpOy0xIT09dCYmdGhpcy5fbGlzdGVuZXJzLnNwbGljZSh0LDEpfX0sQ3Quc291cmNlPWZ1bmN0aW9uKCl7dmFyIGUsdD1uZXcgQ3QoKGZ1bmN0aW9uKHQpe2U9dH0pKTtyZXR1cm57dG9rZW46dCxjYW5jZWw6ZX19O3ZhciBEdD1DdCxQdD1CLEl0PUIsT3Q9TyxVdD1BdCxMdD1odDt2YXIgSHQ9ZnVuY3Rpb24gZSh0KXt2YXIgbj1uZXcgVXQodCkscj1PdChVdC5wcm90b3R5cGUucmVxdWVzdCxuKTtyZXR1cm4gSXQuZXh0ZW5kKHIsVXQucHJvdG90eXBlLG4pLEl0LmV4dGVuZChyLG4pLHIuY3JlYXRlPWZ1bmN0aW9uKG4pe3JldHVybiBlKEx0KHQsbikpfSxyfSh0dCk7SHQuQXhpb3M9VXQsSHQuQ2FuY2VsPU1lLEh0LkNhbmNlbFRva2VuPUR0LEh0LmlzQ2FuY2VsPWl0LEh0LlZFUlNJT049ZnQsSHQuYWxsPWZ1bmN0aW9uKGUpe3JldHVybiBQcm9taXNlLmFsbChlKX0sSHQuc3ByZWFkPWZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gZS5hcHBseShudWxsLHQpfX0sSHQuaXNBeGlvc0Vycm9yPWZ1bmN0aW9uKGUpe3JldHVybiBQdC5pc09iamVjdChlKSYmITA9PT1lLmlzQXhpb3NFcnJvcn0sSS5leHBvcnRzPUh0LEkuZXhwb3J0cy5kZWZhdWx0PUh0O3ZhciBNdCxqdD1JLmV4cG9ydHM7bGV0IE50PU10PWNsYXNze2NvbnN0cnVjdG9yKCl7dGhpcy5hdHRhY2hUb2tlbj0oKT0+UHJvbWlzZS5yZXNvbHZlKCksdGhpcy5yZXF1ZXN0U3RhcnRDYWxsYmFjaz0oKT0+bnVsbCx0aGlzLnJlcXVlc3RTdWNjZXNzQ2FsbGJhY2s9KCk9Pm51bGwsdGhpcy5yZXF1ZXN0RXJyb3JDYWxsYmFjaz0oKT0+bnVsbCx0aGlzLnJlcXVlc3RGaW5pc2hDYWxsYmFjaz0oKT0+bnVsbCx0aGlzLmluaXQ9dGhpcy5pbml0LmJpbmQodGhpcyksdGhpcy5zZXRIdHRwUmVxdWVzdEVycm9yQ2FsbGJhY2s9dGhpcy5zZXRIdHRwUmVxdWVzdEVycm9yQ2FsbGJhY2suYmluZCh0aGlzKSx0aGlzLnNldEh0dHBSZXF1ZXN0RmluaXNoQ2FsbGJhY2s9dGhpcy5zZXRIdHRwUmVxdWVzdEZpbmlzaENhbGxiYWNrLmJpbmQodGhpcyksdGhpcy5zZXRIdHRwUmVxdWVzdFN0YXJ0Q2FsbGJhY2s9dGhpcy5zZXRIdHRwUmVxdWVzdFN0YXJ0Q2FsbGJhY2suYmluZCh0aGlzKSx0aGlzLnNldEh0dHBSZXF1ZXN0U3VjY2Vzc0NhbGxiYWNrPXRoaXMuc2V0SHR0cFJlcXVlc3RTdWNjZXNzQ2FsbGJhY2suYmluZCh0aGlzKX1zdGF0aWMgZ2V0SW5zdGFuY2UoKXtyZXR1cm4gdGhpcy5heGlvc0luc3RhbmNlfHwodGhpcy5heGlvc0luc3RhbmNlPWp0LmNyZWF0ZSh7d2l0aENyZWRlbnRpYWxzOiEwfSksdGhpcy5jbGllbnRJbnN0YW5jZXx8KHRoaXMuY2xpZW50SW5zdGFuY2U9bmV3IE10KSx0aGlzLmF4aW9zSW5zdGFuY2UuaW50ZXJjZXB0b3JzLnJlcXVlc3QudXNlKCh0PT5lKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7cmV0dXJuIHlpZWxkIHRoaXMuY2xpZW50SW5zdGFuY2UucmVxdWVzdEhhbmRsZXIodCl9KSkpKSx0aGlzLmF4aW9zSW5zdGFuY2UuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLnVzZSgoZT0+dGhpcy5jbGllbnRJbnN0YW5jZS5zdWNjZXNzSGFuZGxlcihlKSksKGU9PnRoaXMuY2xpZW50SW5zdGFuY2UuZXJyb3JIYW5kbGVyKGUpKSksdGhpcy5heGlvc0luc3RhbmNlLmFsbD1qdC5hbGwsdGhpcy5heGlvc0luc3RhbmNlLnNwcmVhZD1qdC5zcHJlYWQsdGhpcy5heGlvc0luc3RhbmNlLmluaXQ9dGhpcy5jbGllbnRJbnN0YW5jZS5pbml0LHRoaXMuYXhpb3NJbnN0YW5jZS5lbmFibGVIYW5kbGVyPXRoaXMuY2xpZW50SW5zdGFuY2UuZW5hYmxlSGFuZGxlcix0aGlzLmF4aW9zSW5zdGFuY2UuZGlzYWJsZUhhbmRsZXI9dGhpcy5jbGllbnRJbnN0YW5jZS5kaXNhYmxlSGFuZGxlcix0aGlzLmF4aW9zSW5zdGFuY2UuZGlzYWJsZUhhbmRsZXJXaXRoVGltZW91dD10aGlzLmNsaWVudEluc3RhbmNlLmRpc2FibGVIYW5kbGVyV2l0aFRpbWVvdXQsdGhpcy5heGlvc0luc3RhbmNlLnNldEh0dHBSZXF1ZXN0U3RhcnRDYWxsYmFjaz10aGlzLmNsaWVudEluc3RhbmNlLnNldEh0dHBSZXF1ZXN0U3RhcnRDYWxsYmFjayx0aGlzLmF4aW9zSW5zdGFuY2Uuc2V0SHR0cFJlcXVlc3RTdWNjZXNzQ2FsbGJhY2s9dGhpcy5jbGllbnRJbnN0YW5jZS5zZXRIdHRwUmVxdWVzdFN1Y2Nlc3NDYWxsYmFjayx0aGlzLmF4aW9zSW5zdGFuY2Uuc2V0SHR0cFJlcXVlc3RFcnJvckNhbGxiYWNrPXRoaXMuY2xpZW50SW5zdGFuY2Uuc2V0SHR0cFJlcXVlc3RFcnJvckNhbGxiYWNrLHRoaXMuYXhpb3NJbnN0YW5jZS5zZXRIdHRwUmVxdWVzdEZpbmlzaENhbGxiYWNrPXRoaXMuY2xpZW50SW5zdGFuY2Uuc2V0SHR0cFJlcXVlc3RGaW5pc2hDYWxsYmFjayksdGhpcy5heGlvc0luc3RhbmNlfXJlcXVlc3RIYW5kbGVyKHQpe3JldHVybiBlKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7aWYoeWllbGQgdGhpcy5hdHRhY2hUb2tlbih0KSxudWxsPT10P3ZvaWQgMDp0LnNob3VsZEVuY29kZVRvRm9ybURhdGEpe2NvbnN0IGU9bnVsbD09dD92b2lkIDA6dC5kYXRhLG49bmV3IEZvcm1EYXRhO09iamVjdC5rZXlzKGUpLmZvckVhY2goKHQ9PntuLmFwcGVuZCh0LGVbdF0pfSkpLHQuZGF0YT1ufXJldHVybiB0LnN0YXJ0VGltZUluTXM9KG5ldyBEYXRlKS5nZXRUaW1lKCksTXQuaXNIYW5kbGVyRW5hYmxlZCYmdGhpcy5yZXF1ZXN0U3RhcnRDYWxsYmFjayYmImZ1bmN0aW9uIj09dHlwZW9mIHRoaXMucmVxdWVzdFN0YXJ0Q2FsbGJhY2smJnRoaXMucmVxdWVzdFN0YXJ0Q2FsbGJhY2sodCksdH0pKX1lcnJvckhhbmRsZXIoZSl7dGhyb3cgTXQuaXNIYW5kbGVyRW5hYmxlZCYmKHRoaXMucmVxdWVzdEVycm9yQ2FsbGJhY2smJiJmdW5jdGlvbiI9PXR5cGVvZiB0aGlzLnJlcXVlc3RFcnJvckNhbGxiYWNrJiZ0aGlzLnJlcXVlc3RFcnJvckNhbGxiYWNrKGUpLHRoaXMucmVxdWVzdEZpbmlzaENhbGxiYWNrJiYiZnVuY3Rpb24iPT10eXBlb2YgdGhpcy5yZXF1ZXN0RmluaXNoQ2FsbGJhY2smJnRoaXMucmVxdWVzdEZpbmlzaENhbGxiYWNrKCkpLGV9c3VjY2Vzc0hhbmRsZXIoZSl7cmV0dXJuIE10LmlzSGFuZGxlckVuYWJsZWQmJih0aGlzLnJlcXVlc3RTdWNjZXNzQ2FsbGJhY2smJiJmdW5jdGlvbiI9PXR5cGVvZiB0aGlzLnJlcXVlc3RTdWNjZXNzQ2FsbGJhY2smJnRoaXMucmVxdWVzdFN1Y2Nlc3NDYWxsYmFjayhlKSx0aGlzLnJlcXVlc3RGaW5pc2hDYWxsYmFjayYmImZ1bmN0aW9uIj09dHlwZW9mIHRoaXMucmVxdWVzdEZpbmlzaENhbGxiYWNrJiZ0aGlzLnJlcXVlc3RGaW5pc2hDYWxsYmFjaygpKSxlfWluaXQoKXtsZXQgdD0hKGFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdKXx8YXJndW1lbnRzWzBdLG49YXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDA7cmV0dXJuIGUodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtNdC5pc0hhbmRsZXJFbmFibGVkPXQsdGhpcy5hdHRhY2hUb2tlbj1ufSkpfWVuYWJsZUhhbmRsZXIoKXtNdC5pc0hhbmRsZXJFbmFibGVkPSEwfWRpc2FibGVIYW5kbGVyKCl7TXQuaXNIYW5kbGVyRW5hYmxlZD0hMX1kaXNhYmxlSGFuZGxlcldpdGhUaW1lb3V0KCl7bGV0IGU9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOk10LkRFRkFVTFRfSEFORExFUl9ESVNBQkxFX1RJTUVPVVQ7TXQuaXNIYW5kbGVyRW5hYmxlZD0hMSxzZXRUaW1lb3V0KCgoKT0+e010LmlzSGFuZGxlckVuYWJsZWQ9ITB9KSxlKX1zZXRIdHRwUmVxdWVzdFN0YXJ0Q2FsbGJhY2soZSl7dGhpcy5yZXF1ZXN0U3RhcnRDYWxsYmFjaz1lfXNldEh0dHBSZXF1ZXN0U3VjY2Vzc0NhbGxiYWNrKGUpe3RoaXMucmVxdWVzdFN1Y2Nlc3NDYWxsYmFjaz1lfXNldEh0dHBSZXF1ZXN0RXJyb3JDYWxsYmFjayhlKXt0aGlzLnJlcXVlc3RFcnJvckNhbGxiYWNrPWV9c2V0SHR0cFJlcXVlc3RGaW5pc2hDYWxsYmFjayhlKXt0aGlzLnJlcXVlc3RGaW5pc2hDYWxsYmFjaz1lfX07TnQuREVGQVVMVF9IQU5ETEVSX0RJU0FCTEVfVElNRU9VVD0xZTMsTnQ9TXQ9ZnVuY3Rpb24oZSx0LG4scil7dmFyIGksbz1hcmd1bWVudHMubGVuZ3RoLHM9bzwzP3Q6bnVsbD09PXI/cj1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsbik6cjtpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKXM9UmVmbGVjdC5kZWNvcmF0ZShlLHQsbixyKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShpPWVbYV0pJiYocz0obzwzP2kocyk6bz4zP2kodCxuLHMpOmkodCxuKSl8fHMpO3JldHVybiBvPjMmJnMmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LG4scyksc30oW2U9Pnt9XSxOdCk7Y2xhc3MgcXR7Y29uc3RydWN0b3IoKXt0aGlzLl9kYXRhPW5ldyBNYXB9c2V0RGF0YSh0LG4pe3JldHVybiBlKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7dGhpcy5fZGF0YS5zZXQodCxuKX0pKX1nZXREYXRhKHQpe3ZhciBuLHI7cmV0dXJuIGUodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtyZXR1cm4gbnVsbCE9PShyPW51bGw9PT0obj10aGlzLl9kYXRhKXx8dm9pZCAwPT09bj92b2lkIDA6bi5nZXQodCkpJiZ2b2lkIDAhPT1yP3I6Int9In0pKX1yZW1vdmVEYXRhKHQpe3JldHVybiBlKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7dGhpcy5fZGF0YS5kZWxldGUodCl9KSl9fXZhciB4dD1bXSxLdD1bXSxCdD0idW5kZWZpbmVkIiE9dHlwZW9mIFVpbnQ4QXJyYXk/VWludDhBcnJheTpBcnJheSxKdD0hMTtmdW5jdGlvbiBGdCgpe0p0PSEwO2Zvcih2YXIgZT0iQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyIsdD0wLG49ZS5sZW5ndGg7dDxuOysrdCl4dFt0XT1lW3RdLEt0W2UuY2hhckNvZGVBdCh0KV09dDtLdFsiLSIuY2hhckNvZGVBdCgwKV09NjIsS3RbIl8iLmNoYXJDb2RlQXQoMCldPTYzfWZ1bmN0aW9uIFd0KGUsdCxuKXtmb3IodmFyIHIsaSxvPVtdLHM9dDtzPG47cys9MylyPShlW3NdPDwxNikrKGVbcysxXTw8OCkrZVtzKzJdLG8ucHVzaCh4dFsoaT1yKT4+MTgmNjNdK3h0W2k+PjEyJjYzXSt4dFtpPj42JjYzXSt4dFs2MyZpXSk7cmV0dXJuIG8uam9pbigiIil9ZnVuY3Rpb24genQoZSl7dmFyIHQ7SnR8fEZ0KCk7Zm9yKHZhciBuPWUubGVuZ3RoLHI9biUzLGk9IiIsbz1bXSxzPTE2MzgzLGE9MCxjPW4tcjthPGM7YSs9cylvLnB1c2goV3QoZSxhLGErcz5jP2M6YStzKSk7cmV0dXJuIDE9PT1yPyh0PWVbbi0xXSxpKz14dFt0Pj4yXSxpKz14dFt0PDw0JjYzXSxpKz0iPT0iKToyPT09ciYmKHQ9KGVbbi0yXTw8OCkrZVtuLTFdLGkrPXh0W3Q+PjEwXSxpKz14dFt0Pj40JjYzXSxpKz14dFt0PDwyJjYzXSxpKz0iPSIpLG8ucHVzaChpKSxvLmpvaW4oIiIpfWZ1bmN0aW9uIFl0KGUsdCxuLHIsaSl7dmFyIG8scyxhPTgqaS1yLTEsYz0oMTw8YSktMSx1PWM+PjEsbD0tNyxkPW4/aS0xOjAsaD1uPy0xOjEsZj1lW3QrZF07Zm9yKGQrPWgsbz1mJigxPDwtbCktMSxmPj49LWwsbCs9YTtsPjA7bz0yNTYqbytlW3QrZF0sZCs9aCxsLT04KTtmb3Iocz1vJigxPDwtbCktMSxvPj49LWwsbCs9cjtsPjA7cz0yNTYqcytlW3QrZF0sZCs9aCxsLT04KTtpZigwPT09bylvPTEtdTtlbHNle2lmKG89PT1jKXJldHVybiBzP05hTjoxLzAqKGY/LTE6MSk7cys9TWF0aC5wb3coMixyKSxvLT11fXJldHVybihmPy0xOjEpKnMqTWF0aC5wb3coMixvLXIpfWZ1bmN0aW9uIFZ0KGUsdCxuLHIsaSxvKXt2YXIgcyxhLGMsdT04Km8taS0xLGw9KDE8PHUpLTEsZD1sPj4xLGg9MjM9PT1pP01hdGgucG93KDIsLTI0KS1NYXRoLnBvdygyLC03Nyk6MCxmPXI/MDpvLTEscD1yPzE6LTEsZz10PDB8fDA9PT10JiYxL3Q8MD8xOjA7Zm9yKHQ9TWF0aC5hYnModCksaXNOYU4odCl8fHQ9PT0xLzA/KGE9aXNOYU4odCk/MTowLHM9bCk6KHM9TWF0aC5mbG9vcihNYXRoLmxvZyh0KS9NYXRoLkxOMiksdCooYz1NYXRoLnBvdygyLC1zKSk8MSYmKHMtLSxjKj0yKSwodCs9cytkPj0xP2gvYzpoKk1hdGgucG93KDIsMS1kKSkqYz49MiYmKHMrKyxjLz0yKSxzK2Q+PWw/KGE9MCxzPWwpOnMrZD49MT8oYT0odCpjLTEpKk1hdGgucG93KDIsaSkscys9ZCk6KGE9dCpNYXRoLnBvdygyLGQtMSkqTWF0aC5wb3coMixpKSxzPTApKTtpPj04O2VbbitmXT0yNTUmYSxmKz1wLGEvPTI1NixpLT04KTtmb3Iocz1zPDxpfGEsdSs9aTt1PjA7ZVtuK2ZdPTI1NSZzLGYrPXAscy89MjU2LHUtPTgpO2VbbitmLXBdfD0xMjgqZ312YXIgR3Q9e30udG9TdHJpbmcsWHQ9QXJyYXkuaXNBcnJheXx8ZnVuY3Rpb24oZSl7cmV0dXJuIltvYmplY3QgQXJyYXldIj09R3QuY2FsbChlKX07ZW4uVFlQRURfQVJSQVlfU1VQUE9SVD12b2lkIDA9PT1HLlRZUEVEX0FSUkFZX1NVUFBPUlR8fEcuVFlQRURfQVJSQVlfU1VQUE9SVDt2YXIgJHQ9WnQoKTtmdW5jdGlvbiBadCgpe3JldHVybiBlbi5UWVBFRF9BUlJBWV9TVVBQT1JUPzIxNDc0ODM2NDc6MTA3Mzc0MTgyM31mdW5jdGlvbiBRdChlLHQpe2lmKFp0KCk8dCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCB0eXBlZCBhcnJheSBsZW5ndGgiKTtyZXR1cm4gZW4uVFlQRURfQVJSQVlfU1VQUE9SVD8oZT1uZXcgVWludDhBcnJheSh0KSkuX19wcm90b19fPWVuLnByb3RvdHlwZToobnVsbD09PWUmJihlPW5ldyBlbih0KSksZS5sZW5ndGg9dCksZX1mdW5jdGlvbiBlbihlLHQsbil7aWYoIShlbi5UWVBFRF9BUlJBWV9TVVBQT1JUfHx0aGlzIGluc3RhbmNlb2YgZW4pKXJldHVybiBuZXcgZW4oZSx0LG4pO2lmKCJudW1iZXIiPT10eXBlb2YgZSl7aWYoInN0cmluZyI9PXR5cGVvZiB0KXRocm93IG5ldyBFcnJvcigiSWYgZW5jb2RpbmcgaXMgc3BlY2lmaWVkIHRoZW4gdGhlIGZpcnN0IGFyZ3VtZW50IG11c3QgYmUgYSBzdHJpbmciKTtyZXR1cm4gcm4odGhpcyxlKX1yZXR1cm4gdG4odGhpcyxlLHQsbil9ZnVuY3Rpb24gdG4oZSx0LG4scil7aWYoIm51bWJlciI9PXR5cGVvZiB0KXRocm93IG5ldyBUeXBlRXJyb3IoJyJ2YWx1ZSIgYXJndW1lbnQgbXVzdCBub3QgYmUgYSBudW1iZXInKTtyZXR1cm4idW5kZWZpbmVkIiE9dHlwZW9mIEFycmF5QnVmZmVyJiZ0IGluc3RhbmNlb2YgQXJyYXlCdWZmZXI/ZnVuY3Rpb24oZSx0LG4scil7aWYodC5ieXRlTGVuZ3RoLG48MHx8dC5ieXRlTGVuZ3RoPG4pdGhyb3cgbmV3IFJhbmdlRXJyb3IoIidvZmZzZXQnIGlzIG91dCBvZiBib3VuZHMiKTtpZih0LmJ5dGVMZW5ndGg8bisocnx8MCkpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIidsZW5ndGgnIGlzIG91dCBvZiBib3VuZHMiKTt0PXZvaWQgMD09PW4mJnZvaWQgMD09PXI/bmV3IFVpbnQ4QXJyYXkodCk6dm9pZCAwPT09cj9uZXcgVWludDhBcnJheSh0LG4pOm5ldyBVaW50OEFycmF5KHQsbixyKTtlbi5UWVBFRF9BUlJBWV9TVVBQT1JUPyhlPXQpLl9fcHJvdG9fXz1lbi5wcm90b3R5cGU6ZT1vbihlLHQpO3JldHVybiBlfShlLHQsbixyKToic3RyaW5nIj09dHlwZW9mIHQ/ZnVuY3Rpb24oZSx0LG4peyJzdHJpbmciPT10eXBlb2YgbiYmIiIhPT1ufHwobj0idXRmOCIpO2lmKCFlbi5pc0VuY29kaW5nKG4pKXRocm93IG5ldyBUeXBlRXJyb3IoJyJlbmNvZGluZyIgbXVzdCBiZSBhIHZhbGlkIHN0cmluZyBlbmNvZGluZycpO3ZhciByPTB8Y24odCxuKSxpPShlPVF0KGUscikpLndyaXRlKHQsbik7aSE9PXImJihlPWUuc2xpY2UoMCxpKSk7cmV0dXJuIGV9KGUsdCxuKTpmdW5jdGlvbihlLHQpe2lmKGFuKHQpKXt2YXIgbj0wfHNuKHQubGVuZ3RoKTtyZXR1cm4gMD09PShlPVF0KGUsbikpLmxlbmd0aHx8dC5jb3B5KGUsMCwwLG4pLGV9aWYodCl7aWYoInVuZGVmaW5lZCIhPXR5cGVvZiBBcnJheUJ1ZmZlciYmdC5idWZmZXIgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcnx8Imxlbmd0aCJpbiB0KXJldHVybiJudW1iZXIiIT10eXBlb2YgdC5sZW5ndGh8fChyPXQubGVuZ3RoKSE9cj9RdChlLDApOm9uKGUsdCk7aWYoIkJ1ZmZlciI9PT10LnR5cGUmJlh0KHQuZGF0YSkpcmV0dXJuIG9uKGUsdC5kYXRhKX12YXIgcjt0aHJvdyBuZXcgVHlwZUVycm9yKCJGaXJzdCBhcmd1bWVudCBtdXN0IGJlIGEgc3RyaW5nLCBCdWZmZXIsIEFycmF5QnVmZmVyLCBBcnJheSwgb3IgYXJyYXktbGlrZSBvYmplY3QuIil9KGUsdCl9ZnVuY3Rpb24gbm4oZSl7aWYoIm51bWJlciIhPXR5cGVvZiBlKXRocm93IG5ldyBUeXBlRXJyb3IoJyJzaXplIiBhcmd1bWVudCBtdXN0IGJlIGEgbnVtYmVyJyk7aWYoZTwwKXRocm93IG5ldyBSYW5nZUVycm9yKCcic2l6ZSIgYXJndW1lbnQgbXVzdCBub3QgYmUgbmVnYXRpdmUnKX1mdW5jdGlvbiBybihlLHQpe2lmKG5uKHQpLGU9UXQoZSx0PDA/MDowfHNuKHQpKSwhZW4uVFlQRURfQVJSQVlfU1VQUE9SVClmb3IodmFyIG49MDtuPHQ7KytuKWVbbl09MDtyZXR1cm4gZX1mdW5jdGlvbiBvbihlLHQpe3ZhciBuPXQubGVuZ3RoPDA/MDowfHNuKHQubGVuZ3RoKTtlPVF0KGUsbik7Zm9yKHZhciByPTA7cjxuO3IrPTEpZVtyXT0yNTUmdFtyXTtyZXR1cm4gZX1mdW5jdGlvbiBzbihlKXtpZihlPj1adCgpKXRocm93IG5ldyBSYW5nZUVycm9yKCJBdHRlbXB0IHRvIGFsbG9jYXRlIEJ1ZmZlciBsYXJnZXIgdGhhbiBtYXhpbXVtIHNpemU6IDB4IitadCgpLnRvU3RyaW5nKDE2KSsiIGJ5dGVzIik7cmV0dXJuIDB8ZX1mdW5jdGlvbiBhbihlKXtyZXR1cm4hKG51bGw9PWV8fCFlLl9pc0J1ZmZlcil9ZnVuY3Rpb24gY24oZSx0KXtpZihhbihlKSlyZXR1cm4gZS5sZW5ndGg7aWYoInVuZGVmaW5lZCIhPXR5cGVvZiBBcnJheUJ1ZmZlciYmImZ1bmN0aW9uIj09dHlwZW9mIEFycmF5QnVmZmVyLmlzVmlldyYmKEFycmF5QnVmZmVyLmlzVmlldyhlKXx8ZSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSlyZXR1cm4gZS5ieXRlTGVuZ3RoOyJzdHJpbmciIT10eXBlb2YgZSYmKGU9IiIrZSk7dmFyIG49ZS5sZW5ndGg7aWYoMD09PW4pcmV0dXJuIDA7Zm9yKHZhciByPSExOzspc3dpdGNoKHQpe2Nhc2UiYXNjaWkiOmNhc2UibGF0aW4xIjpjYXNlImJpbmFyeSI6cmV0dXJuIG47Y2FzZSJ1dGY4IjpjYXNlInV0Zi04IjpjYXNlIHZvaWQgMDpyZXR1cm4gSG4oZSkubGVuZ3RoO2Nhc2UidWNzMiI6Y2FzZSJ1Y3MtMiI6Y2FzZSJ1dGYxNmxlIjpjYXNlInV0Zi0xNmxlIjpyZXR1cm4gMipuO2Nhc2UiaGV4IjpyZXR1cm4gbj4+PjE7Y2FzZSJiYXNlNjQiOnJldHVybiBNbihlKS5sZW5ndGg7ZGVmYXVsdDppZihyKXJldHVybiBIbihlKS5sZW5ndGg7dD0oIiIrdCkudG9Mb3dlckNhc2UoKSxyPSEwfX1mdW5jdGlvbiB1bihlLHQsbil7dmFyIHI9ITE7aWYoKHZvaWQgMD09PXR8fHQ8MCkmJih0PTApLHQ+dGhpcy5sZW5ndGgpcmV0dXJuIiI7aWYoKHZvaWQgMD09PW58fG4+dGhpcy5sZW5ndGgpJiYobj10aGlzLmxlbmd0aCksbjw9MClyZXR1cm4iIjtpZigobj4+Pj0wKTw9KHQ+Pj49MCkpcmV0dXJuIiI7Zm9yKGV8fChlPSJ1dGY4Iik7Oylzd2l0Y2goZSl7Y2FzZSJoZXgiOnJldHVybiBFbih0aGlzLHQsbik7Y2FzZSJ1dGY4IjpjYXNlInV0Zi04IjpyZXR1cm4gX24odGhpcyx0LG4pO2Nhc2UiYXNjaWkiOnJldHVybiBibih0aGlzLHQsbik7Y2FzZSJsYXRpbjEiOmNhc2UiYmluYXJ5IjpyZXR1cm4ga24odGhpcyx0LG4pO2Nhc2UiYmFzZTY0IjpyZXR1cm4gd24odGhpcyx0LG4pO2Nhc2UidWNzMiI6Y2FzZSJ1Y3MtMiI6Y2FzZSJ1dGYxNmxlIjpjYXNlInV0Zi0xNmxlIjpyZXR1cm4gVG4odGhpcyx0LG4pO2RlZmF1bHQ6aWYocil0aHJvdyBuZXcgVHlwZUVycm9yKCJVbmtub3duIGVuY29kaW5nOiAiK2UpO2U9KGUrIiIpLnRvTG93ZXJDYXNlKCkscj0hMH19ZnVuY3Rpb24gbG4oZSx0LG4pe3ZhciByPWVbdF07ZVt0XT1lW25dLGVbbl09cn1mdW5jdGlvbiBkbihlLHQsbixyLGkpe2lmKDA9PT1lLmxlbmd0aClyZXR1cm4tMTtpZigic3RyaW5nIj09dHlwZW9mIG4/KHI9bixuPTApOm4+MjE0NzQ4MzY0Nz9uPTIxNDc0ODM2NDc6bjwtMjE0NzQ4MzY0OCYmKG49LTIxNDc0ODM2NDgpLG49K24saXNOYU4obikmJihuPWk/MDplLmxlbmd0aC0xKSxuPDAmJihuPWUubGVuZ3RoK24pLG4+PWUubGVuZ3RoKXtpZihpKXJldHVybi0xO249ZS5sZW5ndGgtMX1lbHNlIGlmKG48MCl7aWYoIWkpcmV0dXJuLTE7bj0wfWlmKCJzdHJpbmciPT10eXBlb2YgdCYmKHQ9ZW4uZnJvbSh0LHIpKSxhbih0KSlyZXR1cm4gMD09PXQubGVuZ3RoPy0xOmhuKGUsdCxuLHIsaSk7aWYoIm51bWJlciI9PXR5cGVvZiB0KXJldHVybiB0Jj0yNTUsZW4uVFlQRURfQVJSQVlfU1VQUE9SVCYmImZ1bmN0aW9uIj09dHlwZW9mIFVpbnQ4QXJyYXkucHJvdG90eXBlLmluZGV4T2Y/aT9VaW50OEFycmF5LnByb3RvdHlwZS5pbmRleE9mLmNhbGwoZSx0LG4pOlVpbnQ4QXJyYXkucHJvdG90eXBlLmxhc3RJbmRleE9mLmNhbGwoZSx0LG4pOmhuKGUsW3RdLG4scixpKTt0aHJvdyBuZXcgVHlwZUVycm9yKCJ2YWwgbXVzdCBiZSBzdHJpbmcsIG51bWJlciBvciBCdWZmZXIiKX1mdW5jdGlvbiBobihlLHQsbixyLGkpe3ZhciBvLHM9MSxhPWUubGVuZ3RoLGM9dC5sZW5ndGg7aWYodm9pZCAwIT09ciYmKCJ1Y3MyIj09PShyPVN0cmluZyhyKS50b0xvd2VyQ2FzZSgpKXx8InVjcy0yIj09PXJ8fCJ1dGYxNmxlIj09PXJ8fCJ1dGYtMTZsZSI9PT1yKSl7aWYoZS5sZW5ndGg8Mnx8dC5sZW5ndGg8MilyZXR1cm4tMTtzPTIsYS89MixjLz0yLG4vPTJ9ZnVuY3Rpb24gdShlLHQpe3JldHVybiAxPT09cz9lW3RdOmUucmVhZFVJbnQxNkJFKHQqcyl9aWYoaSl7dmFyIGw9LTE7Zm9yKG89bjtvPGE7bysrKWlmKHUoZSxvKT09PXUodCwtMT09PWw/MDpvLWwpKXtpZigtMT09PWwmJihsPW8pLG8tbCsxPT09YylyZXR1cm4gbCpzfWVsc2UtMSE9PWwmJihvLT1vLWwpLGw9LTF9ZWxzZSBmb3IobitjPmEmJihuPWEtYyksbz1uO28+PTA7by0tKXtmb3IodmFyIGQ9ITAsaD0wO2g8YztoKyspaWYodShlLG8raCkhPT11KHQsaCkpe2Q9ITE7YnJlYWt9aWYoZClyZXR1cm4gb31yZXR1cm4tMX1mdW5jdGlvbiBmbihlLHQsbixyKXtuPU51bWJlcihuKXx8MDt2YXIgaT1lLmxlbmd0aC1uO3I/KHI9TnVtYmVyKHIpKT5pJiYocj1pKTpyPWk7dmFyIG89dC5sZW5ndGg7aWYobyUyIT0wKXRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgaGV4IHN0cmluZyIpO3I+by8yJiYocj1vLzIpO2Zvcih2YXIgcz0wO3M8cjsrK3Mpe3ZhciBhPXBhcnNlSW50KHQuc3Vic3RyKDIqcywyKSwxNik7aWYoaXNOYU4oYSkpcmV0dXJuIHM7ZVtuK3NdPWF9cmV0dXJuIHN9ZnVuY3Rpb24gcG4oZSx0LG4scil7cmV0dXJuIGpuKEhuKHQsZS5sZW5ndGgtbiksZSxuLHIpfWZ1bmN0aW9uIGduKGUsdCxuLHIpe3JldHVybiBqbihmdW5jdGlvbihlKXtmb3IodmFyIHQ9W10sbj0wO248ZS5sZW5ndGg7KytuKXQucHVzaCgyNTUmZS5jaGFyQ29kZUF0KG4pKTtyZXR1cm4gdH0odCksZSxuLHIpfWZ1bmN0aW9uIHZuKGUsdCxuLHIpe3JldHVybiBnbihlLHQsbixyKX1mdW5jdGlvbiB5bihlLHQsbixyKXtyZXR1cm4gam4oTW4odCksZSxuLHIpfWZ1bmN0aW9uIG1uKGUsdCxuLHIpe3JldHVybiBqbihmdW5jdGlvbihlLHQpe2Zvcih2YXIgbixyLGksbz1bXSxzPTA7czxlLmxlbmd0aCYmISgodC09Mik8MCk7KytzKXI9KG49ZS5jaGFyQ29kZUF0KHMpKT4+OCxpPW4lMjU2LG8ucHVzaChpKSxvLnB1c2gocik7cmV0dXJuIG99KHQsZS5sZW5ndGgtbiksZSxuLHIpfWZ1bmN0aW9uIHduKGUsdCxuKXtyZXR1cm4gMD09PXQmJm49PT1lLmxlbmd0aD96dChlKTp6dChlLnNsaWNlKHQsbikpfWZ1bmN0aW9uIF9uKGUsdCxuKXtuPU1hdGgubWluKGUubGVuZ3RoLG4pO2Zvcih2YXIgcj1bXSxpPXQ7aTxuOyl7dmFyIG8scyxhLGMsdT1lW2ldLGw9bnVsbCxkPXU+MjM5PzQ6dT4yMjM/Mzp1PjE5MT8yOjE7aWYoaStkPD1uKXN3aXRjaChkKXtjYXNlIDE6dTwxMjgmJihsPXUpO2JyZWFrO2Nhc2UgMjoxMjg9PSgxOTImKG89ZVtpKzFdKSkmJihjPSgzMSZ1KTw8Nnw2MyZvKT4xMjcmJihsPWMpO2JyZWFrO2Nhc2UgMzpvPWVbaSsxXSxzPWVbaSsyXSwxMjg9PSgxOTImbykmJjEyOD09KDE5MiZzKSYmKGM9KDE1JnUpPDwxMnwoNjMmbyk8PDZ8NjMmcyk+MjA0NyYmKGM8NTUyOTZ8fGM+NTczNDMpJiYobD1jKTticmVhaztjYXNlIDQ6bz1lW2krMV0scz1lW2krMl0sYT1lW2krM10sMTI4PT0oMTkyJm8pJiYxMjg9PSgxOTImcykmJjEyOD09KDE5MiZhKSYmKGM9KDE1JnUpPDwxOHwoNjMmbyk8PDEyfCg2MyZzKTw8Nnw2MyZhKT42NTUzNSYmYzwxMTE0MTEyJiYobD1jKX1udWxsPT09bD8obD02NTUzMyxkPTEpOmw+NjU1MzUmJihsLT02NTUzNixyLnB1c2gobD4+PjEwJjEwMjN8NTUyOTYpLGw9NTYzMjB8MTAyMyZsKSxyLnB1c2gobCksaSs9ZH1yZXR1cm4gZnVuY3Rpb24oZSl7dmFyIHQ9ZS5sZW5ndGg7aWYodDw9U24pcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLGUpO3ZhciBuPSIiLHI9MDtmb3IoO3I8dDspbis9U3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsZS5zbGljZShyLHIrPVNuKSk7cmV0dXJuIG59KHIpfWVuLnBvb2xTaXplPTgxOTIsZW4uX2F1Z21lbnQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGUuX19wcm90b19fPWVuLnByb3RvdHlwZSxlfSxlbi5mcm9tPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdG4obnVsbCxlLHQsbil9LGVuLlRZUEVEX0FSUkFZX1NVUFBPUlQmJihlbi5wcm90b3R5cGUuX19wcm90b19fPVVpbnQ4QXJyYXkucHJvdG90eXBlLGVuLl9fcHJvdG9fXz1VaW50OEFycmF5KSxlbi5hbGxvYz1mdW5jdGlvbihlLHQsbil7cmV0dXJuIGZ1bmN0aW9uKGUsdCxuLHIpe3JldHVybiBubih0KSx0PD0wP1F0KGUsdCk6dm9pZCAwIT09bj8ic3RyaW5nIj09dHlwZW9mIHI/UXQoZSx0KS5maWxsKG4scik6UXQoZSx0KS5maWxsKG4pOlF0KGUsdCl9KG51bGwsZSx0LG4pfSxlbi5hbGxvY1Vuc2FmZT1mdW5jdGlvbihlKXtyZXR1cm4gcm4obnVsbCxlKX0sZW4uYWxsb2NVbnNhZmVTbG93PWZ1bmN0aW9uKGUpe3JldHVybiBybihudWxsLGUpfSxlbi5pc0J1ZmZlcj1Obixlbi5jb21wYXJlPWZ1bmN0aW9uKGUsdCl7aWYoIWFuKGUpfHwhYW4odCkpdGhyb3cgbmV3IFR5cGVFcnJvcigiQXJndW1lbnRzIG11c3QgYmUgQnVmZmVycyIpO2lmKGU9PT10KXJldHVybiAwO2Zvcih2YXIgbj1lLmxlbmd0aCxyPXQubGVuZ3RoLGk9MCxvPU1hdGgubWluKG4scik7aTxvOysraSlpZihlW2ldIT09dFtpXSl7bj1lW2ldLHI9dFtpXTticmVha31yZXR1cm4gbjxyPy0xOnI8bj8xOjB9LGVuLmlzRW5jb2Rpbmc9ZnVuY3Rpb24oZSl7c3dpdGNoKFN0cmluZyhlKS50b0xvd2VyQ2FzZSgpKXtjYXNlImhleCI6Y2FzZSJ1dGY4IjpjYXNlInV0Zi04IjpjYXNlImFzY2lpIjpjYXNlImxhdGluMSI6Y2FzZSJiaW5hcnkiOmNhc2UiYmFzZTY0IjpjYXNlInVjczIiOmNhc2UidWNzLTIiOmNhc2UidXRmMTZsZSI6Y2FzZSJ1dGYtMTZsZSI6cmV0dXJuITA7ZGVmYXVsdDpyZXR1cm4hMX19LGVuLmNvbmNhdD1mdW5jdGlvbihlLHQpe2lmKCFYdChlKSl0aHJvdyBuZXcgVHlwZUVycm9yKCcibGlzdCIgYXJndW1lbnQgbXVzdCBiZSBhbiBBcnJheSBvZiBCdWZmZXJzJyk7aWYoMD09PWUubGVuZ3RoKXJldHVybiBlbi5hbGxvYygwKTt2YXIgbjtpZih2b2lkIDA9PT10KWZvcih0PTAsbj0wO248ZS5sZW5ndGg7KytuKXQrPWVbbl0ubGVuZ3RoO3ZhciByPWVuLmFsbG9jVW5zYWZlKHQpLGk9MDtmb3Iobj0wO248ZS5sZW5ndGg7KytuKXt2YXIgbz1lW25dO2lmKCFhbihvKSl0aHJvdyBuZXcgVHlwZUVycm9yKCcibGlzdCIgYXJndW1lbnQgbXVzdCBiZSBhbiBBcnJheSBvZiBCdWZmZXJzJyk7by5jb3B5KHIsaSksaSs9by5sZW5ndGh9cmV0dXJuIHJ9LGVuLmJ5dGVMZW5ndGg9Y24sZW4ucHJvdG90eXBlLl9pc0J1ZmZlcj0hMCxlbi5wcm90b3R5cGUuc3dhcDE2PWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5sZW5ndGg7aWYoZSUyIT0wKXRocm93IG5ldyBSYW5nZUVycm9yKCJCdWZmZXIgc2l6ZSBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgMTYtYml0cyIpO2Zvcih2YXIgdD0wO3Q8ZTt0Kz0yKWxuKHRoaXMsdCx0KzEpO3JldHVybiB0aGlzfSxlbi5wcm90b3R5cGUuc3dhcDMyPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5sZW5ndGg7aWYoZSU0IT0wKXRocm93IG5ldyBSYW5nZUVycm9yKCJCdWZmZXIgc2l6ZSBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgMzItYml0cyIpO2Zvcih2YXIgdD0wO3Q8ZTt0Kz00KWxuKHRoaXMsdCx0KzMpLGxuKHRoaXMsdCsxLHQrMik7cmV0dXJuIHRoaXN9LGVuLnByb3RvdHlwZS5zd2FwNjQ9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmxlbmd0aDtpZihlJTghPTApdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkJ1ZmZlciBzaXplIG11c3QgYmUgYSBtdWx0aXBsZSBvZiA2NC1iaXRzIik7Zm9yKHZhciB0PTA7dDxlO3QrPTgpbG4odGhpcyx0LHQrNyksbG4odGhpcyx0KzEsdCs2KSxsbih0aGlzLHQrMix0KzUpLGxuKHRoaXMsdCszLHQrNCk7cmV0dXJuIHRoaXN9LGVuLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3ZhciBlPTB8dGhpcy5sZW5ndGg7cmV0dXJuIDA9PT1lPyIiOjA9PT1hcmd1bWVudHMubGVuZ3RoP19uKHRoaXMsMCxlKTp1bi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGVuLnByb3RvdHlwZS5lcXVhbHM9ZnVuY3Rpb24oZSl7aWYoIWFuKGUpKXRocm93IG5ldyBUeXBlRXJyb3IoIkFyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXIiKTtyZXR1cm4gdGhpcz09PWV8fDA9PT1lbi5jb21wYXJlKHRoaXMsZSl9LGVuLnByb3RvdHlwZS5pbnNwZWN0PWZ1bmN0aW9uKCl7dmFyIGU9IiI7cmV0dXJuIHRoaXMubGVuZ3RoPjAmJihlPXRoaXMudG9TdHJpbmcoImhleCIsMCw1MCkubWF0Y2goLy57Mn0vZykuam9pbigiICIpLHRoaXMubGVuZ3RoPjUwJiYoZSs9IiAuLi4gIikpLCI8QnVmZmVyICIrZSsiPiJ9LGVuLnByb3RvdHlwZS5jb21wYXJlPWZ1bmN0aW9uKGUsdCxuLHIsaSl7aWYoIWFuKGUpKXRocm93IG5ldyBUeXBlRXJyb3IoIkFyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXIiKTtpZih2b2lkIDA9PT10JiYodD0wKSx2b2lkIDA9PT1uJiYobj1lP2UubGVuZ3RoOjApLHZvaWQgMD09PXImJihyPTApLHZvaWQgMD09PWkmJihpPXRoaXMubGVuZ3RoKSx0PDB8fG4+ZS5sZW5ndGh8fHI8MHx8aT50aGlzLmxlbmd0aCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigib3V0IG9mIHJhbmdlIGluZGV4Iik7aWYocj49aSYmdD49bilyZXR1cm4gMDtpZihyPj1pKXJldHVybi0xO2lmKHQ+PW4pcmV0dXJuIDE7aWYodGhpcz09PWUpcmV0dXJuIDA7Zm9yKHZhciBvPShpPj4+PTApLShyPj4+PTApLHM9KG4+Pj49MCktKHQ+Pj49MCksYT1NYXRoLm1pbihvLHMpLGM9dGhpcy5zbGljZShyLGkpLHU9ZS5zbGljZSh0LG4pLGw9MDtsPGE7KytsKWlmKGNbbF0hPT11W2xdKXtvPWNbbF0scz11W2xdO2JyZWFrfXJldHVybiBvPHM/LTE6czxvPzE6MH0sZW4ucHJvdG90eXBlLmluY2x1ZGVzPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4tMSE9PXRoaXMuaW5kZXhPZihlLHQsbil9LGVuLnByb3RvdHlwZS5pbmRleE9mPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gZG4odGhpcyxlLHQsbiwhMCl9LGVuLnByb3RvdHlwZS5sYXN0SW5kZXhPZj1mdW5jdGlvbihlLHQsbil7cmV0dXJuIGRuKHRoaXMsZSx0LG4sITEpfSxlbi5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24oZSx0LG4scil7aWYodm9pZCAwPT09dClyPSJ1dGY4IixuPXRoaXMubGVuZ3RoLHQ9MDtlbHNlIGlmKHZvaWQgMD09PW4mJiJzdHJpbmciPT10eXBlb2YgdClyPXQsbj10aGlzLmxlbmd0aCx0PTA7ZWxzZXtpZighaXNGaW5pdGUodCkpdGhyb3cgbmV3IEVycm9yKCJCdWZmZXIud3JpdGUoc3RyaW5nLCBlbmNvZGluZywgb2Zmc2V0WywgbGVuZ3RoXSkgaXMgbm8gbG9uZ2VyIHN1cHBvcnRlZCIpO3R8PTAsaXNGaW5pdGUobik/KG58PTAsdm9pZCAwPT09ciYmKHI9InV0ZjgiKSk6KHI9bixuPXZvaWQgMCl9dmFyIGk9dGhpcy5sZW5ndGgtdDtpZigodm9pZCAwPT09bnx8bj5pKSYmKG49aSksZS5sZW5ndGg+MCYmKG48MHx8dDwwKXx8dD50aGlzLmxlbmd0aCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiQXR0ZW1wdCB0byB3cml0ZSBvdXRzaWRlIGJ1ZmZlciBib3VuZHMiKTtyfHwocj0idXRmOCIpO2Zvcih2YXIgbz0hMTs7KXN3aXRjaChyKXtjYXNlImhleCI6cmV0dXJuIGZuKHRoaXMsZSx0LG4pO2Nhc2UidXRmOCI6Y2FzZSJ1dGYtOCI6cmV0dXJuIHBuKHRoaXMsZSx0LG4pO2Nhc2UiYXNjaWkiOnJldHVybiBnbih0aGlzLGUsdCxuKTtjYXNlImxhdGluMSI6Y2FzZSJiaW5hcnkiOnJldHVybiB2bih0aGlzLGUsdCxuKTtjYXNlImJhc2U2NCI6cmV0dXJuIHluKHRoaXMsZSx0LG4pO2Nhc2UidWNzMiI6Y2FzZSJ1Y3MtMiI6Y2FzZSJ1dGYxNmxlIjpjYXNlInV0Zi0xNmxlIjpyZXR1cm4gbW4odGhpcyxlLHQsbik7ZGVmYXVsdDppZihvKXRocm93IG5ldyBUeXBlRXJyb3IoIlVua25vd24gZW5jb2Rpbmc6ICIrcik7cj0oIiIrcikudG9Mb3dlckNhc2UoKSxvPSEwfX0sZW4ucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybnt0eXBlOiJCdWZmZXIiLGRhdGE6QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodGhpcy5fYXJyfHx0aGlzLDApfX07dmFyIFNuPTQwOTY7ZnVuY3Rpb24gYm4oZSx0LG4pe3ZhciByPSIiO249TWF0aC5taW4oZS5sZW5ndGgsbik7Zm9yKHZhciBpPXQ7aTxuOysraSlyKz1TdHJpbmcuZnJvbUNoYXJDb2RlKDEyNyZlW2ldKTtyZXR1cm4gcn1mdW5jdGlvbiBrbihlLHQsbil7dmFyIHI9IiI7bj1NYXRoLm1pbihlLmxlbmd0aCxuKTtmb3IodmFyIGk9dDtpPG47KytpKXIrPVN0cmluZy5mcm9tQ2hhckNvZGUoZVtpXSk7cmV0dXJuIHJ9ZnVuY3Rpb24gRW4oZSx0LG4pe3ZhciByPWUubGVuZ3RoOyghdHx8dDwwKSYmKHQ9MCksKCFufHxuPDB8fG4+cikmJihuPXIpO2Zvcih2YXIgaT0iIixvPXQ7bzxuOysrbylpKz1MbihlW29dKTtyZXR1cm4gaX1mdW5jdGlvbiBUbihlLHQsbil7Zm9yKHZhciByPWUuc2xpY2UodCxuKSxpPSIiLG89MDtvPHIubGVuZ3RoO28rPTIpaSs9U3RyaW5nLmZyb21DaGFyQ29kZShyW29dKzI1NipyW28rMV0pO3JldHVybiBpfWZ1bmN0aW9uIEFuKGUsdCxuKXtpZihlJTEhPTB8fGU8MCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigib2Zmc2V0IGlzIG5vdCB1aW50Iik7aWYoZSt0Pm4pdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlRyeWluZyB0byBhY2Nlc3MgYmV5b25kIGJ1ZmZlciBsZW5ndGgiKX1mdW5jdGlvbiBSbihlLHQsbixyLGksbyl7aWYoIWFuKGUpKXRocm93IG5ldyBUeXBlRXJyb3IoJyJidWZmZXIiIGFyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXIgaW5zdGFuY2UnKTtpZih0Pml8fHQ8byl0aHJvdyBuZXcgUmFuZ2VFcnJvcignInZhbHVlIiBhcmd1bWVudCBpcyBvdXQgb2YgYm91bmRzJyk7aWYobityPmUubGVuZ3RoKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbmRleCBvdXQgb2YgcmFuZ2UiKX1mdW5jdGlvbiBDbihlLHQsbixyKXt0PDAmJih0PTY1NTM1K3QrMSk7Zm9yKHZhciBpPTAsbz1NYXRoLm1pbihlLmxlbmd0aC1uLDIpO2k8bzsrK2kpZVtuK2ldPSh0JjI1NTw8OCoocj9pOjEtaSkpPj4+OCoocj9pOjEtaSl9ZnVuY3Rpb24gRG4oZSx0LG4scil7dDwwJiYodD00Mjk0OTY3Mjk1K3QrMSk7Zm9yKHZhciBpPTAsbz1NYXRoLm1pbihlLmxlbmd0aC1uLDQpO2k8bzsrK2kpZVtuK2ldPXQ+Pj44KihyP2k6My1pKSYyNTV9ZnVuY3Rpb24gUG4oZSx0LG4scixpLG8pe2lmKG4rcj5lLmxlbmd0aCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW5kZXggb3V0IG9mIHJhbmdlIik7aWYobjwwKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbmRleCBvdXQgb2YgcmFuZ2UiKX1mdW5jdGlvbiBJbihlLHQsbixyLGkpe3JldHVybiBpfHxQbihlLDAsbiw0KSxWdChlLHQsbixyLDIzLDQpLG4rNH1mdW5jdGlvbiBPbihlLHQsbixyLGkpe3JldHVybiBpfHxQbihlLDAsbiw4KSxWdChlLHQsbixyLDUyLDgpLG4rOH1lbi5wcm90b3R5cGUuc2xpY2U9ZnVuY3Rpb24oZSx0KXt2YXIgbixyPXRoaXMubGVuZ3RoO2lmKChlPX5+ZSk8MD8oZSs9cik8MCYmKGU9MCk6ZT5yJiYoZT1yKSwodD12b2lkIDA9PT10P3I6fn50KTwwPyh0Kz1yKTwwJiYodD0wKTp0PnImJih0PXIpLHQ8ZSYmKHQ9ZSksZW4uVFlQRURfQVJSQVlfU1VQUE9SVCkobj10aGlzLnN1YmFycmF5KGUsdCkpLl9fcHJvdG9fXz1lbi5wcm90b3R5cGU7ZWxzZXt2YXIgaT10LWU7bj1uZXcgZW4oaSx2b2lkIDApO2Zvcih2YXIgbz0wO288aTsrK28pbltvXT10aGlzW28rZV19cmV0dXJuIG59LGVuLnByb3RvdHlwZS5yZWFkVUludExFPWZ1bmN0aW9uKGUsdCxuKXtlfD0wLHR8PTAsbnx8QW4oZSx0LHRoaXMubGVuZ3RoKTtmb3IodmFyIHI9dGhpc1tlXSxpPTEsbz0wOysrbzx0JiYoaSo9MjU2KTspcis9dGhpc1tlK29dKmk7cmV0dXJuIHJ9LGVuLnByb3RvdHlwZS5yZWFkVUludEJFPWZ1bmN0aW9uKGUsdCxuKXtlfD0wLHR8PTAsbnx8QW4oZSx0LHRoaXMubGVuZ3RoKTtmb3IodmFyIHI9dGhpc1tlKy0tdF0saT0xO3Q+MCYmKGkqPTI1Nik7KXIrPXRoaXNbZSstLXRdKmk7cmV0dXJuIHJ9LGVuLnByb3RvdHlwZS5yZWFkVUludDg9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdHx8QW4oZSwxLHRoaXMubGVuZ3RoKSx0aGlzW2VdfSxlbi5wcm90b3R5cGUucmVhZFVJbnQxNkxFPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHR8fEFuKGUsMix0aGlzLmxlbmd0aCksdGhpc1tlXXx0aGlzW2UrMV08PDh9LGVuLnByb3RvdHlwZS5yZWFkVUludDE2QkU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdHx8QW4oZSwyLHRoaXMubGVuZ3RoKSx0aGlzW2VdPDw4fHRoaXNbZSsxXX0sZW4ucHJvdG90eXBlLnJlYWRVSW50MzJMRT1mdW5jdGlvbihlLHQpe3JldHVybiB0fHxBbihlLDQsdGhpcy5sZW5ndGgpLCh0aGlzW2VdfHRoaXNbZSsxXTw8OHx0aGlzW2UrMl08PDE2KSsxNjc3NzIxNip0aGlzW2UrM119LGVuLnByb3RvdHlwZS5yZWFkVUludDMyQkU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdHx8QW4oZSw0LHRoaXMubGVuZ3RoKSwxNjc3NzIxNip0aGlzW2VdKyh0aGlzW2UrMV08PDE2fHRoaXNbZSsyXTw8OHx0aGlzW2UrM10pfSxlbi5wcm90b3R5cGUucmVhZEludExFPWZ1bmN0aW9uKGUsdCxuKXtlfD0wLHR8PTAsbnx8QW4oZSx0LHRoaXMubGVuZ3RoKTtmb3IodmFyIHI9dGhpc1tlXSxpPTEsbz0wOysrbzx0JiYoaSo9MjU2KTspcis9dGhpc1tlK29dKmk7cmV0dXJuIHI+PShpKj0xMjgpJiYoci09TWF0aC5wb3coMiw4KnQpKSxyfSxlbi5wcm90b3R5cGUucmVhZEludEJFPWZ1bmN0aW9uKGUsdCxuKXtlfD0wLHR8PTAsbnx8QW4oZSx0LHRoaXMubGVuZ3RoKTtmb3IodmFyIHI9dCxpPTEsbz10aGlzW2UrLS1yXTtyPjAmJihpKj0yNTYpOylvKz10aGlzW2UrLS1yXSppO3JldHVybiBvPj0oaSo9MTI4KSYmKG8tPU1hdGgucG93KDIsOCp0KSksb30sZW4ucHJvdG90eXBlLnJlYWRJbnQ4PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHR8fEFuKGUsMSx0aGlzLmxlbmd0aCksMTI4JnRoaXNbZV0/LTEqKDI1NS10aGlzW2VdKzEpOnRoaXNbZV19LGVuLnByb3RvdHlwZS5yZWFkSW50MTZMRT1mdW5jdGlvbihlLHQpe3R8fEFuKGUsMix0aGlzLmxlbmd0aCk7dmFyIG49dGhpc1tlXXx0aGlzW2UrMV08PDg7cmV0dXJuIDMyNzY4Jm4/NDI5NDkwMTc2MHxuOm59LGVuLnByb3RvdHlwZS5yZWFkSW50MTZCRT1mdW5jdGlvbihlLHQpe3R8fEFuKGUsMix0aGlzLmxlbmd0aCk7dmFyIG49dGhpc1tlKzFdfHRoaXNbZV08PDg7cmV0dXJuIDMyNzY4Jm4/NDI5NDkwMTc2MHxuOm59LGVuLnByb3RvdHlwZS5yZWFkSW50MzJMRT1mdW5jdGlvbihlLHQpe3JldHVybiB0fHxBbihlLDQsdGhpcy5sZW5ndGgpLHRoaXNbZV18dGhpc1tlKzFdPDw4fHRoaXNbZSsyXTw8MTZ8dGhpc1tlKzNdPDwyNH0sZW4ucHJvdG90eXBlLnJlYWRJbnQzMkJFPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHR8fEFuKGUsNCx0aGlzLmxlbmd0aCksdGhpc1tlXTw8MjR8dGhpc1tlKzFdPDwxNnx0aGlzW2UrMl08PDh8dGhpc1tlKzNdfSxlbi5wcm90b3R5cGUucmVhZEZsb2F0TEU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdHx8QW4oZSw0LHRoaXMubGVuZ3RoKSxZdCh0aGlzLGUsITAsMjMsNCl9LGVuLnByb3RvdHlwZS5yZWFkRmxvYXRCRT1mdW5jdGlvbihlLHQpe3JldHVybiB0fHxBbihlLDQsdGhpcy5sZW5ndGgpLFl0KHRoaXMsZSwhMSwyMyw0KX0sZW4ucHJvdG90eXBlLnJlYWREb3VibGVMRT1mdW5jdGlvbihlLHQpe3JldHVybiB0fHxBbihlLDgsdGhpcy5sZW5ndGgpLFl0KHRoaXMsZSwhMCw1Miw4KX0sZW4ucHJvdG90eXBlLnJlYWREb3VibGVCRT1mdW5jdGlvbihlLHQpe3JldHVybiB0fHxBbihlLDgsdGhpcy5sZW5ndGgpLFl0KHRoaXMsZSwhMSw1Miw4KX0sZW4ucHJvdG90eXBlLndyaXRlVUludExFPWZ1bmN0aW9uKGUsdCxuLHIpeyhlPStlLHR8PTAsbnw9MCxyKXx8Um4odGhpcyxlLHQsbixNYXRoLnBvdygyLDgqbiktMSwwKTt2YXIgaT0xLG89MDtmb3IodGhpc1t0XT0yNTUmZTsrK288biYmKGkqPTI1Nik7KXRoaXNbdCtvXT1lL2kmMjU1O3JldHVybiB0K259LGVuLnByb3RvdHlwZS53cml0ZVVJbnRCRT1mdW5jdGlvbihlLHQsbixyKXsoZT0rZSx0fD0wLG58PTAscil8fFJuKHRoaXMsZSx0LG4sTWF0aC5wb3coMiw4Km4pLTEsMCk7dmFyIGk9bi0xLG89MTtmb3IodGhpc1t0K2ldPTI1NSZlOy0taT49MCYmKG8qPTI1Nik7KXRoaXNbdCtpXT1lL28mMjU1O3JldHVybiB0K259LGVuLnByb3RvdHlwZS53cml0ZVVJbnQ4PWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gZT0rZSx0fD0wLG58fFJuKHRoaXMsZSx0LDEsMjU1LDApLGVuLlRZUEVEX0FSUkFZX1NVUFBPUlR8fChlPU1hdGguZmxvb3IoZSkpLHRoaXNbdF09MjU1JmUsdCsxfSxlbi5wcm90b3R5cGUud3JpdGVVSW50MTZMRT1mdW5jdGlvbihlLHQsbil7cmV0dXJuIGU9K2UsdHw9MCxufHxSbih0aGlzLGUsdCwyLDY1NTM1LDApLGVuLlRZUEVEX0FSUkFZX1NVUFBPUlQ/KHRoaXNbdF09MjU1JmUsdGhpc1t0KzFdPWU+Pj44KTpDbih0aGlzLGUsdCwhMCksdCsyfSxlbi5wcm90b3R5cGUud3JpdGVVSW50MTZCRT1mdW5jdGlvbihlLHQsbil7cmV0dXJuIGU9K2UsdHw9MCxufHxSbih0aGlzLGUsdCwyLDY1NTM1LDApLGVuLlRZUEVEX0FSUkFZX1NVUFBPUlQ/KHRoaXNbdF09ZT4+PjgsdGhpc1t0KzFdPTI1NSZlKTpDbih0aGlzLGUsdCwhMSksdCsyfSxlbi5wcm90b3R5cGUud3JpdGVVSW50MzJMRT1mdW5jdGlvbihlLHQsbil7cmV0dXJuIGU9K2UsdHw9MCxufHxSbih0aGlzLGUsdCw0LDQyOTQ5NjcyOTUsMCksZW4uVFlQRURfQVJSQVlfU1VQUE9SVD8odGhpc1t0KzNdPWU+Pj4yNCx0aGlzW3QrMl09ZT4+PjE2LHRoaXNbdCsxXT1lPj4+OCx0aGlzW3RdPTI1NSZlKTpEbih0aGlzLGUsdCwhMCksdCs0fSxlbi5wcm90b3R5cGUud3JpdGVVSW50MzJCRT1mdW5jdGlvbihlLHQsbil7cmV0dXJuIGU9K2UsdHw9MCxufHxSbih0aGlzLGUsdCw0LDQyOTQ5NjcyOTUsMCksZW4uVFlQRURfQVJSQVlfU1VQUE9SVD8odGhpc1t0XT1lPj4+MjQsdGhpc1t0KzFdPWU+Pj4xNix0aGlzW3QrMl09ZT4+PjgsdGhpc1t0KzNdPTI1NSZlKTpEbih0aGlzLGUsdCwhMSksdCs0fSxlbi5wcm90b3R5cGUud3JpdGVJbnRMRT1mdW5jdGlvbihlLHQsbixyKXtpZihlPStlLHR8PTAsIXIpe3ZhciBpPU1hdGgucG93KDIsOCpuLTEpO1JuKHRoaXMsZSx0LG4saS0xLC1pKX12YXIgbz0wLHM9MSxhPTA7Zm9yKHRoaXNbdF09MjU1JmU7KytvPG4mJihzKj0yNTYpOyllPDAmJjA9PT1hJiYwIT09dGhpc1t0K28tMV0mJihhPTEpLHRoaXNbdCtvXT0oZS9zPj4wKS1hJjI1NTtyZXR1cm4gdCtufSxlbi5wcm90b3R5cGUud3JpdGVJbnRCRT1mdW5jdGlvbihlLHQsbixyKXtpZihlPStlLHR8PTAsIXIpe3ZhciBpPU1hdGgucG93KDIsOCpuLTEpO1JuKHRoaXMsZSx0LG4saS0xLC1pKX12YXIgbz1uLTEscz0xLGE9MDtmb3IodGhpc1t0K29dPTI1NSZlOy0tbz49MCYmKHMqPTI1Nik7KWU8MCYmMD09PWEmJjAhPT10aGlzW3QrbysxXSYmKGE9MSksdGhpc1t0K29dPShlL3M+PjApLWEmMjU1O3JldHVybiB0K259LGVuLnByb3RvdHlwZS53cml0ZUludDg9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBlPStlLHR8PTAsbnx8Um4odGhpcyxlLHQsMSwxMjcsLTEyOCksZW4uVFlQRURfQVJSQVlfU1VQUE9SVHx8KGU9TWF0aC5mbG9vcihlKSksZTwwJiYoZT0yNTUrZSsxKSx0aGlzW3RdPTI1NSZlLHQrMX0sZW4ucHJvdG90eXBlLndyaXRlSW50MTZMRT1mdW5jdGlvbihlLHQsbil7cmV0dXJuIGU9K2UsdHw9MCxufHxSbih0aGlzLGUsdCwyLDMyNzY3LC0zMjc2OCksZW4uVFlQRURfQVJSQVlfU1VQUE9SVD8odGhpc1t0XT0yNTUmZSx0aGlzW3QrMV09ZT4+PjgpOkNuKHRoaXMsZSx0LCEwKSx0KzJ9LGVuLnByb3RvdHlwZS53cml0ZUludDE2QkU9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBlPStlLHR8PTAsbnx8Um4odGhpcyxlLHQsMiwzMjc2NywtMzI3NjgpLGVuLlRZUEVEX0FSUkFZX1NVUFBPUlQ/KHRoaXNbdF09ZT4+PjgsdGhpc1t0KzFdPTI1NSZlKTpDbih0aGlzLGUsdCwhMSksdCsyfSxlbi5wcm90b3R5cGUud3JpdGVJbnQzMkxFPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gZT0rZSx0fD0wLG58fFJuKHRoaXMsZSx0LDQsMjE0NzQ4MzY0NywtMjE0NzQ4MzY0OCksZW4uVFlQRURfQVJSQVlfU1VQUE9SVD8odGhpc1t0XT0yNTUmZSx0aGlzW3QrMV09ZT4+PjgsdGhpc1t0KzJdPWU+Pj4xNix0aGlzW3QrM109ZT4+PjI0KTpEbih0aGlzLGUsdCwhMCksdCs0fSxlbi5wcm90b3R5cGUud3JpdGVJbnQzMkJFPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gZT0rZSx0fD0wLG58fFJuKHRoaXMsZSx0LDQsMjE0NzQ4MzY0NywtMjE0NzQ4MzY0OCksZTwwJiYoZT00Mjk0OTY3Mjk1K2UrMSksZW4uVFlQRURfQVJSQVlfU1VQUE9SVD8odGhpc1t0XT1lPj4+MjQsdGhpc1t0KzFdPWU+Pj4xNix0aGlzW3QrMl09ZT4+PjgsdGhpc1t0KzNdPTI1NSZlKTpEbih0aGlzLGUsdCwhMSksdCs0fSxlbi5wcm90b3R5cGUud3JpdGVGbG9hdExFPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gSW4odGhpcyxlLHQsITAsbil9LGVuLnByb3RvdHlwZS53cml0ZUZsb2F0QkU9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBJbih0aGlzLGUsdCwhMSxuKX0sZW4ucHJvdG90eXBlLndyaXRlRG91YmxlTEU9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBPbih0aGlzLGUsdCwhMCxuKX0sZW4ucHJvdG90eXBlLndyaXRlRG91YmxlQkU9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBPbih0aGlzLGUsdCwhMSxuKX0sZW4ucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24oZSx0LG4scil7aWYobnx8KG49MCkscnx8MD09PXJ8fChyPXRoaXMubGVuZ3RoKSx0Pj1lLmxlbmd0aCYmKHQ9ZS5sZW5ndGgpLHR8fCh0PTApLHI+MCYmcjxuJiYocj1uKSxyPT09bilyZXR1cm4gMDtpZigwPT09ZS5sZW5ndGh8fDA9PT10aGlzLmxlbmd0aClyZXR1cm4gMDtpZih0PDApdGhyb3cgbmV3IFJhbmdlRXJyb3IoInRhcmdldFN0YXJ0IG91dCBvZiBib3VuZHMiKTtpZihuPDB8fG4+PXRoaXMubGVuZ3RoKXRocm93IG5ldyBSYW5nZUVycm9yKCJzb3VyY2VTdGFydCBvdXQgb2YgYm91bmRzIik7aWYocjwwKXRocm93IG5ldyBSYW5nZUVycm9yKCJzb3VyY2VFbmQgb3V0IG9mIGJvdW5kcyIpO3I+dGhpcy5sZW5ndGgmJihyPXRoaXMubGVuZ3RoKSxlLmxlbmd0aC10PHItbiYmKHI9ZS5sZW5ndGgtdCtuKTt2YXIgaSxvPXItbjtpZih0aGlzPT09ZSYmbjx0JiZ0PHIpZm9yKGk9by0xO2k+PTA7LS1pKWVbaSt0XT10aGlzW2krbl07ZWxzZSBpZihvPDFlM3x8IWVuLlRZUEVEX0FSUkFZX1NVUFBPUlQpZm9yKGk9MDtpPG87KytpKWVbaSt0XT10aGlzW2krbl07ZWxzZSBVaW50OEFycmF5LnByb3RvdHlwZS5zZXQuY2FsbChlLHRoaXMuc3ViYXJyYXkobixuK28pLHQpO3JldHVybiBvfSxlbi5wcm90b3R5cGUuZmlsbD1mdW5jdGlvbihlLHQsbixyKXtpZigic3RyaW5nIj09dHlwZW9mIGUpe2lmKCJzdHJpbmciPT10eXBlb2YgdD8ocj10LHQ9MCxuPXRoaXMubGVuZ3RoKToic3RyaW5nIj09dHlwZW9mIG4mJihyPW4sbj10aGlzLmxlbmd0aCksMT09PWUubGVuZ3RoKXt2YXIgaT1lLmNoYXJDb2RlQXQoMCk7aTwyNTYmJihlPWkpfWlmKHZvaWQgMCE9PXImJiJzdHJpbmciIT10eXBlb2Ygcil0aHJvdyBuZXcgVHlwZUVycm9yKCJlbmNvZGluZyBtdXN0IGJlIGEgc3RyaW5nIik7aWYoInN0cmluZyI9PXR5cGVvZiByJiYhZW4uaXNFbmNvZGluZyhyKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJVbmtub3duIGVuY29kaW5nOiAiK3IpfWVsc2UibnVtYmVyIj09dHlwZW9mIGUmJihlJj0yNTUpO2lmKHQ8MHx8dGhpcy5sZW5ndGg8dHx8dGhpcy5sZW5ndGg8bil0aHJvdyBuZXcgUmFuZ2VFcnJvcigiT3V0IG9mIHJhbmdlIGluZGV4Iik7aWYobjw9dClyZXR1cm4gdGhpczt2YXIgbztpZih0Pj4+PTAsbj12b2lkIDA9PT1uP3RoaXMubGVuZ3RoOm4+Pj4wLGV8fChlPTApLCJudW1iZXIiPT10eXBlb2YgZSlmb3Iobz10O288bjsrK28pdGhpc1tvXT1lO2Vsc2V7dmFyIHM9YW4oZSk/ZTpIbihuZXcgZW4oZSxyKS50b1N0cmluZygpKSxhPXMubGVuZ3RoO2ZvcihvPTA7bzxuLXQ7KytvKXRoaXNbbyt0XT1zW28lYV19cmV0dXJuIHRoaXN9O3ZhciBVbj0vW14rXC8wLTlBLVphLXotX10vZztmdW5jdGlvbiBMbihlKXtyZXR1cm4gZTwxNj8iMCIrZS50b1N0cmluZygxNik6ZS50b1N0cmluZygxNil9ZnVuY3Rpb24gSG4oZSx0KXt2YXIgbjt0PXR8fDEvMDtmb3IodmFyIHI9ZS5sZW5ndGgsaT1udWxsLG89W10scz0wO3M8cjsrK3Mpe2lmKChuPWUuY2hhckNvZGVBdChzKSk+NTUyOTUmJm48NTczNDQpe2lmKCFpKXtpZihuPjU2MzE5KXsodC09Myk+LTEmJm8ucHVzaCgyMzksMTkxLDE4OSk7Y29udGludWV9aWYocysxPT09cil7KHQtPTMpPi0xJiZvLnB1c2goMjM5LDE5MSwxODkpO2NvbnRpbnVlfWk9bjtjb250aW51ZX1pZihuPDU2MzIwKXsodC09Myk+LTEmJm8ucHVzaCgyMzksMTkxLDE4OSksaT1uO2NvbnRpbnVlfW49NjU1MzYrKGktNTUyOTY8PDEwfG4tNTYzMjApfWVsc2UgaSYmKHQtPTMpPi0xJiZvLnB1c2goMjM5LDE5MSwxODkpO2lmKGk9bnVsbCxuPDEyOCl7aWYoKHQtPTEpPDApYnJlYWs7by5wdXNoKG4pfWVsc2UgaWYobjwyMDQ4KXtpZigodC09Mik8MClicmVhaztvLnB1c2gobj4+NnwxOTIsNjMmbnwxMjgpfWVsc2UgaWYobjw2NTUzNil7aWYoKHQtPTMpPDApYnJlYWs7by5wdXNoKG4+PjEyfDIyNCxuPj42JjYzfDEyOCw2MyZufDEyOCl9ZWxzZXtpZighKG48MTExNDExMikpdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIGNvZGUgcG9pbnQiKTtpZigodC09NCk8MClicmVhaztvLnB1c2gobj4+MTh8MjQwLG4+PjEyJjYzfDEyOCxuPj42JjYzfDEyOCw2MyZufDEyOCl9fXJldHVybiBvfWZ1bmN0aW9uIE1uKGUpe3JldHVybiBmdW5jdGlvbihlKXt2YXIgdCxuLHIsaSxvLHM7SnR8fEZ0KCk7dmFyIGE9ZS5sZW5ndGg7aWYoYSU0PjApdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIHN0cmluZy4gTGVuZ3RoIG11c3QgYmUgYSBtdWx0aXBsZSBvZiA0Iik7bz0iPSI9PT1lW2EtMl0/MjoiPSI9PT1lW2EtMV0/MTowLHM9bmV3IEJ0KDMqYS80LW8pLHI9bz4wP2EtNDphO3ZhciBjPTA7Zm9yKHQ9MCxuPTA7dDxyO3QrPTQsbis9MylpPUt0W2UuY2hhckNvZGVBdCh0KV08PDE4fEt0W2UuY2hhckNvZGVBdCh0KzEpXTw8MTJ8S3RbZS5jaGFyQ29kZUF0KHQrMildPDw2fEt0W2UuY2hhckNvZGVBdCh0KzMpXSxzW2MrK109aT4+MTYmMjU1LHNbYysrXT1pPj44JjI1NSxzW2MrK109MjU1Jmk7cmV0dXJuIDI9PT1vPyhpPUt0W2UuY2hhckNvZGVBdCh0KV08PDJ8S3RbZS5jaGFyQ29kZUF0KHQrMSldPj40LHNbYysrXT0yNTUmaSk6MT09PW8mJihpPUt0W2UuY2hhckNvZGVBdCh0KV08PDEwfEt0W2UuY2hhckNvZGVBdCh0KzEpXTw8NHxLdFtlLmNoYXJDb2RlQXQodCsyKV0+PjIsc1tjKytdPWk+PjgmMjU1LHNbYysrXT0yNTUmaSksc30oZnVuY3Rpb24oZSl7aWYoKGU9ZnVuY3Rpb24oZSl7cmV0dXJuIGUudHJpbT9lLnRyaW0oKTplLnJlcGxhY2UoL15ccyt8XHMrJC9nLCIiKX0oZSkucmVwbGFjZShVbiwiIikpLmxlbmd0aDwyKXJldHVybiIiO2Zvcig7ZS5sZW5ndGglNCE9MDspZSs9Ij0iO3JldHVybiBlfShlKSl9ZnVuY3Rpb24gam4oZSx0LG4scil7Zm9yKHZhciBpPTA7aTxyJiYhKGkrbj49dC5sZW5ndGh8fGk+PWUubGVuZ3RoKTsrK2kpdFtpK25dPWVbaV07cmV0dXJuIGl9ZnVuY3Rpb24gTm4oZSl7cmV0dXJuIG51bGwhPWUmJighIWUuX2lzQnVmZmVyfHxxbihlKXx8ZnVuY3Rpb24oZSl7cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIGUucmVhZEZsb2F0TEUmJiJmdW5jdGlvbiI9PXR5cGVvZiBlLnNsaWNlJiZxbihlLnNsaWNlKDAsMCkpfShlKSl9ZnVuY3Rpb24gcW4oZSl7cmV0dXJuISFlLmNvbnN0cnVjdG9yJiYiZnVuY3Rpb24iPT10eXBlb2YgZS5jb25zdHJ1Y3Rvci5pc0J1ZmZlciYmZS5jb25zdHJ1Y3Rvci5pc0J1ZmZlcihlKX12YXIgeG49T2JqZWN0LmZyZWV6ZSh7X19wcm90b19fOm51bGwsQnVmZmVyOmVuLElOU1BFQ1RfTUFYX0JZVEVTOjUwLFNsb3dCdWZmZXI6ZnVuY3Rpb24oZSl7cmV0dXJuK2UhPWUmJihlPTApLGVuLmFsbG9jKCtlKX0saXNCdWZmZXI6Tm4sa01heExlbmd0aDokdH0pLEtuPXtleHBvcnRzOnt9fSxCbj17fSxKbj17fTtPYmplY3QuZGVmaW5lUHJvcGVydHkoSm4sIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLEpuLmRlZmF1bHQ9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5sZW5ndGgsbj10JTQ7aWYoIW4pcmV0dXJuIGU7dmFyIHI9dCxpPTQtbixvPXQraSxzPWVuLmFsbG9jKG8pO2ZvcihzLndyaXRlKGUpO2ktLTspcy53cml0ZSgiPSIscisrKTtyZXR1cm4gcy50b1N0cmluZygpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkoQm4sIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBGbj1KbjtmdW5jdGlvbiBXbihlLHQpe3JldHVybiB2b2lkIDA9PT10JiYodD0idXRmOCIpLGVuLmlzQnVmZmVyKGUpP1luKGUudG9TdHJpbmcoImJhc2U2NCIpKTpZbihlbi5mcm9tKGUsdCkudG9TdHJpbmcoImJhc2U2NCIpKX1mdW5jdGlvbiB6bihlKXtyZXR1cm4gZT1lLnRvU3RyaW5nKCksRm4uZGVmYXVsdChlKS5yZXBsYWNlKC9cLS9nLCIrIikucmVwbGFjZSgvXy9nLCIvIil9ZnVuY3Rpb24gWW4oZSl7cmV0dXJuIGUucmVwbGFjZSgvPS9nLCIiKS5yZXBsYWNlKC9cKy9nLCItIikucmVwbGFjZSgvXC8vZywiXyIpfXZhciBWbixHbj1XbjtHbi5lbmNvZGU9V24sR24uZGVjb2RlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHZvaWQgMD09PXQmJih0PSJ1dGY4IiksZW4uZnJvbSh6bihlKSwiYmFzZTY0IikudG9TdHJpbmcodCl9LEduLnRvQmFzZTY0PXpuLEduLmZyb21CYXNlNjQ9WW4sR24udG9CdWZmZXI9ZnVuY3Rpb24oZSl7cmV0dXJuIGVuLmZyb20oem4oZSksImJhc2U2NCIpfSxCbi5kZWZhdWx0PUduLChWbj1LbikuZXhwb3J0cz1Cbi5kZWZhdWx0LFZuLmV4cG9ydHMuZGVmYXVsdD1Wbi5leHBvcnRzO3ZhciBYbj1Lbi5leHBvcnRzLCRuPXtleHBvcnRzOnt9fTshZnVuY3Rpb24oZSl7IWZ1bmN0aW9uKHQsbil7dmFyIHI9e307IWZ1bmN0aW9uKGUpe2UuX19lc01vZHVsZT0hMCxlLmRpZ2VzdExlbmd0aD0zMixlLmJsb2NrU2l6ZT02NDt2YXIgdD1uZXcgVWludDMyQXJyYXkoWzExMTYzNTI0MDgsMTg5OTQ0NzQ0MSwzMDQ5MzIzNDcxLDM5MjEwMDk1NzMsOTYxOTg3MTYzLDE1MDg5NzA5OTMsMjQ1MzYzNTc0OCwyODcwNzYzMjIxLDM2MjQzODEwODAsMzEwNTk4NDAxLDYwNzIyNTI3OCwxNDI2ODgxOTg3LDE5MjUwNzgzODgsMjE2MjA3ODIwNiwyNjE0ODg4MTAzLDMyNDgyMjI1ODAsMzgzNTM5MDQwMSw0MDIyMjI0Nzc0LDI2NDM0NzA3OCw2MDQ4MDc2MjgsNzcwMjU1OTgzLDEyNDkxNTAxMjIsMTU1NTA4MTY5MiwxOTk2MDY0OTg2LDI1NTQyMjA4ODIsMjgyMTgzNDM0OSwyOTUyOTk2ODA4LDMyMTAzMTM2NzEsMzMzNjU3MTg5MSwzNTg0NTI4NzExLDExMzkyNjk5MywzMzgyNDE4OTUsNjY2MzA3MjA1LDc3MzUyOTkxMiwxMjk0NzU3MzcyLDEzOTYxODIyOTEsMTY5NTE4MzcwMCwxOTg2NjYxMDUxLDIxNzcwMjYzNTAsMjQ1Njk1NjAzNywyNzMwNDg1OTIxLDI4MjAzMDI0MTEsMzI1OTczMDgwMCwzMzQ1NzY0NzcxLDM1MTYwNjU4MTcsMzYwMDM1MjgwNCw0MDk0NTcxOTA5LDI3NTQyMzM0NCw0MzAyMjc3MzQsNTA2OTQ4NjE2LDY1OTA2MDU1Niw4ODM5OTc4NzcsOTU4MTM5NTcxLDEzMjI4MjIyMTgsMTUzNzAwMjA2MywxNzQ3ODczNzc5LDE5NTU1NjIyMjIsMjAyNDEwNDgxNSwyMjI3NzMwNDUyLDIzNjE4NTI0MjQsMjQyODQzNjQ3NCwyNzU2NzM0MTg3LDMyMDQwMzE0NzksMzMyOTMyNTI5OF0pO2Z1bmN0aW9uIG4oZSxuLHIsaSxvKXtmb3IodmFyIHMsYSxjLHUsbCxkLGgsZixwLGcsdix5LG07bz49NjQ7KXtmb3Iocz1uWzBdLGE9blsxXSxjPW5bMl0sdT1uWzNdLGw9bls0XSxkPW5bNV0saD1uWzZdLGY9bls3XSxnPTA7ZzwxNjtnKyspdj1pKzQqZyxlW2ddPSgyNTUmclt2XSk8PDI0fCgyNTUmclt2KzFdKTw8MTZ8KDI1NSZyW3YrMl0pPDw4fDI1NSZyW3YrM107Zm9yKGc9MTY7Zzw2NDtnKyspeT0oKHA9ZVtnLTJdKT4+PjE3fHA8PDE1KV4ocD4+PjE5fHA8PDEzKV5wPj4+MTAsbT0oKHA9ZVtnLTE1XSk+Pj43fHA8PDI1KV4ocD4+PjE4fHA8PDE0KV5wPj4+MyxlW2ddPSh5K2VbZy03XXwwKSsobStlW2ctMTZdfDApO2ZvcihnPTA7Zzw2NDtnKyspeT0oKChsPj4+NnxsPDwyNileKGw+Pj4xMXxsPDwyMSleKGw+Pj4yNXxsPDw3KSkrKGwmZF5+bCZoKXwwKSsoZisodFtnXStlW2ddfDApfDApfDAsbT0oKHM+Pj4yfHM8PDMwKV4ocz4+PjEzfHM8PDE5KV4ocz4+PjIyfHM8PDEwKSkrKHMmYV5zJmNeYSZjKXwwLGY9aCxoPWQsZD1sLGw9dSt5fDAsdT1jLGM9YSxhPXMscz15K218MDtuWzBdKz1zLG5bMV0rPWEsblsyXSs9YyxuWzNdKz11LG5bNF0rPWwsbls1XSs9ZCxuWzZdKz1oLG5bN10rPWYsaSs9NjQsby09NjR9cmV0dXJuIGl9dmFyIHI9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7dGhpcy5kaWdlc3RMZW5ndGg9ZS5kaWdlc3RMZW5ndGgsdGhpcy5ibG9ja1NpemU9ZS5ibG9ja1NpemUsdGhpcy5zdGF0ZT1uZXcgSW50MzJBcnJheSg4KSx0aGlzLnRlbXA9bmV3IEludDMyQXJyYXkoNjQpLHRoaXMuYnVmZmVyPW5ldyBVaW50OEFycmF5KDEyOCksdGhpcy5idWZmZXJMZW5ndGg9MCx0aGlzLmJ5dGVzSGFzaGVkPTAsdGhpcy5maW5pc2hlZD0hMSx0aGlzLnJlc2V0KCl9cmV0dXJuIHQucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RhdGVbMF09MTc3OTAzMzcwMyx0aGlzLnN0YXRlWzFdPTMxNDQxMzQyNzcsdGhpcy5zdGF0ZVsyXT0xMDEzOTA0MjQyLHRoaXMuc3RhdGVbM109Mjc3MzQ4MDc2Mix0aGlzLnN0YXRlWzRdPTEzNTk4OTMxMTksdGhpcy5zdGF0ZVs1XT0yNjAwODIyOTI0LHRoaXMuc3RhdGVbNl09NTI4NzM0NjM1LHRoaXMuc3RhdGVbN109MTU0MTQ1OTIyNSx0aGlzLmJ1ZmZlckxlbmd0aD0wLHRoaXMuYnl0ZXNIYXNoZWQ9MCx0aGlzLmZpbmlzaGVkPSExLHRoaXN9LHQucHJvdG90eXBlLmNsZWFuPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPTA7ZTx0aGlzLmJ1ZmZlci5sZW5ndGg7ZSsrKXRoaXMuYnVmZmVyW2VdPTA7Zm9yKGU9MDtlPHRoaXMudGVtcC5sZW5ndGg7ZSsrKXRoaXMudGVtcFtlXT0wO3RoaXMucmVzZXQoKX0sdC5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKGUsdCl7aWYodm9pZCAwPT09dCYmKHQ9ZS5sZW5ndGgpLHRoaXMuZmluaXNoZWQpdGhyb3cgbmV3IEVycm9yKCJTSEEyNTY6IGNhbid0IHVwZGF0ZSBiZWNhdXNlIGhhc2ggd2FzIGZpbmlzaGVkLiIpO3ZhciByPTA7aWYodGhpcy5ieXRlc0hhc2hlZCs9dCx0aGlzLmJ1ZmZlckxlbmd0aD4wKXtmb3IoO3RoaXMuYnVmZmVyTGVuZ3RoPDY0JiZ0PjA7KXRoaXMuYnVmZmVyW3RoaXMuYnVmZmVyTGVuZ3RoKytdPWVbcisrXSx0LS07NjQ9PT10aGlzLmJ1ZmZlckxlbmd0aCYmKG4odGhpcy50ZW1wLHRoaXMuc3RhdGUsdGhpcy5idWZmZXIsMCw2NCksdGhpcy5idWZmZXJMZW5ndGg9MCl9Zm9yKHQ+PTY0JiYocj1uKHRoaXMudGVtcCx0aGlzLnN0YXRlLGUscix0KSx0JT02NCk7dD4wOyl0aGlzLmJ1ZmZlclt0aGlzLmJ1ZmZlckxlbmd0aCsrXT1lW3IrK10sdC0tO3JldHVybiB0aGlzfSx0LnByb3RvdHlwZS5maW5pc2g9ZnVuY3Rpb24oZSl7aWYoIXRoaXMuZmluaXNoZWQpe3ZhciB0PXRoaXMuYnl0ZXNIYXNoZWQscj10aGlzLmJ1ZmZlckxlbmd0aCxpPXQvNTM2ODcwOTEyfDAsbz10PDwzLHM9dCU2NDw1Nj82NDoxMjg7dGhpcy5idWZmZXJbcl09MTI4O2Zvcih2YXIgYT1yKzE7YTxzLTg7YSsrKXRoaXMuYnVmZmVyW2FdPTA7dGhpcy5idWZmZXJbcy04XT1pPj4+MjQmMjU1LHRoaXMuYnVmZmVyW3MtN109aT4+PjE2JjI1NSx0aGlzLmJ1ZmZlcltzLTZdPWk+Pj44JjI1NSx0aGlzLmJ1ZmZlcltzLTVdPWk+Pj4wJjI1NSx0aGlzLmJ1ZmZlcltzLTRdPW8+Pj4yNCYyNTUsdGhpcy5idWZmZXJbcy0zXT1vPj4+MTYmMjU1LHRoaXMuYnVmZmVyW3MtMl09bz4+PjgmMjU1LHRoaXMuYnVmZmVyW3MtMV09bz4+PjAmMjU1LG4odGhpcy50ZW1wLHRoaXMuc3RhdGUsdGhpcy5idWZmZXIsMCxzKSx0aGlzLmZpbmlzaGVkPSEwfWZvcihhPTA7YTw4O2ErKyllWzQqYSswXT10aGlzLnN0YXRlW2FdPj4+MjQmMjU1LGVbNCphKzFdPXRoaXMuc3RhdGVbYV0+Pj4xNiYyNTUsZVs0KmErMl09dGhpcy5zdGF0ZVthXT4+PjgmMjU1LGVbNCphKzNdPXRoaXMuc3RhdGVbYV0+Pj4wJjI1NTtyZXR1cm4gdGhpc30sdC5wcm90b3R5cGUuZGlnZXN0PWZ1bmN0aW9uKCl7dmFyIGU9bmV3IFVpbnQ4QXJyYXkodGhpcy5kaWdlc3RMZW5ndGgpO3JldHVybiB0aGlzLmZpbmlzaChlKSxlfSx0LnByb3RvdHlwZS5fc2F2ZVN0YXRlPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wO3Q8dGhpcy5zdGF0ZS5sZW5ndGg7dCsrKWVbdF09dGhpcy5zdGF0ZVt0XX0sdC5wcm90b3R5cGUuX3Jlc3RvcmVTdGF0ZT1mdW5jdGlvbihlLHQpe2Zvcih2YXIgbj0wO248dGhpcy5zdGF0ZS5sZW5ndGg7bisrKXRoaXMuc3RhdGVbbl09ZVtuXTt0aGlzLmJ5dGVzSGFzaGVkPXQsdGhpcy5maW5pc2hlZD0hMSx0aGlzLmJ1ZmZlckxlbmd0aD0wfSx0fSgpO2UuSGFzaD1yO3ZhciBpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt0aGlzLmlubmVyPW5ldyByLHRoaXMub3V0ZXI9bmV3IHIsdGhpcy5ibG9ja1NpemU9dGhpcy5pbm5lci5ibG9ja1NpemUsdGhpcy5kaWdlc3RMZW5ndGg9dGhpcy5pbm5lci5kaWdlc3RMZW5ndGg7dmFyIHQ9bmV3IFVpbnQ4QXJyYXkodGhpcy5ibG9ja1NpemUpO2lmKGUubGVuZ3RoPnRoaXMuYmxvY2tTaXplKShuZXcgcikudXBkYXRlKGUpLmZpbmlzaCh0KS5jbGVhbigpO2Vsc2UgZm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspdFtuXT1lW25dO2ZvcihuPTA7bjx0Lmxlbmd0aDtuKyspdFtuXV49NTQ7dGhpcy5pbm5lci51cGRhdGUodCk7Zm9yKG49MDtuPHQubGVuZ3RoO24rKyl0W25dXj0xMDY7dGhpcy5vdXRlci51cGRhdGUodCksdGhpcy5pc3RhdGU9bmV3IFVpbnQzMkFycmF5KDgpLHRoaXMub3N0YXRlPW5ldyBVaW50MzJBcnJheSg4KSx0aGlzLmlubmVyLl9zYXZlU3RhdGUodGhpcy5pc3RhdGUpLHRoaXMub3V0ZXIuX3NhdmVTdGF0ZSh0aGlzLm9zdGF0ZSk7Zm9yKG49MDtuPHQubGVuZ3RoO24rKyl0W25dPTB9cmV0dXJuIGUucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW5uZXIuX3Jlc3RvcmVTdGF0ZSh0aGlzLmlzdGF0ZSx0aGlzLmlubmVyLmJsb2NrU2l6ZSksdGhpcy5vdXRlci5fcmVzdG9yZVN0YXRlKHRoaXMub3N0YXRlLHRoaXMub3V0ZXIuYmxvY2tTaXplKSx0aGlzfSxlLnByb3RvdHlwZS5jbGVhbj1mdW5jdGlvbigpe2Zvcih2YXIgZT0wO2U8dGhpcy5pc3RhdGUubGVuZ3RoO2UrKyl0aGlzLm9zdGF0ZVtlXT10aGlzLmlzdGF0ZVtlXT0wO3RoaXMuaW5uZXIuY2xlYW4oKSx0aGlzLm91dGVyLmNsZWFuKCl9LGUucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5pbm5lci51cGRhdGUoZSksdGhpc30sZS5wcm90b3R5cGUuZmluaXNoPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLm91dGVyLmZpbmlzaGVkP3RoaXMub3V0ZXIuZmluaXNoKGUpOih0aGlzLmlubmVyLmZpbmlzaChlKSx0aGlzLm91dGVyLnVwZGF0ZShlLHRoaXMuZGlnZXN0TGVuZ3RoKS5maW5pc2goZSkpLHRoaXN9LGUucHJvdG90eXBlLmRpZ2VzdD1mdW5jdGlvbigpe3ZhciBlPW5ldyBVaW50OEFycmF5KHRoaXMuZGlnZXN0TGVuZ3RoKTtyZXR1cm4gdGhpcy5maW5pc2goZSksZX0sZX0oKTtmdW5jdGlvbiBvKGUpe3ZhciB0PShuZXcgcikudXBkYXRlKGUpLG49dC5kaWdlc3QoKTtyZXR1cm4gdC5jbGVhbigpLG59ZnVuY3Rpb24gcyhlLHQpe3ZhciBuPW5ldyBpKGUpLnVwZGF0ZSh0KSxyPW4uZGlnZXN0KCk7cmV0dXJuIG4uY2xlYW4oKSxyfWZ1bmN0aW9uIGEoZSx0LG4scil7dmFyIGk9clswXTtpZigwPT09aSl0aHJvdyBuZXcgRXJyb3IoImhrZGY6IGNhbm5vdCBleHBhbmQgbW9yZSIpO3QucmVzZXQoKSxpPjEmJnQudXBkYXRlKGUpLG4mJnQudXBkYXRlKG4pLHQudXBkYXRlKHIpLHQuZmluaXNoKGUpLHJbMF0rK31lLkhNQUM9aSxlLmhhc2g9byxlLmRlZmF1bHQ9byxlLmhtYWM9czt2YXIgYz1uZXcgVWludDhBcnJheShlLmRpZ2VzdExlbmd0aCk7ZnVuY3Rpb24gdShlLHQsbixyKXt2b2lkIDA9PT10JiYodD1jKSx2b2lkIDA9PT1yJiYocj0zMik7Zm9yKHZhciBvPW5ldyBVaW50OEFycmF5KFsxXSksdT1zKHQsZSksbD1uZXcgaSh1KSxkPW5ldyBVaW50OEFycmF5KGwuZGlnZXN0TGVuZ3RoKSxoPWQubGVuZ3RoLGY9bmV3IFVpbnQ4QXJyYXkocikscD0wO3A8cjtwKyspaD09PWQubGVuZ3RoJiYoYShkLGwsbixvKSxoPTApLGZbcF09ZFtoKytdO3JldHVybiBsLmNsZWFuKCksZC5maWxsKDApLG8uZmlsbCgwKSxmfWZ1bmN0aW9uIGwoZSx0LG4scil7Zm9yKHZhciBvPW5ldyBpKGUpLHM9by5kaWdlc3RMZW5ndGgsYT1uZXcgVWludDhBcnJheSg0KSxjPW5ldyBVaW50OEFycmF5KHMpLHU9bmV3IFVpbnQ4QXJyYXkocyksbD1uZXcgVWludDhBcnJheShyKSxkPTA7ZCpzPHI7ZCsrKXt2YXIgaD1kKzE7YVswXT1oPj4+MjQmMjU1LGFbMV09aD4+PjE2JjI1NSxhWzJdPWg+Pj44JjI1NSxhWzNdPWg+Pj4wJjI1NSxvLnJlc2V0KCksby51cGRhdGUodCksby51cGRhdGUoYSksby5maW5pc2godSk7Zm9yKHZhciBmPTA7ZjxzO2YrKyljW2ZdPXVbZl07Zm9yKGY9MjtmPD1uO2YrKyl7by5yZXNldCgpLG8udXBkYXRlKHUpLmZpbmlzaCh1KTtmb3IodmFyIHA9MDtwPHM7cCsrKWNbcF1ePXVbcF19Zm9yKGY9MDtmPHMmJmQqcytmPHI7ZisrKWxbZCpzK2ZdPWNbZl19Zm9yKGQ9MDtkPHM7ZCsrKWNbZF09dVtkXT0wO2ZvcihkPTA7ZDw0O2QrKylhW2RdPTA7cmV0dXJuIG8uY2xlYW4oKSxsfWUuaGtkZj11LGUucGJrZGYyPWx9KHIpO3ZhciBpPXIuZGVmYXVsdDtmb3IodmFyIG8gaW4gcilpW29dPXJbb107ZS5leHBvcnRzPWl9KCl9KCRuKTt2YXIgWm49RCgkbi5leHBvcnRzKSxRbj1jcnlwdG87Y29uc3QgZXI9ZT0+ZSBpbnN0YW5jZW9mIENyeXB0b0tleSx0cj1uZXcgVGV4dEVuY29kZXIsbnI9bmV3IFRleHREZWNvZGVyO2NvbnN0IHJyPWU9PntsZXQgdD1lO3QgaW5zdGFuY2VvZiBVaW50OEFycmF5JiYodD1uci5kZWNvZGUodCkpLHQ9dC5yZXBsYWNlKC8tL2csIisiKS5yZXBsYWNlKC9fL2csIi8iKS5yZXBsYWNlKC9ccy9nLCIiKTt0cnl7cmV0dXJuKGU9Pntjb25zdCB0PWF0b2IoZSksbj1uZXcgVWludDhBcnJheSh0Lmxlbmd0aCk7Zm9yKGxldCBlPTA7ZTx0Lmxlbmd0aDtlKyspbltlXT10LmNoYXJDb2RlQXQoZSk7cmV0dXJuIG59KSh0KX1jYXRjaChlKXt0aHJvdyBuZXcgVHlwZUVycm9yKCJUaGUgaW5wdXQgdG8gYmUgZGVjb2RlZCBpcyBub3QgY29ycmVjdGx5IGVuY29kZWQuIil9fTtjbGFzcyBpciBleHRlbmRzIEVycm9ye2NvbnN0cnVjdG9yKGUpe3ZhciB0O3N1cGVyKGUpLHRoaXMuY29kZT0iRVJSX0pPU0VfR0VORVJJQyIsdGhpcy5uYW1lPXRoaXMuY29uc3RydWN0b3IubmFtZSxudWxsPT09KHQ9RXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UpfHx2b2lkIDA9PT10fHx0LmNhbGwoRXJyb3IsdGhpcyx0aGlzLmNvbnN0cnVjdG9yKX1zdGF0aWMgZ2V0IGNvZGUoKXtyZXR1cm4iRVJSX0pPU0VfR0VORVJJQyJ9fWNsYXNzIG9yIGV4dGVuZHMgaXJ7Y29uc3RydWN0b3IoZSl7bGV0IHQ9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOiJ1bnNwZWNpZmllZCIsbj1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXT9hcmd1bWVudHNbMl06InVuc3BlY2lmaWVkIjtzdXBlcihlKSx0aGlzLmNvZGU9IkVSUl9KV1RfQ0xBSU1fVkFMSURBVElPTl9GQUlMRUQiLHRoaXMuY2xhaW09dCx0aGlzLnJlYXNvbj1ufXN0YXRpYyBnZXQgY29kZSgpe3JldHVybiJFUlJfSldUX0NMQUlNX1ZBTElEQVRJT05fRkFJTEVEIn19Y2xhc3Mgc3IgZXh0ZW5kcyBpcntjb25zdHJ1Y3RvcihlKXtsZXQgdD1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06InVuc3BlY2lmaWVkIixuPWFyZ3VtZW50cy5sZW5ndGg+MiYmdm9pZCAwIT09YXJndW1lbnRzWzJdP2FyZ3VtZW50c1syXToidW5zcGVjaWZpZWQiO3N1cGVyKGUpLHRoaXMuY29kZT0iRVJSX0pXVF9FWFBJUkVEIix0aGlzLmNsYWltPXQsdGhpcy5yZWFzb249bn1zdGF0aWMgZ2V0IGNvZGUoKXtyZXR1cm4iRVJSX0pXVF9FWFBJUkVEIn19Y2xhc3MgYXIgZXh0ZW5kcyBpcntjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksdGhpcy5jb2RlPSJFUlJfSk9TRV9BTEdfTk9UX0FMTE9XRUQifXN0YXRpYyBnZXQgY29kZSgpe3JldHVybiJFUlJfSk9TRV9BTEdfTk9UX0FMTE9XRUQifX1jbGFzcyBjciBleHRlbmRzIGlye2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSx0aGlzLmNvZGU9IkVSUl9KT1NFX05PVF9TVVBQT1JURUQifXN0YXRpYyBnZXQgY29kZSgpe3JldHVybiJFUlJfSk9TRV9OT1RfU1VQUE9SVEVEIn19Y2xhc3MgdXIgZXh0ZW5kcyBpcntjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksdGhpcy5jb2RlPSJFUlJfSldTX0lOVkFMSUQifXN0YXRpYyBnZXQgY29kZSgpe3JldHVybiJFUlJfSldTX0lOVkFMSUQifX1jbGFzcyBsciBleHRlbmRzIGlye2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSx0aGlzLmNvZGU9IkVSUl9KV1RfSU5WQUxJRCJ9c3RhdGljIGdldCBjb2RlKCl7cmV0dXJuIkVSUl9KV1RfSU5WQUxJRCJ9fWNsYXNzIGRyIGV4dGVuZHMgaXJ7Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpLHRoaXMuY29kZT0iRVJSX0pXS1NfSU5WQUxJRCJ9c3RhdGljIGdldCBjb2RlKCl7cmV0dXJuIkVSUl9KV0tTX0lOVkFMSUQifX1jbGFzcyBociBleHRlbmRzIGlye2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSx0aGlzLmNvZGU9IkVSUl9KV0tTX05PX01BVENISU5HX0tFWSIsdGhpcy5tZXNzYWdlPSJubyBhcHBsaWNhYmxlIGtleSBmb3VuZCBpbiB0aGUgSlNPTiBXZWIgS2V5IFNldCJ9c3RhdGljIGdldCBjb2RlKCl7cmV0dXJuIkVSUl9KV0tTX05PX01BVENISU5HX0tFWSJ9fWNsYXNzIGZyIGV4dGVuZHMgaXJ7Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpLHRoaXMuY29kZT0iRVJSX0pXS1NfTVVMVElQTEVfTUFUQ0hJTkdfS0VZUyIsdGhpcy5tZXNzYWdlPSJtdWx0aXBsZSBtYXRjaGluZyBrZXlzIGZvdW5kIGluIHRoZSBKU09OIFdlYiBLZXkgU2V0In1zdGF0aWMgZ2V0IGNvZGUoKXtyZXR1cm4iRVJSX0pXS1NfTVVMVElQTEVfTUFUQ0hJTkdfS0VZUyJ9fWNsYXNzIHByIGV4dGVuZHMgaXJ7Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpLHRoaXMuY29kZT0iRVJSX0pXU19TSUdOQVRVUkVfVkVSSUZJQ0FUSU9OX0ZBSUxFRCIsdGhpcy5tZXNzYWdlPSJzaWduYXR1cmUgdmVyaWZpY2F0aW9uIGZhaWxlZCJ9c3RhdGljIGdldCBjb2RlKCl7cmV0dXJuIkVSUl9KV1NfU0lHTkFUVVJFX1ZFUklGSUNBVElPTl9GQUlMRUQifX1mdW5jdGlvbiBncigpe3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiBXZWJTb2NrZXRQYWlyfWZ1bmN0aW9uIHZyKGUpe2xldCB0PWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXToiYWxnb3JpdGhtLm5hbWUiO3JldHVybiBuZXcgVHlwZUVycm9yKCJDcnlwdG9LZXkgZG9lcyBub3Qgc3VwcG9ydCB0aGlzIG9wZXJhdGlvbiwgaXRzICIuY29uY2F0KHQsIiBtdXN0IGJlICIpLmNvbmNhdChlKSl9ZnVuY3Rpb24geXIoZSx0KXtyZXR1cm4gZS5uYW1lPT09dH1mdW5jdGlvbiBtcihlKXtyZXR1cm4gcGFyc2VJbnQoZS5uYW1lLnNsaWNlKDQpLDEwKX1mdW5jdGlvbiB3cihlKXtzd2l0Y2goZSl7Y2FzZSJFUzI1NiI6cmV0dXJuIlAtMjU2IjtjYXNlIkVTMzg0IjpyZXR1cm4iUC0zODQiO2Nhc2UiRVM1MTIiOnJldHVybiJQLTUyMSI7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoInVucmVhY2hhYmxlIil9fWZ1bmN0aW9uIF9yKGUsdCl7aWYodC5sZW5ndGgmJiF0LnNvbWUoKHQ9PmUudXNhZ2VzLmluY2x1ZGVzKHQpKSkpe2xldCBlPSJDcnlwdG9LZXkgZG9lcyBub3Qgc3VwcG9ydCB0aGlzIG9wZXJhdGlvbiwgaXRzIHVzYWdlcyBtdXN0IGluY2x1ZGUgIjtpZih0Lmxlbmd0aD4yKXtjb25zdCBuPXQucG9wKCk7ZSs9Im9uZSBvZiAiLmNvbmNhdCh0LmpvaW4oIiwgIiksIiwgb3IgIikuY29uY2F0KG4sIi4iKX1lbHNlIDI9PT10Lmxlbmd0aD9lKz0ib25lIG9mICIuY29uY2F0KHRbMF0sIiBvciAiKS5jb25jYXQodFsxXSwiLiIpOmUrPSIiLmNvbmNhdCh0WzBdLCIuIik7dGhyb3cgbmV3IFR5cGVFcnJvcihlKX19dmFyIFNyPWZ1bmN0aW9uKGUpe2xldCB0PSJLZXkgbXVzdCBiZSAiO2Zvcih2YXIgbj1hcmd1bWVudHMubGVuZ3RoLHI9bmV3IEFycmF5KG4+MT9uLTE6MCksaT0xO2k8bjtpKyspcltpLTFdPWFyZ3VtZW50c1tpXTtpZihyLmxlbmd0aD4yKXtjb25zdCBlPXIucG9wKCk7dCs9Im9uZSBvZiB0eXBlICIuY29uY2F0KHIuam9pbigiLCAiKSwiLCBvciAiKS5jb25jYXQoZSwiLiIpfWVsc2UgMj09PXIubGVuZ3RoP3QrPSJvbmUgb2YgdHlwZSAiLmNvbmNhdChyWzBdLCIgb3IgIikuY29uY2F0KHJbMV0sIi4iKTp0Kz0ib2YgdHlwZSAiLmNvbmNhdChyWzBdLCIuIik7cmV0dXJuIG51bGw9PWU/dCs9IiBSZWNlaXZlZCAiLmNvbmNhdChlKToiZnVuY3Rpb24iPT10eXBlb2YgZSYmZS5uYW1lP3QrPSIgUmVjZWl2ZWQgZnVuY3Rpb24gIi5jb25jYXQoZS5uYW1lKToib2JqZWN0Ij09dHlwZW9mIGUmJm51bGwhPWUmJmUuY29uc3RydWN0b3ImJmUuY29uc3RydWN0b3IubmFtZSYmKHQrPSIgUmVjZWl2ZWQgYW4gaW5zdGFuY2Ugb2YgIi5jb25jYXQoZS5jb25zdHJ1Y3Rvci5uYW1lKSksdH0sYnI9ZT0+ZXIoZSk7Y29uc3Qga3I9WyJDcnlwdG9LZXkiXTtmdW5jdGlvbiBFcihlKXtpZigib2JqZWN0IiE9dHlwZW9mKHQ9ZSl8fG51bGw9PT10fHwiW29iamVjdCBPYmplY3RdIiE9PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKSlyZXR1cm4hMTt2YXIgdDtpZihudWxsPT09T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKXJldHVybiEwO2xldCBuPWU7Zm9yKDtudWxsIT09T2JqZWN0LmdldFByb3RvdHlwZU9mKG4pOyluPU9iamVjdC5nZXRQcm90b3R5cGVPZihuKTtyZXR1cm4gT2JqZWN0LmdldFByb3RvdHlwZU9mKGUpPT09bn1jb25zdCBUcj1hc3luYyBlPT57dmFyIHQsbjtjb25zdHthbGdvcml0aG06cixrZXlVc2FnZXM6aX09ZnVuY3Rpb24oZSl7bGV0IHQsbjtzd2l0Y2goZS5rdHkpe2Nhc2Uib2N0Ijpzd2l0Y2goZS5hbGcpe2Nhc2UiSFMyNTYiOmNhc2UiSFMzODQiOmNhc2UiSFM1MTIiOnQ9e25hbWU6IkhNQUMiLGhhc2g6IlNIQS0iLmNvbmNhdChlLmFsZy5zbGljZSgtMykpfSxuPVsic2lnbiIsInZlcmlmeSJdO2JyZWFrO2Nhc2UiQTEyOENCQy1IUzI1NiI6Y2FzZSJBMTkyQ0JDLUhTMzg0IjpjYXNlIkEyNTZDQkMtSFM1MTIiOnRocm93IG5ldyBjcigiIi5jb25jYXQoZS5hbGcsIiBrZXlzIGNhbm5vdCBiZSBpbXBvcnRlZCBhcyBDcnlwdG9LZXkgaW5zdGFuY2VzIikpO2Nhc2UiQTEyOEdDTSI6Y2FzZSJBMTkyR0NNIjpjYXNlIkEyNTZHQ00iOmNhc2UiQTEyOEdDTUtXIjpjYXNlIkExOTJHQ01LVyI6Y2FzZSJBMjU2R0NNS1ciOnQ9e25hbWU6IkFFUy1HQ00ifSxuPVsiZW5jcnlwdCIsImRlY3J5cHQiXTticmVhaztjYXNlIkExMjhLVyI6Y2FzZSJBMTkyS1ciOmNhc2UiQTI1NktXIjp0PXtuYW1lOiJBRVMtS1cifSxuPVsid3JhcEtleSIsInVud3JhcEtleSJdO2JyZWFrO2Nhc2UiUEJFUzItSFMyNTYrQTEyOEtXIjpjYXNlIlBCRVMyLUhTMzg0K0ExOTJLVyI6Y2FzZSJQQkVTMi1IUzUxMitBMjU2S1ciOnQ9e25hbWU6IlBCS0RGMiJ9LG49WyJkZXJpdmVCaXRzIl07YnJlYWs7ZGVmYXVsdDp0aHJvdyBuZXcgY3IoJ0ludmFsaWQgb3IgdW5zdXBwb3J0ZWQgSldLICJhbGciIChBbGdvcml0aG0pIFBhcmFtZXRlciB2YWx1ZScpfWJyZWFrO2Nhc2UiUlNBIjpzd2l0Y2goZS5hbGcpe2Nhc2UiUFMyNTYiOmNhc2UiUFMzODQiOmNhc2UiUFM1MTIiOnQ9e25hbWU6IlJTQS1QU1MiLGhhc2g6IlNIQS0iLmNvbmNhdChlLmFsZy5zbGljZSgtMykpfSxuPWUuZD9bInNpZ24iXTpbInZlcmlmeSJdO2JyZWFrO2Nhc2UiUlMyNTYiOmNhc2UiUlMzODQiOmNhc2UiUlM1MTIiOnQ9e25hbWU6IlJTQVNTQS1QS0NTMS12MV81IixoYXNoOiJTSEEtIi5jb25jYXQoZS5hbGcuc2xpY2UoLTMpKX0sbj1lLmQ/WyJzaWduIl06WyJ2ZXJpZnkiXTticmVhaztjYXNlIlJTQS1PQUVQIjpjYXNlIlJTQS1PQUVQLTI1NiI6Y2FzZSJSU0EtT0FFUC0zODQiOmNhc2UiUlNBLU9BRVAtNTEyIjp0PXtuYW1lOiJSU0EtT0FFUCIsaGFzaDoiU0hBLSIuY29uY2F0KHBhcnNlSW50KGUuYWxnLnNsaWNlKC0zKSwxMCl8fDEpfSxuPWUuZD9bImRlY3J5cHQiLCJ1bndyYXBLZXkiXTpbImVuY3J5cHQiLCJ3cmFwS2V5Il07YnJlYWs7ZGVmYXVsdDp0aHJvdyBuZXcgY3IoJ0ludmFsaWQgb3IgdW5zdXBwb3J0ZWQgSldLICJhbGciIChBbGdvcml0aG0pIFBhcmFtZXRlciB2YWx1ZScpfWJyZWFrO2Nhc2UiRUMiOnN3aXRjaChlLmFsZyl7Y2FzZSJFUzI1NiI6dD17bmFtZToiRUNEU0EiLG5hbWVkQ3VydmU6IlAtMjU2In0sbj1lLmQ/WyJzaWduIl06WyJ2ZXJpZnkiXTticmVhaztjYXNlIkVTMzg0Ijp0PXtuYW1lOiJFQ0RTQSIsbmFtZWRDdXJ2ZToiUC0zODQifSxuPWUuZD9bInNpZ24iXTpbInZlcmlmeSJdO2JyZWFrO2Nhc2UiRVM1MTIiOnQ9e25hbWU6IkVDRFNBIixuYW1lZEN1cnZlOiJQLTUyMSJ9LG49ZS5kP1sic2lnbiJdOlsidmVyaWZ5Il07YnJlYWs7Y2FzZSJFQ0RILUVTIjpjYXNlIkVDREgtRVMrQTEyOEtXIjpjYXNlIkVDREgtRVMrQTE5MktXIjpjYXNlIkVDREgtRVMrQTI1NktXIjp0PXtuYW1lOiJFQ0RIIixuYW1lZEN1cnZlOmUuY3J2fSxuPWUuZD9bImRlcml2ZUJpdHMiXTpbXTticmVhaztkZWZhdWx0OnRocm93IG5ldyBjcignSW52YWxpZCBvciB1bnN1cHBvcnRlZCBKV0sgImFsZyIgKEFsZ29yaXRobSkgUGFyYW1ldGVyIHZhbHVlJyl9YnJlYWs7Y2FzZSBncigpJiYiT0tQIjppZigiRWREU0EiIT09ZS5hbGcpdGhyb3cgbmV3IGNyKCdJbnZhbGlkIG9yIHVuc3VwcG9ydGVkIEpXSyAiYWxnIiAoQWxnb3JpdGhtKSBQYXJhbWV0ZXIgdmFsdWUnKTtpZigiRWQyNTUxOSIhPT1lLmNydil0aHJvdyBuZXcgY3IoJ0ludmFsaWQgb3IgdW5zdXBwb3J0ZWQgSldLICJjcnYiIChTdWJ0eXBlIG9mIEtleSBQYWlyKSBQYXJhbWV0ZXIgdmFsdWUnKTt0PXtuYW1lOiJOT0RFLUVEMjU1MTkiLG5hbWVkQ3VydmU6Ik5PREUtRUQyNTUxOSJ9LG49ZS5kP1sic2lnbiJdOlsidmVyaWZ5Il07YnJlYWs7ZGVmYXVsdDp0aHJvdyBuZXcgY3IoJ0ludmFsaWQgb3IgdW5zdXBwb3J0ZWQgSldLICJrdHkiIChLZXkgVHlwZSkgUGFyYW1ldGVyIHZhbHVlJyl9cmV0dXJue2FsZ29yaXRobTp0LGtleVVzYWdlczpufX0oZSksbz1bcixudWxsIT09KHQ9ZS5leHQpJiZ2b2lkIDAhPT10JiZ0LG51bGwhPT0obj1lLmtleV9vcHMpJiZ2b2lkIDAhPT1uP246aV07aWYoIlBCS0RGMiI9PT1yLm5hbWUpcmV0dXJuIFFuLnN1YnRsZS5pbXBvcnRLZXkoInJhdyIscnIoZS5rKSwuLi5vKTtjb25zdCBzPXsuLi5lfTtyZXR1cm4gZGVsZXRlIHMuYWxnLFFuLnN1YnRsZS5pbXBvcnRLZXkoImp3ayIscywuLi5vKX07Y29uc3QgQXI9KGUsdCxuKT0+e2Uuc3RhcnRzV2l0aCgiSFMiKXx8ImRpciI9PT1lfHxlLnN0YXJ0c1dpdGgoIlBCRVMyIil8fC9eQVxkezN9KD86R0NNKT9LVyQvLnRlc3QoZSk/KGU9PntpZighKGUgaW5zdGFuY2VvZiBVaW50OEFycmF5KSl7aWYoIWJyKGUpKXRocm93IG5ldyBUeXBlRXJyb3IoU3IoZSwuLi5rciwiVWludDhBcnJheSIpKTtpZigic2VjcmV0IiE9PWUudHlwZSl0aHJvdyBuZXcgVHlwZUVycm9yKCIiLmNvbmNhdChrci5qb2luKCIgb3IgIiksJyBpbnN0YW5jZXMgZm9yIHN5bW1ldHJpYyBhbGdvcml0aG1zIG11c3QgYmUgb2YgdHlwZSAic2VjcmV0IicpKX19KSh0KTooKGUsdCk9PntpZighYnIoZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihTcihlLC4uLmtyKSk7aWYoInNlY3JldCI9PT1lLnR5cGUpdGhyb3cgbmV3IFR5cGVFcnJvcigiIi5jb25jYXQoa3Iuam9pbigiIG9yICIpLCcgaW5zdGFuY2VzIGZvciBhc3ltbWV0cmljIGFsZ29yaXRobXMgbXVzdCBub3QgYmUgb2YgdHlwZSAic2VjcmV0IicpKTtpZigic2lnbiI9PT10JiYicHVibGljIj09PWUudHlwZSl0aHJvdyBuZXcgVHlwZUVycm9yKCIiLmNvbmNhdChrci5qb2luKCIgb3IgIiksJyBpbnN0YW5jZXMgZm9yIGFzeW1tZXRyaWMgYWxnb3JpdGhtIHNpZ25pbmcgbXVzdCBiZSBvZiB0eXBlICJwcml2YXRlIicpKTtpZigiZGVjcnlwdCI9PT10JiYicHVibGljIj09PWUudHlwZSl0aHJvdyBuZXcgVHlwZUVycm9yKCIiLmNvbmNhdChrci5qb2luKCIgb3IgIiksJyBpbnN0YW5jZXMgZm9yIGFzeW1tZXRyaWMgYWxnb3JpdGhtIGRlY3J5cHRpb24gbXVzdCBiZSBvZiB0eXBlICJwcml2YXRlIicpKTtpZihlLmFsZ29yaXRobSYmInZlcmlmeSI9PT10JiYicHJpdmF0ZSI9PT1lLnR5cGUpdGhyb3cgbmV3IFR5cGVFcnJvcigiIi5jb25jYXQoa3Iuam9pbigiIG9yICIpLCcgaW5zdGFuY2VzIGZvciBhc3ltbWV0cmljIGFsZ29yaXRobSB2ZXJpZnlpbmcgbXVzdCBiZSBvZiB0eXBlICJwdWJsaWMiJykpO2lmKGUuYWxnb3JpdGhtJiYiZW5jcnlwdCI9PT10JiYicHJpdmF0ZSI9PT1lLnR5cGUpdGhyb3cgbmV3IFR5cGVFcnJvcigiIi5jb25jYXQoa3Iuam9pbigiIG9yICIpLCcgaW5zdGFuY2VzIGZvciBhc3ltbWV0cmljIGFsZ29yaXRobSBlbmNyeXB0aW9uIG11c3QgYmUgb2YgdHlwZSAicHVibGljIicpKX0pKHQsbil9O2Z1bmN0aW9uIFJyKGUsdCxuKXtpZihlcih0KSlyZXR1cm4gZnVuY3Rpb24oZSx0KXtzd2l0Y2godCl7Y2FzZSJIUzI1NiI6Y2FzZSJIUzM4NCI6Y2FzZSJIUzUxMiI6e2lmKCF5cihlLmFsZ29yaXRobSwiSE1BQyIpKXRocm93IHZyKCJITUFDIik7Y29uc3Qgbj1wYXJzZUludCh0LnNsaWNlKDIpLDEwKTtpZihtcihlLmFsZ29yaXRobS5oYXNoKSE9PW4pdGhyb3cgdnIoIlNIQS0iLmNvbmNhdChuKSwiYWxnb3JpdGhtLmhhc2giKTticmVha31jYXNlIlJTMjU2IjpjYXNlIlJTMzg0IjpjYXNlIlJTNTEyIjp7aWYoIXlyKGUuYWxnb3JpdGhtLCJSU0FTU0EtUEtDUzEtdjFfNSIpKXRocm93IHZyKCJSU0FTU0EtUEtDUzEtdjFfNSIpO2NvbnN0IG49cGFyc2VJbnQodC5zbGljZSgyKSwxMCk7aWYobXIoZS5hbGdvcml0aG0uaGFzaCkhPT1uKXRocm93IHZyKCJTSEEtIi5jb25jYXQobiksImFsZ29yaXRobS5oYXNoIik7YnJlYWt9Y2FzZSJQUzI1NiI6Y2FzZSJQUzM4NCI6Y2FzZSJQUzUxMiI6e2lmKCF5cihlLmFsZ29yaXRobSwiUlNBLVBTUyIpKXRocm93IHZyKCJSU0EtUFNTIik7Y29uc3Qgbj1wYXJzZUludCh0LnNsaWNlKDIpLDEwKTtpZihtcihlLmFsZ29yaXRobS5oYXNoKSE9PW4pdGhyb3cgdnIoIlNIQS0iLmNvbmNhdChuKSwiYWxnb3JpdGhtLmhhc2giKTticmVha31jYXNlIGdyKCkmJiJFZERTQSI6aWYoIXlyKGUuYWxnb3JpdGhtLCJOT0RFLUVEMjU1MTkiKSl0aHJvdyB2cigiTk9ERS1FRDI1NTE5Iik7YnJlYWs7Y2FzZSJFUzI1NiI6Y2FzZSJFUzM4NCI6Y2FzZSJFUzUxMiI6e2lmKCF5cihlLmFsZ29yaXRobSwiRUNEU0EiKSl0aHJvdyB2cigiRUNEU0EiKTtjb25zdCBuPXdyKHQpO2lmKGUuYWxnb3JpdGhtLm5hbWVkQ3VydmUhPT1uKXRocm93IHZyKG4sImFsZ29yaXRobS5uYW1lZEN1cnZlIik7YnJlYWt9ZGVmYXVsdDp0aHJvdyBuZXcgVHlwZUVycm9yKCJDcnlwdG9LZXkgZG9lcyBub3Qgc3VwcG9ydCB0aGlzIG9wZXJhdGlvbiIpfWZvcih2YXIgbj1hcmd1bWVudHMubGVuZ3RoLHI9bmV3IEFycmF5KG4+Mj9uLTI6MCksaT0yO2k8bjtpKyspcltpLTJdPWFyZ3VtZW50c1tpXTtfcihlLHIpfSh0LGUsbiksdDtpZih0IGluc3RhbmNlb2YgVWludDhBcnJheSl7aWYoIWUuc3RhcnRzV2l0aCgiSFMiKSl0aHJvdyBuZXcgVHlwZUVycm9yKFNyKHQsLi4ua3IpKTtyZXR1cm4gUW4uc3VidGxlLmltcG9ydEtleSgicmF3Iix0LHtoYXNoOiJTSEEtIi5jb25jYXQoZS5zbGljZSgtMykpLG5hbWU6IkhNQUMifSwhMSxbbl0pfXRocm93IG5ldyBUeXBlRXJyb3IoU3IodCwuLi5rciwiVWludDhBcnJheSIpKX1jb25zdCBDcj1hc3luYyhlLHQsbixyKT0+e2NvbnN0IGk9YXdhaXQgUnIoZSx0LCJ2ZXJpZnkiKTsoKGUsdCk9PntpZihlLnN0YXJ0c1dpdGgoIlJTIil8fGUuc3RhcnRzV2l0aCgiUFMiKSl7Y29uc3R7bW9kdWx1c0xlbmd0aDpufT10LmFsZ29yaXRobTtpZigibnVtYmVyIiE9dHlwZW9mIG58fG48MjA0OCl0aHJvdyBuZXcgVHlwZUVycm9yKCIiLmNvbmNhdChlLCIgcmVxdWlyZXMga2V5IG1vZHVsdXNMZW5ndGggdG8gYmUgMjA0OCBiaXRzIG9yIGxhcmdlciIpKX19KShlLGkpO2NvbnN0IG89ZnVuY3Rpb24oZSx0KXtjb25zdCBuPSJTSEEtIi5jb25jYXQoZS5zbGljZSgtMykpO3N3aXRjaChlKXtjYXNlIkhTMjU2IjpjYXNlIkhTMzg0IjpjYXNlIkhTNTEyIjpyZXR1cm57aGFzaDpuLG5hbWU6IkhNQUMifTtjYXNlIlBTMjU2IjpjYXNlIlBTMzg0IjpjYXNlIlBTNTEyIjpyZXR1cm57aGFzaDpuLG5hbWU6IlJTQS1QU1MiLHNhbHRMZW5ndGg6ZS5zbGljZSgtMyk+PjN9O2Nhc2UiUlMyNTYiOmNhc2UiUlMzODQiOmNhc2UiUlM1MTIiOnJldHVybntoYXNoOm4sbmFtZToiUlNBU1NBLVBLQ1MxLXYxXzUifTtjYXNlIkVTMjU2IjpjYXNlIkVTMzg0IjpjYXNlIkVTNTEyIjpyZXR1cm57aGFzaDpuLG5hbWU6IkVDRFNBIixuYW1lZEN1cnZlOnQubmFtZWRDdXJ2ZX07Y2FzZSBncigpJiYiRWREU0EiOmNvbnN0e25hbWVkQ3VydmU6cn09dDtyZXR1cm57bmFtZTpyLG5hbWVkQ3VydmU6cn07ZGVmYXVsdDp0aHJvdyBuZXcgY3IoImFsZyAiLmNvbmNhdChlLCIgaXMgbm90IHN1cHBvcnRlZCBlaXRoZXIgYnkgSk9TRSBvciB5b3VyIGphdmFzY3JpcHQgcnVudGltZSIpKX19KGUsaS5hbGdvcml0aG0pO3RyeXtyZXR1cm4gYXdhaXQgUW4uc3VidGxlLnZlcmlmeShvLGksbixyKX1jYXRjaChlKXtyZXR1cm4hMX19O2FzeW5jIGZ1bmN0aW9uIERyKGUsdCxuKXt2YXIgcjtpZighRXIoZSkpdGhyb3cgbmV3IHVyKCJGbGF0dGVuZWQgSldTIG11c3QgYmUgYW4gb2JqZWN0Iik7aWYodm9pZCAwPT09ZS5wcm90ZWN0ZWQmJnZvaWQgMD09PWUuaGVhZGVyKXRocm93IG5ldyB1cignRmxhdHRlbmVkIEpXUyBtdXN0IGhhdmUgZWl0aGVyIG9mIHRoZSAicHJvdGVjdGVkIiBvciAiaGVhZGVyIiBtZW1iZXJzJyk7aWYodm9pZCAwIT09ZS5wcm90ZWN0ZWQmJiJzdHJpbmciIT10eXBlb2YgZS5wcm90ZWN0ZWQpdGhyb3cgbmV3IHVyKCJKV1MgUHJvdGVjdGVkIEhlYWRlciBpbmNvcnJlY3QgdHlwZSIpO2lmKHZvaWQgMD09PWUucGF5bG9hZCl0aHJvdyBuZXcgdXIoIkpXUyBQYXlsb2FkIG1pc3NpbmciKTtpZigic3RyaW5nIiE9dHlwZW9mIGUuc2lnbmF0dXJlKXRocm93IG5ldyB1cigiSldTIFNpZ25hdHVyZSBtaXNzaW5nIG9yIGluY29ycmVjdCB0eXBlIik7aWYodm9pZCAwIT09ZS5oZWFkZXImJiFFcihlLmhlYWRlcikpdGhyb3cgbmV3IHVyKCJKV1MgVW5wcm90ZWN0ZWQgSGVhZGVyIGluY29ycmVjdCB0eXBlIik7bGV0IGk9e307aWYoZS5wcm90ZWN0ZWQpe2NvbnN0IHQ9cnIoZS5wcm90ZWN0ZWQpO3RyeXtpPUpTT04ucGFyc2UobnIuZGVjb2RlKHQpKX1jYXRjaChlKXt0aHJvdyBuZXcgdXIoIkpXUyBQcm90ZWN0ZWQgSGVhZGVyIGlzIGludmFsaWQiKX19aWYoIWZ1bmN0aW9uKCl7Zm9yKHZhciBlPWFyZ3VtZW50cy5sZW5ndGgsdD1uZXcgQXJyYXkoZSksbj0wO248ZTtuKyspdFtuXT1hcmd1bWVudHNbbl07Y29uc3Qgcj10LmZpbHRlcihCb29sZWFuKTtpZigwPT09ci5sZW5ndGh8fDE9PT1yLmxlbmd0aClyZXR1cm4hMDtsZXQgaTtmb3IoY29uc3QgZSBvZiByKXtjb25zdCB0PU9iamVjdC5rZXlzKGUpO2lmKGkmJjAhPT1pLnNpemUpZm9yKGNvbnN0IGUgb2YgdCl7aWYoaS5oYXMoZSkpcmV0dXJuITE7aS5hZGQoZSl9ZWxzZSBpPW5ldyBTZXQodCl9cmV0dXJuITB9KGksZS5oZWFkZXIpKXRocm93IG5ldyB1cigiSldTIFByb3RlY3RlZCBhbmQgSldTIFVucHJvdGVjdGVkIEhlYWRlciBQYXJhbWV0ZXIgbmFtZXMgbXVzdCBiZSBkaXNqb2ludCIpO2NvbnN0IG89ey4uLmksLi4uZS5oZWFkZXJ9LHM9ZnVuY3Rpb24oZSx0LG4scixpKXtpZih2b2lkIDAhPT1pLmNyaXQmJnZvaWQgMD09PXIuY3JpdCl0aHJvdyBuZXcgZSgnImNyaXQiIChDcml0aWNhbCkgSGVhZGVyIFBhcmFtZXRlciBNVVNUIGJlIGludGVncml0eSBwcm90ZWN0ZWQnKTtpZighcnx8dm9pZCAwPT09ci5jcml0KXJldHVybiBuZXcgU2V0O2lmKCFBcnJheS5pc0FycmF5KHIuY3JpdCl8fDA9PT1yLmNyaXQubGVuZ3RofHxyLmNyaXQuc29tZSgoZT0+InN0cmluZyIhPXR5cGVvZiBlfHwwPT09ZS5sZW5ndGgpKSl0aHJvdyBuZXcgZSgnImNyaXQiIChDcml0aWNhbCkgSGVhZGVyIFBhcmFtZXRlciBNVVNUIGJlIGFuIGFycmF5IG9mIG5vbi1lbXB0eSBzdHJpbmdzIHdoZW4gcHJlc2VudCcpO2xldCBvO289dm9pZCAwIT09bj9uZXcgTWFwKFsuLi5PYmplY3QuZW50cmllcyhuKSwuLi50LmVudHJpZXMoKV0pOnQ7Zm9yKGNvbnN0IHQgb2Ygci5jcml0KXtpZighby5oYXModCkpdGhyb3cgbmV3IGNyKCdFeHRlbnNpb24gSGVhZGVyIFBhcmFtZXRlciAiJy5jb25jYXQodCwnIiBpcyBub3QgcmVjb2duaXplZCcpKTtpZih2b2lkIDA9PT1pW3RdKXRocm93IG5ldyBlKCdFeHRlbnNpb24gSGVhZGVyIFBhcmFtZXRlciAiJy5jb25jYXQodCwnIiBpcyBtaXNzaW5nJykpO2lmKG8uZ2V0KHQpJiZ2b2lkIDA9PT1yW3RdKXRocm93IG5ldyBlKCdFeHRlbnNpb24gSGVhZGVyIFBhcmFtZXRlciAiJy5jb25jYXQodCwnIiBNVVNUIGJlIGludGVncml0eSBwcm90ZWN0ZWQnKSl9cmV0dXJuIG5ldyBTZXQoci5jcml0KX0odXIsbmV3IE1hcChbWyJiNjQiLCEwXV0pLG51bGw9PW4/dm9pZCAwOm4uY3JpdCxpLG8pO2xldCBhPSEwO2lmKHMuaGFzKCJiNjQiKSYmKGE9aS5iNjQsImJvb2xlYW4iIT10eXBlb2YgYSkpdGhyb3cgbmV3IHVyKCdUaGUgImI2NCIgKGJhc2U2NHVybC1lbmNvZGUgcGF5bG9hZCkgSGVhZGVyIFBhcmFtZXRlciBtdXN0IGJlIGEgYm9vbGVhbicpO2NvbnN0e2FsZzpjfT1vO2lmKCJzdHJpbmciIT10eXBlb2YgY3x8IWMpdGhyb3cgbmV3IHVyKCdKV1MgImFsZyIgKEFsZ29yaXRobSkgSGVhZGVyIFBhcmFtZXRlciBtaXNzaW5nIG9yIGludmFsaWQnKTtjb25zdCB1PW4mJigoZSx0KT0+e2lmKHZvaWQgMCE9PXQmJighQXJyYXkuaXNBcnJheSh0KXx8dC5zb21lKChlPT4ic3RyaW5nIiE9dHlwZW9mIGUpKSkpdGhyb3cgbmV3IFR5cGVFcnJvcignIicuY29uY2F0KGUsJyIgb3B0aW9uIG11c3QgYmUgYW4gYXJyYXkgb2Ygc3RyaW5ncycpKTtpZih0KXJldHVybiBuZXcgU2V0KHQpfSkoImFsZ29yaXRobXMiLG4uYWxnb3JpdGhtcyk7aWYodSYmIXUuaGFzKGMpKXRocm93IG5ldyBhcignImFsZyIgKEFsZ29yaXRobSkgSGVhZGVyIFBhcmFtZXRlciBub3QgYWxsb3dlZCcpO2lmKGEpe2lmKCJzdHJpbmciIT10eXBlb2YgZS5wYXlsb2FkKXRocm93IG5ldyB1cigiSldTIFBheWxvYWQgbXVzdCBiZSBhIHN0cmluZyIpfWVsc2UgaWYoInN0cmluZyIhPXR5cGVvZiBlLnBheWxvYWQmJiEoZS5wYXlsb2FkIGluc3RhbmNlb2YgVWludDhBcnJheSkpdGhyb3cgbmV3IHVyKCJKV1MgUGF5bG9hZCBtdXN0IGJlIGEgc3RyaW5nIG9yIGFuIFVpbnQ4QXJyYXkgaW5zdGFuY2UiKTtsZXQgbD0hMTsiZnVuY3Rpb24iPT10eXBlb2YgdCYmKHQ9YXdhaXQgdChpLGUpLGw9ITApLEFyKGMsdCwidmVyaWZ5Iik7Y29uc3QgZD1mdW5jdGlvbigpe2Zvcih2YXIgZT1hcmd1bWVudHMubGVuZ3RoLHQ9bmV3IEFycmF5KGUpLG49MDtuPGU7bisrKXRbbl09YXJndW1lbnRzW25dO2NvbnN0IHI9dC5yZWR1Y2UoKChlLHQpPT57bGV0e2xlbmd0aDpufT10O3JldHVybiBlK259KSwwKSxpPW5ldyBVaW50OEFycmF5KHIpO2xldCBvPTA7cmV0dXJuIHQuZm9yRWFjaCgoZT0+e2kuc2V0KGUsbyksbys9ZS5sZW5ndGh9KSksaX0odHIuZW5jb2RlKG51bGwhPT0ocj1lLnByb3RlY3RlZCkmJnZvaWQgMCE9PXI/cjoiIiksdHIuZW5jb2RlKCIuIiksInN0cmluZyI9PXR5cGVvZiBlLnBheWxvYWQ/dHIuZW5jb2RlKGUucGF5bG9hZCk6ZS5wYXlsb2FkKSxoPXJyKGUuc2lnbmF0dXJlKTtpZighYXdhaXQgQ3IoYyx0LGgsZCkpdGhyb3cgbmV3IHByO2xldCBmO2Y9YT9ycihlLnBheWxvYWQpOiJzdHJpbmciPT10eXBlb2YgZS5wYXlsb2FkP3RyLmVuY29kZShlLnBheWxvYWQpOmUucGF5bG9hZDtjb25zdCBwPXtwYXlsb2FkOmZ9O3JldHVybiB2b2lkIDAhPT1lLnByb3RlY3RlZCYmKHAucHJvdGVjdGVkSGVhZGVyPWkpLHZvaWQgMCE9PWUuaGVhZGVyJiYocC51bnByb3RlY3RlZEhlYWRlcj1lLmhlYWRlciksbD97Li4ucCxrZXk6dH06cH12YXIgUHI9ZT0+TWF0aC5mbG9vcihlLmdldFRpbWUoKS8xZTMpO2NvbnN0IElyPTg2NDAwLE9yPS9eKFxkK3xcZCtcLlxkKykgPyhzZWNvbmRzP3xzZWNzP3xzfG1pbnV0ZXM/fG1pbnM/fG18aG91cnM/fGhycz98aHxkYXlzP3xkfHdlZWtzP3x3fHllYXJzP3x5cnM/fHkpJC9pO3ZhciBVcj1lPT57Y29uc3QgdD1Pci5leGVjKGUpO2lmKCF0KXRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgdGltZSBwZXJpb2QgZm9ybWF0Iik7Y29uc3Qgbj1wYXJzZUZsb2F0KHRbMV0pO3N3aXRjaCh0WzJdLnRvTG93ZXJDYXNlKCkpe2Nhc2Uic2VjIjpjYXNlInNlY3MiOmNhc2Uic2Vjb25kIjpjYXNlInNlY29uZHMiOmNhc2UicyI6cmV0dXJuIE1hdGgucm91bmQobik7Y2FzZSJtaW51dGUiOmNhc2UibWludXRlcyI6Y2FzZSJtaW4iOmNhc2UibWlucyI6Y2FzZSJtIjpyZXR1cm4gTWF0aC5yb3VuZCg2MCpuKTtjYXNlImhvdXIiOmNhc2UiaG91cnMiOmNhc2UiaHIiOmNhc2UiaHJzIjpjYXNlImgiOnJldHVybiBNYXRoLnJvdW5kKDM2MDAqbik7Y2FzZSJkYXkiOmNhc2UiZGF5cyI6Y2FzZSJkIjpyZXR1cm4gTWF0aC5yb3VuZChuKklyKTtjYXNlIndlZWsiOmNhc2Uid2Vla3MiOmNhc2UidyI6cmV0dXJuIE1hdGgucm91bmQoNjA0ODAwKm4pO2RlZmF1bHQ6cmV0dXJuIE1hdGgucm91bmQoMzE1NTc2MDAqbil9fTtjb25zdCBMcj1lPT5lLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvXmFwcGxpY2F0aW9uXC8vLCIiKSxIcj0oZSx0KT0+InN0cmluZyI9PXR5cGVvZiBlP3QuaW5jbHVkZXMoZSk6ISFBcnJheS5pc0FycmF5KGUpJiZ0LnNvbWUoU2V0LnByb3RvdHlwZS5oYXMuYmluZChuZXcgU2V0KGUpKSk7YXN5bmMgZnVuY3Rpb24gTXIoZSx0LG4pe3ZhciByO2NvbnN0IGk9YXdhaXQgYXN5bmMgZnVuY3Rpb24oZSx0LG4pe2lmKGUgaW5zdGFuY2VvZiBVaW50OEFycmF5JiYoZT1uci5kZWNvZGUoZSkpLCJzdHJpbmciIT10eXBlb2YgZSl0aHJvdyBuZXcgdXIoIkNvbXBhY3QgSldTIG11c3QgYmUgYSBzdHJpbmcgb3IgVWludDhBcnJheSIpO2NvbnN0ezA6ciwxOmksMjpvLGxlbmd0aDpzfT1lLnNwbGl0KCIuIik7aWYoMyE9PXMpdGhyb3cgbmV3IHVyKCJJbnZhbGlkIENvbXBhY3QgSldTIik7Y29uc3QgYT1hd2FpdCBEcih7cGF5bG9hZDppLHByb3RlY3RlZDpyLHNpZ25hdHVyZTpvfSx0LG4pLGM9e3BheWxvYWQ6YS5wYXlsb2FkLHByb3RlY3RlZEhlYWRlcjphLnByb3RlY3RlZEhlYWRlcn07cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIHQ/ey4uLmMsa2V5OmEua2V5fTpjfShlLHQsbik7aWYoKG51bGw9PT0ocj1pLnByb3RlY3RlZEhlYWRlci5jcml0KXx8dm9pZCAwPT09cj92b2lkIDA6ci5pbmNsdWRlcygiYjY0IikpJiYhMT09PWkucHJvdGVjdGVkSGVhZGVyLmI2NCl0aHJvdyBuZXcgbHIoIkpXVHMgTVVTVCBOT1QgdXNlIHVuZW5jb2RlZCBwYXlsb2FkIik7Y29uc3Qgbz1mdW5jdGlvbihlLHQpe2xldCBuPWFyZ3VtZW50cy5sZW5ndGg+MiYmdm9pZCAwIT09YXJndW1lbnRzWzJdP2FyZ3VtZW50c1syXTp7fTtjb25zdHt0eXA6cn09bjtpZihyJiYoInN0cmluZyIhPXR5cGVvZiBlLnR5cHx8THIoZS50eXApIT09THIocikpKXRocm93IG5ldyBvcigndW5leHBlY3RlZCAidHlwIiBKV1QgaGVhZGVyIHZhbHVlJywidHlwIiwiY2hlY2tfZmFpbGVkIik7bGV0IGk7dHJ5e2k9SlNPTi5wYXJzZShuci5kZWNvZGUodCkpfWNhdGNoKGUpe31pZighRXIoaSkpdGhyb3cgbmV3IGxyKCJKV1QgQ2xhaW1zIFNldCBtdXN0IGJlIGEgdG9wLWxldmVsIEpTT04gb2JqZWN0Iik7Y29uc3R7aXNzdWVyOm99PW47aWYobyYmIShBcnJheS5pc0FycmF5KG8pP286W29dKS5pbmNsdWRlcyhpLmlzcykpdGhyb3cgbmV3IG9yKCd1bmV4cGVjdGVkICJpc3MiIGNsYWltIHZhbHVlJywiaXNzIiwiY2hlY2tfZmFpbGVkIik7Y29uc3R7c3ViamVjdDpzfT1uO2lmKHMmJmkuc3ViIT09cyl0aHJvdyBuZXcgb3IoJ3VuZXhwZWN0ZWQgInN1YiIgY2xhaW0gdmFsdWUnLCJzdWIiLCJjaGVja19mYWlsZWQiKTtjb25zdHthdWRpZW5jZTphfT1uO2lmKGEmJiFIcihpLmF1ZCwic3RyaW5nIj09dHlwZW9mIGE/W2FdOmEpKXRocm93IG5ldyBvcigndW5leHBlY3RlZCAiYXVkIiBjbGFpbSB2YWx1ZScsImF1ZCIsImNoZWNrX2ZhaWxlZCIpO2xldCBjO3N3aXRjaCh0eXBlb2Ygbi5jbG9ja1RvbGVyYW5jZSl7Y2FzZSJzdHJpbmciOmM9VXIobi5jbG9ja1RvbGVyYW5jZSk7YnJlYWs7Y2FzZSJudW1iZXIiOmM9bi5jbG9ja1RvbGVyYW5jZTticmVhaztjYXNlInVuZGVmaW5lZCI6Yz0wO2JyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBjbG9ja1RvbGVyYW5jZSBvcHRpb24gdHlwZSIpfWNvbnN0e2N1cnJlbnREYXRlOnV9PW4sbD1Qcih1fHxuZXcgRGF0ZSk7aWYoKHZvaWQgMCE9PWkuaWF0fHxuLm1heFRva2VuQWdlKSYmIm51bWJlciIhPXR5cGVvZiBpLmlhdCl0aHJvdyBuZXcgb3IoJyJpYXQiIGNsYWltIG11c3QgYmUgYSBudW1iZXInLCJpYXQiLCJpbnZhbGlkIik7aWYodm9pZCAwIT09aS5uYmYpe2lmKCJudW1iZXIiIT10eXBlb2YgaS5uYmYpdGhyb3cgbmV3IG9yKCcibmJmIiBjbGFpbSBtdXN0IGJlIGEgbnVtYmVyJywibmJmIiwiaW52YWxpZCIpO2lmKGkubmJmPmwrYyl0aHJvdyBuZXcgb3IoJyJuYmYiIGNsYWltIHRpbWVzdGFtcCBjaGVjayBmYWlsZWQnLCJuYmYiLCJjaGVja19mYWlsZWQiKX1pZih2b2lkIDAhPT1pLmV4cCl7aWYoIm51bWJlciIhPXR5cGVvZiBpLmV4cCl0aHJvdyBuZXcgb3IoJyJleHAiIGNsYWltIG11c3QgYmUgYSBudW1iZXInLCJleHAiLCJpbnZhbGlkIik7aWYoaS5leHA8PWwtYyl0aHJvdyBuZXcgc3IoJyJleHAiIGNsYWltIHRpbWVzdGFtcCBjaGVjayBmYWlsZWQnLCJleHAiLCJjaGVja19mYWlsZWQiKX1pZihuLm1heFRva2VuQWdlKXtjb25zdCBlPWwtaS5pYXQ7aWYoZS1jPigibnVtYmVyIj09dHlwZW9mIG4ubWF4VG9rZW5BZ2U/bi5tYXhUb2tlbkFnZTpVcihuLm1heFRva2VuQWdlKSkpdGhyb3cgbmV3IHNyKCciaWF0IiBjbGFpbSB0aW1lc3RhbXAgY2hlY2sgZmFpbGVkICh0b28gZmFyIGluIHRoZSBwYXN0KScsImlhdCIsImNoZWNrX2ZhaWxlZCIpO2lmKGU8MC1jKXRocm93IG5ldyBvcignImlhdCIgY2xhaW0gdGltZXN0YW1wIGNoZWNrIGZhaWxlZCAoaXQgc2hvdWxkIGJlIGluIHRoZSBwYXN0KScsImlhdCIsImNoZWNrX2ZhaWxlZCIpfXJldHVybiBpfShpLnByb3RlY3RlZEhlYWRlcixpLnBheWxvYWQsbikscz17cGF5bG9hZDpvLHByb3RlY3RlZEhlYWRlcjppLnByb3RlY3RlZEhlYWRlcn07cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIHQ/ey4uLnMsa2V5Omkua2V5fTpzfWZ1bmN0aW9uIGpyKGUpe3JldHVybiBFcihlKX1jbGFzcyBOcntjb25zdHJ1Y3RvcihlKXtpZih0aGlzLl9jYWNoZWQ9bmV3IFdlYWtNYXAsIWZ1bmN0aW9uKGUpe3JldHVybiBlJiYib2JqZWN0Ij09dHlwZW9mIGUmJkFycmF5LmlzQXJyYXkoZS5rZXlzKSYmZS5rZXlzLmV2ZXJ5KGpyKX0oZSkpdGhyb3cgbmV3IGRyKCJKU09OIFdlYiBLZXkgU2V0IG1hbGZvcm1lZCIpO3ZhciB0O3RoaXMuX2p3a3M9KHQ9ZSwiZnVuY3Rpb24iPT10eXBlb2Ygc3RydWN0dXJlZENsb25lP3N0cnVjdHVyZWRDbG9uZSh0KTpKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHQpKSl9YXN5bmMgZ2V0S2V5KGUsdCl7Y29uc3R7YWxnOm4sa2lkOnJ9PXsuLi5lLC4uLnQuaGVhZGVyfSxpPWZ1bmN0aW9uKGUpe3N3aXRjaCgic3RyaW5nIj09dHlwZW9mIGUmJmUuc2xpY2UoMCwyKSl7Y2FzZSJSUyI6Y2FzZSJQUyI6cmV0dXJuIlJTQSI7Y2FzZSJFUyI6cmV0dXJuIkVDIjtjYXNlIkVkIjpyZXR1cm4iT0tQIjtkZWZhdWx0OnRocm93IG5ldyBjcignVW5zdXBwb3J0ZWQgImFsZyIgdmFsdWUgZm9yIGEgSlNPTiBXZWIgS2V5IFNldCcpfX0obiksbz10aGlzLl9qd2tzLmtleXMuZmlsdGVyKChlPT57bGV0IHQ9aT09PWUua3R5O2lmKHQmJiJzdHJpbmciPT10eXBlb2YgciYmKHQ9cj09PWUua2lkKSx0JiYic3RyaW5nIj09dHlwZW9mIGUuYWxnJiYodD1uPT09ZS5hbGcpLHQmJiJzdHJpbmciPT10eXBlb2YgZS51c2UmJih0PSJzaWciPT09ZS51c2UpLHQmJkFycmF5LmlzQXJyYXkoZS5rZXlfb3BzKSYmKHQ9ZS5rZXlfb3BzLmluY2x1ZGVzKCJ2ZXJpZnkiKSksdCYmIkVkRFNBIj09PW4mJih0PSJFZDI1NTE5Ij09PWUuY3J2fHwiRWQ0NDgiPT09ZS5jcnYpLHQpc3dpdGNoKG4pe2Nhc2UiRVMyNTYiOnQ9IlAtMjU2Ij09PWUuY3J2O2JyZWFrO2Nhc2UiRVMyNTZLIjp0PSJzZWNwMjU2azEiPT09ZS5jcnY7YnJlYWs7Y2FzZSJFUzM4NCI6dD0iUC0zODQiPT09ZS5jcnY7YnJlYWs7Y2FzZSJFUzUxMiI6dD0iUC01MjEiPT09ZS5jcnZ9cmV0dXJuIHR9KSksezA6cyxsZW5ndGg6YX09bztpZigwPT09YSl0aHJvdyBuZXcgaHI7aWYoMSE9PWEpdGhyb3cgbmV3IGZyO2NvbnN0IGM9dGhpcy5fY2FjaGVkLmdldChzKXx8dGhpcy5fY2FjaGVkLnNldChzLHt9KS5nZXQocyk7aWYodm9pZCAwPT09Y1tuXSl7Y29uc3QgZT1hd2FpdCBhc3luYyBmdW5jdGlvbihlLHQsbil7aWYoIUVyKGUpKXRocm93IG5ldyBUeXBlRXJyb3IoIkpXSyBtdXN0IGJlIGFuIG9iamVjdCIpO2lmKHR8fCh0PWUuYWxnKSwic3RyaW5nIiE9dHlwZW9mIHR8fCF0KXRocm93IG5ldyBUeXBlRXJyb3IoJyJhbGciIGFyZ3VtZW50IGlzIHJlcXVpcmVkIHdoZW4gImp3ay5hbGciIGlzIG5vdCBwcmVzZW50Jyk7c3dpdGNoKGUua3R5KXtjYXNlIm9jdCI6aWYoInN0cmluZyIhPXR5cGVvZiBlLmt8fCFlLmspdGhyb3cgbmV3IFR5cGVFcnJvcignbWlzc2luZyAiayIgKEtleSBWYWx1ZSkgUGFyYW1ldGVyIHZhbHVlJyk7cmV0dXJuIG51bGwhPW58fChuPSEwIT09ZS5leHQpLG4/VHIoey4uLmUsYWxnOnQsZXh0OiExfSk6cnIoZS5rKTtjYXNlIlJTQSI6aWYodm9pZCAwIT09ZS5vdGgpdGhyb3cgbmV3IGNyKCdSU0EgSldLICJvdGgiIChPdGhlciBQcmltZXMgSW5mbykgUGFyYW1ldGVyIHZhbHVlIGlzIG5vdCBzdXBwb3J0ZWQnKTtjYXNlIkVDIjpjYXNlIk9LUCI6cmV0dXJuIFRyKHsuLi5lLGFsZzp0fSk7ZGVmYXVsdDp0aHJvdyBuZXcgY3IoJ1Vuc3VwcG9ydGVkICJrdHkiIChLZXkgVHlwZSkgUGFyYW1ldGVyIHZhbHVlJyl9fSh7Li4ucyxleHQ6ITB9LG4pO2lmKGUgaW5zdGFuY2VvZiBVaW50OEFycmF5fHwicHVibGljIiE9PWUudHlwZSl0aHJvdyBuZXcgZHIoIkpTT04gV2ViIEtleSBTZXQgbWVtYmVycyBtdXN0IGJlIHB1YmxpYyBrZXlzIik7Y1tuXT1lfXJldHVybiBjW25dfX12YXIgcXI9e2V4cG9ydHM6e319LHhyPXtleHBvcnRzOnt9fSxLcj1QKHhuKTshZnVuY3Rpb24oZSx0KXt2YXIgbj1LcixyPW4uQnVmZmVyO2Z1bmN0aW9uIGkoZSx0KXtmb3IodmFyIG4gaW4gZSl0W25dPWVbbl19ZnVuY3Rpb24gbyhlLHQsbil7cmV0dXJuIHIoZSx0LG4pfXIuZnJvbSYmci5hbGxvYyYmci5hbGxvY1Vuc2FmZSYmci5hbGxvY1Vuc2FmZVNsb3c/ZS5leHBvcnRzPW46KGkobix0KSx0LkJ1ZmZlcj1vKSxvLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHIucHJvdG90eXBlKSxpKHIsbyksby5mcm9tPWZ1bmN0aW9uKGUsdCxuKXtpZigibnVtYmVyIj09dHlwZW9mIGUpdGhyb3cgbmV3IFR5cGVFcnJvcigiQXJndW1lbnQgbXVzdCBub3QgYmUgYSBudW1iZXIiKTtyZXR1cm4gcihlLHQsbil9LG8uYWxsb2M9ZnVuY3Rpb24oZSx0LG4pe2lmKCJudW1iZXIiIT10eXBlb2YgZSl0aHJvdyBuZXcgVHlwZUVycm9yKCJBcmd1bWVudCBtdXN0IGJlIGEgbnVtYmVyIik7dmFyIGk9cihlKTtyZXR1cm4gdm9pZCAwIT09dD8ic3RyaW5nIj09dHlwZW9mIG4/aS5maWxsKHQsbik6aS5maWxsKHQpOmkuZmlsbCgwKSxpfSxvLmFsbG9jVW5zYWZlPWZ1bmN0aW9uKGUpe2lmKCJudW1iZXIiIT10eXBlb2YgZSl0aHJvdyBuZXcgVHlwZUVycm9yKCJBcmd1bWVudCBtdXN0IGJlIGEgbnVtYmVyIik7cmV0dXJuIHIoZSl9LG8uYWxsb2NVbnNhZmVTbG93PWZ1bmN0aW9uKGUpe2lmKCJudW1iZXIiIT10eXBlb2YgZSl0aHJvdyBuZXcgVHlwZUVycm9yKCJBcmd1bWVudCBtdXN0IGJlIGEgbnVtYmVyIik7cmV0dXJuIG4uU2xvd0J1ZmZlcihlKX19KHhyLHhyLmV4cG9ydHMpO3ZhciBCcj02NTUzNixKcj00Mjk0OTY3Mjk1O3ZhciBGcj14ci5leHBvcnRzLkJ1ZmZlcixXcj1DLmNyeXB0b3x8Qy5tc0NyeXB0bztXciYmV3IuZ2V0UmFuZG9tVmFsdWVzP3FyLmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtpZihlPkpyKXRocm93IG5ldyBSYW5nZUVycm9yKCJyZXF1ZXN0ZWQgdG9vIG1hbnkgcmFuZG9tIGJ5dGVzIik7dmFyIG49RnIuYWxsb2NVbnNhZmUoZSk7aWYoZT4wKWlmKGU+QnIpZm9yKHZhciByPTA7cjxlO3IrPUJyKVdyLmdldFJhbmRvbVZhbHVlcyhuLnNsaWNlKHIscitCcikpO2Vsc2UgV3IuZ2V0UmFuZG9tVmFsdWVzKG4pO2lmKCJmdW5jdGlvbiI9PXR5cGVvZiB0KXJldHVybiBfZS5uZXh0VGljaygoZnVuY3Rpb24oKXt0KG51bGwsbil9KSk7cmV0dXJuIG59OnFyLmV4cG9ydHM9ZnVuY3Rpb24oKXt0aHJvdyBuZXcgRXJyb3IoIlNlY3VyZSByYW5kb20gbnVtYmVyIGdlbmVyYXRpb24gaXMgbm90IHN1cHBvcnRlZCBieSB0aGlzIGJyb3dzZXIuXG5Vc2UgQ2hyb21lLCBGaXJlZm94IG9yIEludGVybmV0IEV4cGxvcmVyIDExIil9O3ZhciB6cj1xci5leHBvcnRzO2NsYXNzIFlye2Jhc2U2NFVSTEVuY29kZShlKXtyZXR1cm4gWG4uZW5jb2RlKGUpLnJlcGxhY2UoL1wrL2csIi0iKS5yZXBsYWNlKC9cLy9nLCJfIikucmVwbGFjZSgvPS9nLCIiKX1iYXNlNjRVUkxEZWNvZGUoZSl7cmV0dXJuIFhuLmRlY29kZShlKS50b1N0cmluZygpfWhhc2hTaGEyNTYoZSl7cmV0dXJuIGVuLmZyb20oWm4oKG5ldyBUZXh0RW5jb2RlcikuZW5jb2RlKGUpKSl9Z2VuZXJhdGVSYW5kb21CeXRlcyhlKXtyZXR1cm4genIoZSl9dmVyaWZ5Snd0KGUsdCxuLHIsaSxvLHMpe3JldHVybiBNcihlLChhPXtrZXlzOlt0XX0sTnIucHJvdG90eXBlLmdldEtleS5iaW5kKG5ldyBOcihhKSkpLHthbGdvcml0aG1zOm4sYXVkaWVuY2U6cixjbG9ja1RvbGVyYW5jZTpzLGlzc3VlcjppLHN1YmplY3Q6b30pLnRoZW4oKCgpPT5Qcm9taXNlLnJlc29sdmUoITApKSkuY2F0Y2goKGU9Pnt2YXIgdDtyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IGMoIlNQQS1DUllQVE8tVVRJTFMtVkotSVYwMSIsbnVsbCE9PSh0PW51bGw9PWU/dm9pZCAwOmUucmVhc29uKSYmdm9pZCAwIT09dD90OkpTT04uc3RyaW5naWZ5KGUpLCIiLmNvbmNhdChudWxsPT1lP3ZvaWQgMDplLmNvZGUsIiAiKS5jb25jYXQobnVsbD09ZT92b2lkIDA6ZS5jbGFpbSkpKX0pKTt2YXIgYX19KHQ9Pntjb25zdCBuPXNlbGY7bGV0IHI7bi5vbm1lc3NhZ2U9bj0+e2xldHtkYXRhOmEscG9ydHM6dX09bjtyZXR1cm4gZSh2b2lkIDAsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7dmFyIG4sbCxkLGgsZixwO2NvbnN0IHk9dVswXTtpZihhLnR5cGU9PT12fHxyKXN3aXRjaChhLnR5cGUpe2Nhc2Ugdjp0cnl7Y29uc3Qgbj1PYmplY3QuYXNzaWduKHt9LGEuZGF0YSk7cj15aWVsZCgodCxuKT0+ZSh2b2lkIDAsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7Y29uc3Qgcj1uZXcgcXQsaT1uZXcgWXIsbz1uZXcgZzt5aWVsZCBvLmluaXRpYWxpemUodCxyLGkpO2NvbnN0IHM9bmV3IFIobyksYT1uKG8scyksYz1vLmdldERhdGFMYXllcigpLHU9TnQuZ2V0SW5zdGFuY2UoKTtyZXR1cm4obnVsbD09dT92b2lkIDA6dS5pbml0KSYmKHlpZWxkIHUuaW5pdCghMCwodD0+ZSh2b2lkIDAsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7eWllbGQgYS5hdHRhY2hUb2tlblRvUmVxdWVzdENvbmZpZyh0KX0pKSkpKSx7ZGlzYWJsZUh0dHBIYW5kbGVyOigpPT57YS5kaXNhYmxlSHR0cEhhbmRsZXIodSl9LGVuYWJsZUh0dHBIYW5kbGVyOigpPT57YS5lbmFibGVIdHRwSGFuZGxlcih1KX0sZ2V0QWNjZXNzVG9rZW46KCk9PmEuZ2V0QWNjZXNzVG9rZW4oKSxnZXRBdXRob3JpemF0aW9uVVJMOnQ9PmUodm9pZCAwLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3JldHVybiBvLmdldEF1dGhvcml6YXRpb25VUkwodCkudGhlbigodD0+ZSh2b2lkIDAsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7dmFyIGU7Y29uc3Qgbj1udWxsIT09KGU9bmV3IFVSTCh0KS5zZWFyY2hQYXJhbXMuZ2V0KCJzdGF0ZSIpKSYmdm9pZCAwIT09ZT9lOiIiLHI9eWllbGQgby5nZXRQS0NFQ29kZShuKTtyZXR1cm57YXV0aG9yaXphdGlvblVSTDp0LHBrY2U6cn19KSkpKS5jYXRjaCgoZT0+UHJvbWlzZS5yZWplY3QoZSkpKX0pKSxnZXRCYXNpY1VzZXJJbmZvOigpPT5lKHZvaWQgMCx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtyZXR1cm4gYS5nZXRCYXNpY1VzZXJJbmZvKCl9KSksZ2V0Q29uZmlnRGF0YTooKT0+ZSh2b2lkIDAsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7cmV0dXJuIGMuZ2V0Q29uZmlnRGF0YSgpfSkpLGdldENyeXB0b0hlbHBlcjooKT0+ZSh2b2lkIDAsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7cmV0dXJuIGEuZ2V0Q3J5cHRvSGVscGVyKCl9KSksZ2V0RGVjb2RlZElEUElEVG9rZW46KCk9PmUodm9pZCAwLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3JldHVybiBhLmdldERlY29kZWRJRFBJRFRva2VuKCl9KSksZ2V0RGVjb2RlZElEVG9rZW46KCk9PmUodm9pZCAwLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3JldHVybiBhLmdldERlY29kZWRJRFRva2VuKCl9KSksZ2V0SURUb2tlbjooKT0+ZSh2b2lkIDAsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7cmV0dXJuIGEuZ2V0SURUb2tlbigpfSkpLGdldE9JRENTZXJ2aWNlRW5kcG9pbnRzOigpPT5lKHZvaWQgMCx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtyZXR1cm4gYS5nZXRPSURDU2VydmljZUVuZHBvaW50cygpfSkpLGdldFNpZ25PdXRVUkw6KCk9PmUodm9pZCAwLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3JldHVybiB5aWVsZCBvLmdldFNpZ25PdXRVUkwoKX0pKSxodHRwUmVxdWVzdDp0PT5lKHZvaWQgMCx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtyZXR1cm4geWllbGQgYS5odHRwUmVxdWVzdCh1LHQpfSkpLGh0dHBSZXF1ZXN0QWxsOnQ9PmUodm9pZCAwLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3JldHVybiB5aWVsZCBhLmh0dHBSZXF1ZXN0QWxsKHQsdSl9KSksaXNBdXRoZW50aWNhdGVkOigpPT5hLmlzQXV0aGVudGljYXRlZCgpLHJlZnJlc2hBY2Nlc3NUb2tlbjooKT0+ZSh2b2lkIDAsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7dHJ5e3JldHVybiB5aWVsZCBhLnJlZnJlc2hBY2Nlc3NUb2tlbigpfWNhdGNoKGUpe3JldHVybiBQcm9taXNlLnJlamVjdChlKX19KSkscmVxdWVzdEFjY2Vzc1Rva2VuOih0LG4scixpKT0+ZSh2b2lkIDAsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7cmV0dXJuIHlpZWxkIGEucmVxdWVzdEFjY2Vzc1Rva2VuKHQsbix2b2lkIDAscixpKX0pKSxyZXF1ZXN0Q3VzdG9tR3JhbnQ6dD0+ZSh2b2lkIDAsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7cmV0dXJuIHlpZWxkIGEucmVxdWVzdEN1c3RvbUdyYW50KHQpfSkpLHJldm9rZUFjY2Vzc1Rva2VuOigpPT5lKHZvaWQgMCx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtjb25zdCBlPXlpZWxkIHMuZ2V0UmVmcmVzaFRpbWVvdXRUaW1lcigpO3JldHVybiBvLnJldm9rZUFjY2Vzc1Rva2VuKCkudGhlbigoKCk9PihzLmNsZWFyUmVmcmVzaFRva2VuVGltZW91dChlKSxQcm9taXNlLnJlc29sdmUoITApKSkpLmNhdGNoKChlPT5Qcm9taXNlLnJlamVjdChlKSkpfSkpLHNldEh0dHBSZXF1ZXN0RmluaXNoQ2FsbGJhY2s6ZT0+eyhudWxsPT11P3ZvaWQgMDp1LnNldEh0dHBSZXF1ZXN0RmluaXNoQ2FsbGJhY2spJiZ1LnNldEh0dHBSZXF1ZXN0RmluaXNoQ2FsbGJhY2soZSl9LHNldEh0dHBSZXF1ZXN0U3RhcnRDYWxsYmFjazplPT57KG51bGw9PXU/dm9pZCAwOnUuc2V0SHR0cFJlcXVlc3RTdGFydENhbGxiYWNrKSYmdS5zZXRIdHRwUmVxdWVzdFN0YXJ0Q2FsbGJhY2soZSl9LHNldEh0dHBSZXF1ZXN0U3VjY2Vzc0NhbGxiYWNrOmU9PnsobnVsbD09dT92b2lkIDA6dS5zZXRIdHRwUmVxdWVzdFN1Y2Nlc3NDYWxsYmFjaykmJnUuc2V0SHR0cFJlcXVlc3RTdWNjZXNzQ2FsbGJhY2soZSl9LHNldFNlc3Npb25TdGF0ZTp0PT5lKHZvaWQgMCx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXt5aWVsZCBjLnNldFNlc3Npb25EYXRhUGFyYW1ldGVyKCJzZXNzaW9uX3N0YXRlIix0KX0pKSxzaWduT3V0OigpPT5lKHZvaWQgMCx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtyZXR1cm4gcy5jbGVhclJlZnJlc2hUb2tlblRpbWVvdXQoKSx5aWVsZCBvLmdldFNpZ25PdXRVUkwoKX0pKSxzdGFydEF1dG9SZWZyZXNoVG9rZW46KCk9PmUodm9pZCAwLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3MuY2xlYXJSZWZyZXNoVG9rZW5UaW1lb3V0KCkscy5yZWZyZXNoQWNjZXNzVG9rZW5BdXRvbWF0aWNhbGx5KGEpfSkpLHVwZGF0ZUNvbmZpZzp0PT5lKHZvaWQgMCx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXt5aWVsZCBvLnVwZGF0ZUNvbmZpZyh0KX0pKX19KSkpKG4sdCksci5zZXRIdHRwUmVxdWVzdEZpbmlzaENhbGxiYWNrKHMpLHIuc2V0SHR0cFJlcXVlc3RTdGFydENhbGxiYWNrKGkpLHIuc2V0SHR0cFJlcXVlc3RTdWNjZXNzQ2FsbGJhY2sobykseS5wb3N0TWVzc2FnZShFLmdlbmVyYXRlU3VjY2Vzc01lc3NhZ2UoKSl9Y2F0Y2goZSl7eS5wb3N0TWVzc2FnZShFLmdlbmVyYXRlRmFpbHVyZU1lc3NhZ2UoZSkpfWJyZWFrO2Nhc2UiZ2V0X2F1dGhfdXJsIjpyLmdldEF1dGhvcml6YXRpb25VUkwobnVsbD09YT92b2lkIDA6YS5kYXRhKS50aGVuKChlPT57eS5wb3N0TWVzc2FnZShFLmdlbmVyYXRlU3VjY2Vzc01lc3NhZ2UoZSkpfSkpLmNhdGNoKChlPT57eS5wb3N0TWVzc2FnZShFLmdlbmVyYXRlRmFpbHVyZU1lc3NhZ2UoZSkpfSkpO2JyZWFrO2Nhc2UicmVxdWVzdF9nZXRfdG9rZW4iOnIucmVxdWVzdEFjY2Vzc1Rva2VuKG51bGw9PT0obj1udWxsPT1hP3ZvaWQgMDphLmRhdGEpfHx2b2lkIDA9PT1uP3ZvaWQgMDpuLmNvZGUsbnVsbD09PShsPW51bGw9PWE/dm9pZCAwOmEuZGF0YSl8fHZvaWQgMD09PWw/dm9pZCAwOmwuc2Vzc2lvblN0YXRlLG51bGw9PT0oZD1udWxsPT1hP3ZvaWQgMDphLmRhdGEpfHx2b2lkIDA9PT1kP3ZvaWQgMDpkLnBrY2UsbnVsbD09PShoPW51bGw9PWE/dm9pZCAwOmEuZGF0YSl8fHZvaWQgMD09PWg/dm9pZCAwOmguc3RhdGUpLnRoZW4oKGU9Pnt5LnBvc3RNZXNzYWdlKEUuZ2VuZXJhdGVTdWNjZXNzTWVzc2FnZShlKSl9KSkuY2F0Y2goKGU9Pnt5LnBvc3RNZXNzYWdlKEUuZ2VuZXJhdGVGYWlsdXJlTWVzc2FnZShlKSl9KSk7YnJlYWs7Y2FzZSJodHRwLXJlcXVlc3QiOntjb25zdCBlPWEuZGF0YSx0PW51bGw9PWU/dm9pZCAwOmUuZGF0YTtpZighMD09PShudWxsPT09KHA9bnVsbD09PShmPWEuZGF0YSl8fHZvaWQgMD09PWY/dm9pZCAwOmYuZGF0YSl8fHZvaWQgMD09PXA/dm9pZCAwOnAuZm9ybURhdGEpKXtjb25zdCBuPW5ldyBGb3JtRGF0YTtmb3IoY29uc3QgZSBpbiB0KSJmb3JtRGF0YSIhPT1lJiZuLmFwcGVuZChlLHRbZV0pO2UuZGF0YT1ufXIuaHR0cFJlcXVlc3QoZSkudGhlbigoZT0+e3kucG9zdE1lc3NhZ2UoRS5nZW5lcmF0ZVN1Y2Nlc3NNZXNzYWdlKGUpKX0pKS5jYXRjaCgoZT0+e3kucG9zdE1lc3NhZ2UoRS5nZW5lcmF0ZUZhaWx1cmVNZXNzYWdlKGUpKX0pKTticmVha31jYXNlImh0dHAtcmVxdWVzdC1hbGwiOnIuaHR0cFJlcXVlc3RBbGwoYS5kYXRhKS50aGVuKChlPT57eS5wb3N0TWVzc2FnZShFLmdlbmVyYXRlU3VjY2Vzc01lc3NhZ2UoZSkpfSkpLmNhdGNoKChlPT57eS5wb3N0TWVzc2FnZShFLmdlbmVyYXRlRmFpbHVyZU1lc3NhZ2UoZSkpfSkpO2JyZWFrO2Nhc2Uic2lnbi1vdXQiOnRyeXt5LnBvc3RNZXNzYWdlKEUuZ2VuZXJhdGVTdWNjZXNzTWVzc2FnZSh5aWVsZCByLnNpZ25PdXQoKSkpfWNhdGNoKGUpe3kucG9zdE1lc3NhZ2UoRS5nZW5lcmF0ZUZhaWx1cmVNZXNzYWdlKGUpKX1icmVhaztjYXNlInJlcXVlc3QtY3VzdG9tLWdyYW50IjpyLnJlcXVlc3RDdXN0b21HcmFudChhLmRhdGEpLnRoZW4oKGU9Pnt5LnBvc3RNZXNzYWdlKEUuZ2VuZXJhdGVTdWNjZXNzTWVzc2FnZShlKSl9KSkuY2F0Y2goKGU9Pnt5LnBvc3RNZXNzYWdlKEUuZ2VuZXJhdGVGYWlsdXJlTWVzc2FnZShlKSl9KSk7YnJlYWs7Y2FzZSJyZXZva2UtYWNjZXNzLXRva2VuIjpyLnJldm9rZUFjY2Vzc1Rva2VuKCkudGhlbigoZT0+e3kucG9zdE1lc3NhZ2UoRS5nZW5lcmF0ZVN1Y2Nlc3NNZXNzYWdlKGUpKX0pKS5jYXRjaCgoZT0+e3kucG9zdE1lc3NhZ2UoRS5nZW5lcmF0ZUZhaWx1cmVNZXNzYWdlKGUpKX0pKTticmVhaztjYXNlImdldC1vaWRjLXNlcnZpY2UtZW5kcG9pbnRzIjp0cnl7eS5wb3N0TWVzc2FnZShFLmdlbmVyYXRlU3VjY2Vzc01lc3NhZ2UoeWllbGQgci5nZXRPSURDU2VydmljZUVuZHBvaW50cygpKSl9Y2F0Y2goZSl7eS5wb3N0TWVzc2FnZShFLmdlbmVyYXRlRmFpbHVyZU1lc3NhZ2UoZSkpfWJyZWFrO2Nhc2UiZ2V0LWJhc2ljLXVzZXItaW5mbyI6dHJ5e3kucG9zdE1lc3NhZ2UoRS5nZW5lcmF0ZVN1Y2Nlc3NNZXNzYWdlKHlpZWxkIHIuZ2V0QmFzaWNVc2VySW5mbygpKSl9Y2F0Y2goZSl7eS5wb3N0TWVzc2FnZShFLmdlbmVyYXRlRmFpbHVyZU1lc3NhZ2UoZSkpfWJyZWFrO2Nhc2UiZ2V0LWRlY29kZWQtaWQtdG9rZW4iOnRyeXt5LnBvc3RNZXNzYWdlKEUuZ2VuZXJhdGVTdWNjZXNzTWVzc2FnZSh5aWVsZCByLmdldERlY29kZWRJRFRva2VuKCkpKX1jYXRjaChlKXt5LnBvc3RNZXNzYWdlKEUuZ2VuZXJhdGVGYWlsdXJlTWVzc2FnZShlKSl9YnJlYWs7Y2FzZSJnZXQtY3J5cHRvLWhlbHBlciI6dHJ5e3kucG9zdE1lc3NhZ2UoRS5nZW5lcmF0ZVN1Y2Nlc3NNZXNzYWdlKHlpZWxkIHIuZ2V0Q3J5cHRvSGVscGVyKCkpKX1jYXRjaChlKXt5LnBvc3RNZXNzYWdlKEUuZ2VuZXJhdGVGYWlsdXJlTWVzc2FnZShlKSl9YnJlYWs7Y2FzZSJnZXRfaWRfdG9rZW4iOnRyeXt5LnBvc3RNZXNzYWdlKEUuZ2VuZXJhdGVTdWNjZXNzTWVzc2FnZSh5aWVsZCByLmdldElEVG9rZW4oKSkpfWNhdGNoKGUpe3kucG9zdE1lc3NhZ2UoRS5nZW5lcmF0ZUZhaWx1cmVNZXNzYWdlKGUpKX1icmVhaztjYXNlImVuYWJsZV9odHRwX2hhbmRsZXIiOnIuZW5hYmxlSHR0cEhhbmRsZXIoKSx5LnBvc3RNZXNzYWdlKEUuZ2VuZXJhdGVTdWNjZXNzTWVzc2FnZSgpKTticmVhaztjYXNlImRpc2FibGVfaHR0cF9oYW5kbGVyIjpyLmRpc2FibGVIdHRwSGFuZGxlcigpLHkucG9zdE1lc3NhZ2UoRS5nZW5lcmF0ZVN1Y2Nlc3NNZXNzYWdlKCkpO2JyZWFrO2Nhc2UiaXNfYXV0aGVudGljYXRlZCI6dHJ5e3kucG9zdE1lc3NhZ2UoRS5nZW5lcmF0ZVN1Y2Nlc3NNZXNzYWdlKHlpZWxkIHIuaXNBdXRoZW50aWNhdGVkKCkpKX1jYXRjaChlKXt5LnBvc3RNZXNzYWdlKEUuZ2VuZXJhdGVGYWlsdXJlTWVzc2FnZShlKSl9YnJlYWs7Y2FzZSJnZXRfc2lnbl9vdXRfdXJsIjp0cnl7eS5wb3N0TWVzc2FnZShFLmdlbmVyYXRlU3VjY2Vzc01lc3NhZ2UoeWllbGQgci5nZXRTaWduT3V0VVJMKCkpKX1jYXRjaChlKXt5LnBvc3RNZXNzYWdlKEUuZ2VuZXJhdGVGYWlsdXJlTWVzc2FnZShlKSl9YnJlYWs7Y2FzZSJyZWZyZXNoX2FjY2Vzcy10b2tlbiI6dHJ5e3kucG9zdE1lc3NhZ2UoRS5nZW5lcmF0ZVN1Y2Nlc3NNZXNzYWdlKHlpZWxkIHIucmVmcmVzaEFjY2Vzc1Rva2VuKCkpKX1jYXRjaChlKXt5LnBvc3RNZXNzYWdlKEUuZ2VuZXJhdGVGYWlsdXJlTWVzc2FnZShlKSl9YnJlYWs7Y2FzZSJzdGFydF9hdXRvX3JlZnJlc2hfdG9rZW4iOnRyeXt5LnBvc3RNZXNzYWdlKEUuZ2VuZXJhdGVTdWNjZXNzTWVzc2FnZShyLnN0YXJ0QXV0b1JlZnJlc2hUb2tlbigpKSl9Y2F0Y2goZSl7eS5wb3N0TWVzc2FnZShFLmdlbmVyYXRlRmFpbHVyZU1lc3NhZ2UoZSkpfWJyZWFrO2Nhc2Uic2V0X3Nlc3Npb25fc3RhdGUiOnRyeXt5LnBvc3RNZXNzYWdlKEUuZ2VuZXJhdGVTdWNjZXNzTWVzc2FnZSh5aWVsZCByLnNldFNlc3Npb25TdGF0ZShudWxsPT1hP3ZvaWQgMDphLmRhdGEpKSl9Y2F0Y2goZSl7eS5wb3N0TWVzc2FnZShFLmdlbmVyYXRlRmFpbHVyZU1lc3NhZ2UoZSkpfWJyZWFrO2Nhc2UidXBkYXRlX2NvbmZpZyI6dHJ5e3kucG9zdE1lc3NhZ2UoRS5nZW5lcmF0ZVN1Y2Nlc3NNZXNzYWdlKHlpZWxkIHIudXBkYXRlQ29uZmlnKG51bGw9PWE/dm9pZCAwOmEuZGF0YSkpKX1jYXRjaChlKXt5LnBvc3RNZXNzYWdlKEUuZ2VuZXJhdGVGYWlsdXJlTWVzc2FnZShlKSl9YnJlYWs7Y2FzZSJnZXRfY29uZmlnX2RhdGEiOnRyeXt5LnBvc3RNZXNzYWdlKEUuZ2VuZXJhdGVTdWNjZXNzTWVzc2FnZSh5aWVsZCByLmdldENvbmZpZ0RhdGEoKSkpfWNhdGNoKGUpe3kucG9zdE1lc3NhZ2UoRS5nZW5lcmF0ZUZhaWx1cmVNZXNzYWdlKGUpKX1icmVhaztkZWZhdWx0Om51bGw9PXl8fHkucG9zdE1lc3NhZ2UoRS5nZW5lcmF0ZUZhaWx1cmVNZXNzYWdlKG5ldyBjKCJTUEEtQ0xJRU5UX1dPUktFUi1PTk1TRy1JVjAyIiwiVGhlIG1lc3NhZ2UgdHlwZSBpcyBpbnZhbGlkLiIsIlRoZSBtZXNzYWdlIHR5cGUgcHJvdmlkZWQsICIuY29uY2F0KGEudHlwZSwiLCBpcyBpbnZhbGlkLiIpKSkpfWVsc2UgeS5wb3N0TWVzc2FnZShFLmdlbmVyYXRlRmFpbHVyZU1lc3NhZ2UobmV3IGMoIlNQQS1DTElFTlRfV09SS0VSLU9OTVNHLU5GMDEiLCJUaGUgd2ViIHdvcmtlciBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWQgeWV0LiIsIlRoZSBpbml0aWFsaXplIG1ldGhvZCBuZWVkcyB0byBiZSBjYWxsZWQgYmVmb3JlIHRoZSBzcGVjaWZpZWQgb3BlcmF0aW9uIGNhbiBiZSBjYXJyaWVkIG91dC4iKSkpfSkpfTtjb25zdCBpPSgpPT57bi5wb3N0TWVzc2FnZSh7dHlwZToicmVxdWVzdC1zdGFydCJ9KX0sbz1lPT57bi5wb3N0TWVzc2FnZSh7ZGF0YTpKU09OLnN0cmluZ2lmeShudWxsIT1lP2U6IiIpLHR5cGU6InJlcXVlc3Qtc3VjY2VzcyJ9KX0scz0oKT0+e24ucG9zdE1lc3NhZ2Uoe3R5cGU6InJlcXVlc3QtZmluaXNoIn0pfX0pKCgoZSx0KT0+bmV3IEEoZSx0KSkpO3JldHVybnt9fSgpOwoK",$V=null,eW=!1,function(e){return tW=tW||_V(qV,$V,eW),new Worker(tW,e)});const iW="init",lW="sign-out",oW="http-request",cW="http-request-all",rW="request-custom-grant",aW="revoke-access-token",sW="request-start",dW="request-success",uW="request-finish",hW="get-oidc-service-endpoints",ZW="get-basic-user-info",bW="get-decoded-id-token",mW="get-crypto-helper",pW="enable_http_handler",yW="disable_http_handler",GW="get_auth_url",XW="request_get_token",VW="is_authenticated",WW="get_sign_out_url",IW="refresh_access-token",gW="refresh-access-token-error",SW="set_session_state",RW="start_auto_refresh_token",fW="update_config",vW="get_id_token",YW="check_session_signed_in",KW="check_session_signed_out",NW="get_config_data",CW="set_session_state_from_iframe";var kW,JW;e.Storage=void 0,(kW=e.Storage||(e.Storage={})).LocalStorage="localStorage",kW.SessionStorage="sessionStorage",kW.WebWorker="webWorker",kW.BrowserMemory="browserMemory",e.Hooks=void 0,(JW=e.Hooks||(e.Hooks={})).SignIn="sign-in",JW.SignOut="sign-out",JW.Initialize="initialize",JW.HttpRequestStart="http-request-start",JW.HttpRequestFinish="http-request-finish",JW.HttpRequestError="http-request-error",JW.HttpRequestSuccess="http-request-success",JW.RevokeAccessToken="revoke-access-token",JW.CustomGrant="custom-grant",JW.SignOutFailed="sign-out-failed";const LW="rpIFrame",UW="promptNoneIFrame",HW="Y2hlY2tTZXNzaW9u",TW="sign-in-silently",wW="initialized-silent-sign-in",FW="promptNoneRequestSent",xW="error",zW="error_description",PW="custom_grant_config",BW="state",jW="Access token is invalid";class MW{constructor(){}static generateSuccessMessage(e){return{blob:(null==e?void 0:e.data)instanceof Blob?null==e?void 0:e.data:null,data:JSON.stringify(null!=e?e:""),success:!0}}static generateFailureMessage(e){return(null==e?void 0:e.toJSON)&&delete e.toJSON,{error:JSON.stringify(null!=e?e:""),success:!1}}}class QW{constructor(){}static removeAuthorizationCode(){const e=location.href;history.pushState({},document.title,e.replace(/\?code=.*$/,""))}static getPKCE(e){var t;return null!==(t=sessionStorage.getItem(e))&&void 0!==t?t:""}static setPKCE(e,t){sessionStorage.setItem(e,t)}static setSignOutURL(e,t,n){sessionStorage.setItem("".concat(FV,"-instance_").concat(n,"-").concat(t),e)}static getSignOutURL(e,t){var n;return null!==(n=sessionStorage.getItem("".concat(FV,"-instance_").concat(t,"-").concat(e)))&&void 0!==n?n:""}static removePKCE(e){sessionStorage.removeItem(e)}static canContinueSignIn(e,t){return!(e&&!QW.hasErrorInURL()&&!QW.hasAuthSearchParamsInURL()&&!t)}static isInitializedSilentSignIn(){return QW.isSilentStatePresentInURL()}static wasSignInCalled(){return!(!QW.hasErrorInURL()&&!QW.hasAuthSearchParamsInURL()||this.isSilentStatePresentInURL())}static wasSilentSignInCalled(){const e=sessionStorage.getItem(wW),t=e?JSON.parse(e):null;return Boolean(t)}static isSignOutSuccessful(){return JV(this,void 0,void 0,(function*(){if(AV.isSignOutSuccessful(window.location.href)){const e=window.location.href.split("?")[0];return history.pushState({},document.title,e),yield AV.clearUserSessionData(),!0}return!1}))}static didSignOutFail(){if(AV.didSignOutFail(window.location.href)){const e=new URL(window.location.href),t=e.searchParams.get(xW),n=e.searchParams.get(zW),i=window.location.href.split("?")[0];return history.pushState({},document.title,i),{description:null!=n?n:"",error:null!=t?t:""}}return!1}static isSilentStatePresentInURL(){var e;const t=new URL(window.location.href).searchParams.get("state");return null!==(e=null==t?void 0:t.includes(TW))&&void 0!==e&&e}static hasAuthSearchParamsInURL(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.search;return/[?&]code=[^&]+/.test(e)}static hasErrorInURL(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.href;const t=new URL(e);return!!t.searchParams.get(xW)&&t.searchParams.get(BW)!==xV}static canSendPromptNoneRequest(){const e=sessionStorage.getItem(FW);return!(e?JSON.parse(e):null)}static setPromptNoneRequestSent(e){sessionStorage.setItem(FW,JSON.stringify(e))}static waitTillPageRedirect(e){return JV(this,void 0,void 0,(function*(){const t=null!=e?e:3e3;yield new Promise((e=>setTimeout(e,1e3*t)))}))}}class EW{constructor(e,t){this._authenticationClient=e,this._dataLayer=this._authenticationClient.getDataLayer(),this._spaHelper=t,this._instanceID=this._authenticationClient.getInstanceID()}enableHttpHandler(e){(null==e?void 0:e.enableHandler)&&e.enableHandler()}disableHttpHandler(e){(null==e?void 0:e.disableHandler)&&e.disableHandler()}initializeSessionManger(e,t,n,i,l){var o,c,r;l.initialize(e.clientID,null!==(o=t.checkSessionIframe)&&void 0!==o?o:"",n,null!==(c=e.checkSessionInterval)&&void 0!==c?c:3,null!==(r=e.sessionRefreshInterval)&&void 0!==r?r:300,e.signInRedirectURL,i)}requestCustomGrant(e,t){var n,i,l;return JV(this,void 0,void 0,(function*(){let o=!0,c=!1;if(null==e?void 0:e.tokenEndpoint){o=!1;for(const t of[...null!==(i=null===(n=yield this._dataLayer.getConfigData())||void 0===n?void 0:n.resourceServerURLs)&&void 0!==i?i:[],e.baseUrl])if(t&&(null===(l=e.tokenEndpoint)||void 0===l?void 0:l.startsWith(t))){c=!0;break}}return e.shouldReplayAfterRefresh&&this._dataLayer.setTemporaryDataParameter(PW,JSON.stringify(e)),o||c?this._authenticationClient.requestCustomGrant(e).then((n=>JV(this,void 0,void 0,(function*(){return t&&"function"==typeof t&&t(e),e.returnsSession?(this._spaHelper.refreshAccessTokenAutomatically(this),this._authenticationClient.getBasicUserInfo()):n})))).catch((e=>Promise.reject(e))):Promise.reject(new BV("SPA-MAIN_THREAD_CLIENT-RCG-IV01","Request to the provided endpoint is prohibited.","Requests can only be sent to resource servers specified by the `resourceServerURLs` attribute while initializing the SDK. The specified token endpoint in this request cannot be found among the `resourceServerURLs`"))}))}getCustomGrantConfigData(){return JV(this,void 0,void 0,(function*(){const e=yield this._dataLayer.getTemporaryDataParameter(PW);return e?JSON.parse(e):null}))}refreshAccessToken(e){return JV(this,void 0,void 0,(function*(){try{yield this._authenticationClient.refreshAccessToken();const t=yield this.getCustomGrantConfigData();return t&&(yield this.requestCustomGrant(t,e)),this._spaHelper.refreshAccessTokenAutomatically(this),this._authenticationClient.getBasicUserInfo()}catch(e){const t={type:gW};return window.postMessage(t),Promise.reject(e)}}))}httpRequest(e,t,n,i,l,o){var c,r;return JV(this,void 0,void 0,(function*(){let a=!1;const s=yield this._dataLayer.getConfigData();for(const e of[...null!==(c=yield null==s?void 0:s.resourceServerURLs)&&void 0!==c?c:[],s.baseUrl])if(e&&(null===(r=null==t?void 0:t.url)||void 0===r?void 0:r.startsWith(e))){a=!0;break}return a?e.request(t).then((e=>Promise.resolve(e))).catch((c=>JV(this,void 0,void 0,(function*(){var r,a,s;if(401===(null===(r=null==c?void 0:c.response)||void 0===r?void 0:r.status)||!(null==c?void 0:c.response)){let r;try{r=yield this.refreshAccessToken(o)}catch(e){throw n&&("function"==typeof i&&(yield i(Object.assign(Object.assign({},c),{code:jW}))),"function"==typeof l&&l()),new BV("SPA-AUTH_HELPER-HR-SE01",null!==(a=null==e?void 0:e.name)&&void 0!==a?a:"Refresh token request failed.",null!==(s=null==e?void 0:e.message)&&void 0!==s?s:"An error occurred while trying to refresh the access token following a 401 response from the server.")}if(r)try{const n=yield e.request(t);return Promise.resolve(n)}catch(e){return n&&("function"==typeof i&&(yield i(e)),"function"==typeof l&&l()),Promise.reject(e)}}return n&&("function"==typeof i&&(yield i(c)),"function"==typeof l&&l()),Promise.reject(c)})))):Promise.reject(new BV("SPA-AUTH_HELPER-HR-IV02","Request to the provided endpoint is prohibited.","Requests can only be sent to resource servers specified by the `resourceServerURLs` attribute while initializing the SDK. The specified endpoint in this request cannot be found among the `resourceServerURLs`"))}))}httpRequestAll(e,t,n,i,l){var o,c,r;return JV(this,void 0,void 0,(function*(){let a=!0;const s=yield this._dataLayer.getConfigData();for(const t of e){let e=!1;for(const n of[...null!==(c=null===(o=yield s)||void 0===o?void 0:o.resourceServerURLs)&&void 0!==c?c:[],s.baseUrl])if(n&&(null===(r=t.url)||void 0===r?void 0:r.startsWith(n))){e=!0;break}if(!e){a=!1;break}}const d=[];if(a)return e.forEach((e=>{d.push(t.request(e))})),(null==t?void 0:t.all)&&t.all(d).then((e=>Promise.resolve(e))).catch((e=>JV(this,void 0,void 0,(function*(){var o,c,r;if(401===(null===(o=null==e?void 0:e.response)||void 0===o?void 0:o.status)||!(null==e?void 0:e.response)){let o;try{o=yield this._authenticationClient.refreshAccessToken()}catch(t){throw n&&("function"==typeof i&&(yield i(Object.assign(Object.assign({},e),{code:jW}))),"function"==typeof l&&l()),new BV("SPA-AUTH_HELPER-HRA-SE01",null!==(c=null==t?void 0:t.name)&&void 0!==c?c:"Refresh token request failed.",null!==(r=null==t?void 0:t.message)&&void 0!==r?r:"An error occurred while trying to refresh the access token following a 401 response from the server.")}if(o)return t.all&&t.all(d).then((e=>Promise.resolve(e))).catch((e=>JV(this,void 0,void 0,(function*(){return n&&("function"==typeof i&&(yield i(e)),"function"==typeof l&&l()),Promise.reject(e)}))))}return n&&("function"==typeof i&&(yield i(e)),"function"==typeof l&&l()),Promise.reject(e)}))));throw new BV("SPA-AUTH_HELPER-HRA-IV02","Request to the provided endpoint is prohibited.","Requests can only be sent to resource servers specified by the `resourceServerURLs` attribute while initializing the SDK. The specified endpoint in this request cannot be found among the `resourceServerURLs`")}))}requestAccessToken(t,n,i,l,o){return JV(this,void 0,void 0,(function*(){const c=yield this._dataLayer.getConfigData();if(c.storage===e.Storage.BrowserMemory&&c.enablePKCE&&n){const e=QW.getPKCE(jV.extractPKCEKeyFromStateParam(n));yield this._authenticationClient.setPKCECode(jV.extractPKCEKeyFromStateParam(n),e)}else c.storage===e.Storage.WebWorker&&l&&(yield this._authenticationClient.setPKCECode(l,null!=o?o:""));return t?this._authenticationClient.requestAccessToken(t,null!=n?n:"",null!=o?o:"").then((()=>JV(this,void 0,void 0,(function*(){return c.storage!==e.Storage.WebWorker?(QW.setSignOutURL(yield this._authenticationClient.getSignOutURL(),c.clientID,this._instanceID),this._spaHelper&&(this._spaHelper.clearRefreshTokenTimeout(),this._spaHelper.refreshAccessTokenAutomatically(this)),i&&"function"==typeof i&&c.enableOIDCSessionManagement&&i()):this._spaHelper&&this._spaHelper.refreshAccessTokenAutomatically(this),this._authenticationClient.getBasicUserInfo()})))).catch((e=>Promise.reject(e))):Promise.reject(new BV("SPA-AUTH_HELPER-RAT1-NF01","No authorization code.","No authorization code was found."))}))}trySignInSilently(e,t,n){var i;return JV(this,void 0,void 0,(function*(){if(QW.isInitializedSilentSignIn())return yield n.receivePromptNoneResponse(),Promise.resolve({allowedScopes:"",displayName:"",email:"",sessionState:"",sub:"",tenantDomain:"",username:""});const l=document.getElementById(LW),o=null===(i=null==l?void 0:l.contentDocument)||void 0===i?void 0:i.getElementById(UW);try{const t=yield e();o.src=t}catch(e){return Promise.reject(e)}return new Promise(((e,n)=>{const i=setTimeout((()=>{e(!1)}),1e4),l=o=>JV(this,void 0,void 0,(function*(){var c,r,a,s;const d=o.data;(null==d?void 0:d.type)==KW&&(window.removeEventListener("message",l),clearTimeout(i),e(!1)),(null==d?void 0:d.type)==YW&&(null===(c=null==d?void 0:d.data)||void 0===c?void 0:c.code)&&t(null===(r=null==d?void 0:d.data)||void 0===r?void 0:r.code,null===(a=null==d?void 0:d.data)||void 0===a?void 0:a.sessionState,null===(s=null==d?void 0:d.data)||void 0===s?void 0:s.state).then((t=>{window.removeEventListener("message",l),e(t)})).catch((e=>{window.removeEventListener("message",l),n(e)})).finally((()=>{clearTimeout(i)}))}));window.addEventListener("message",l)}))}))}handleSignIn(t,n,i){return JV(this,void 0,void 0,(function*(){const l=yield this._dataLayer.getConfigData();if(yield t())return Promise.resolve({allowedScopes:"",displayName:"",email:"",sessionState:"",sub:"",tenantDomain:"",username:""});if(l.storage!==e.Storage.WebWorker&&(yield this._authenticationClient.isAuthenticated()))return this._spaHelper.clearRefreshTokenTimeout(),this._spaHelper.refreshAccessTokenAutomatically(this),l.enableOIDCSessionManagement&&n(),Promise.resolve(yield this._authenticationClient.getBasicUserInfo());const o=new URL(window.location.href).searchParams.get(xW),c=new URL(window.location.href).searchParams.get(zW);if(o){const e=new URL(window.location.href);throw e.searchParams.delete(xW),e.searchParams.delete(zW),history.pushState(null,document.title,e.toString()),new BV("SPA-AUTH_HELPER-SI-SE01",o,null!=c?c:"")}if(l.storage===e.Storage.WebWorker&&i){const e=yield i();if(e)return e}}))}attachTokenToRequestConfig(e){return JV(this,void 0,void 0,(function*(){const t=Object.assign({attachToken:!0},e);t.attachToken&&(t.shouldAttachIDPAccessToken?e.headers=Object.assign(Object.assign({},e.headers),{Authorization:"Bearer ".concat(yield this.getIDPAccessToken())}):e.headers=Object.assign(Object.assign({},e.headers),{Authorization:"Bearer ".concat(yield this.getAccessToken())}))}))}getBasicUserInfo(){return JV(this,void 0,void 0,(function*(){return this._authenticationClient.getBasicUserInfo()}))}getDecodedIDToken(){return JV(this,void 0,void 0,(function*(){return this._authenticationClient.getDecodedIDToken()}))}getDecodedIDPIDToken(){return JV(this,void 0,void 0,(function*(){return this._authenticationClient.getDecodedIDToken()}))}getCryptoHelper(){return JV(this,void 0,void 0,(function*(){return this._authenticationClient.getCryptoHelper()}))}getIDToken(){return JV(this,void 0,void 0,(function*(){return this._authenticationClient.getIDToken()}))}getOIDCServiceEndpoints(){return JV(this,void 0,void 0,(function*(){return this._authenticationClient.getOIDCServiceEndpoints()}))}getAccessToken(){return JV(this,void 0,void 0,(function*(){return this._authenticationClient.getAccessToken()}))}getIDPAccessToken(){var e;return JV(this,void 0,void 0,(function*(){return null===(e=yield this._dataLayer.getSessionData())||void 0===e?void 0:e.access_token}))}getDataLayer(){return this._dataLayer}isAuthenticated(){return JV(this,void 0,void 0,(function*(){return this._authenticationClient.isAuthenticated()}))}}class DW{constructor(e){this._authenticationClient=e,this._dataLayer=this._authenticationClient.getDataLayer()}refreshAccessTokenAutomatically(e){return JV(this,void 0,void 0,(function*(){const t=yield this._dataLayer.getSessionData();if(t.refresh_token){const n=parseInt(t.expires_in),i=setTimeout((()=>JV(this,void 0,void 0,(function*(){yield e.refreshAccessToken()}))),1e3*(n<=10?n:n-10));yield this._dataLayer.setTemporaryDataParameter(UV,JSON.stringify(i))}}))}getRefreshTimeoutTimer(){return JV(this,void 0,void 0,(function*(){return(yield this._dataLayer.getTemporaryDataParameter(UV))?JSON.parse(yield this._dataLayer.getTemporaryDataParameter(UV)):-1}))}clearRefreshTokenTimeout(e){return JV(this,void 0,void 0,(function*(){if(e)return void clearTimeout(e);const t=yield this.getRefreshTimeoutTimer();-1!==t&&clearTimeout(t)}))}}const OW=(()=>{let t,n,i,l,o,c,r,a,s,d,u;const h=(e,r,a,s,d,h,b)=>{t=e,n=r,i=a,l=s,o=h,c=d,u=b,l>-1&&Z(),c>-1&&(d=setInterval((()=>{p()}),1e3*c))},Z=()=>JV(void 0,void 0,void 0,(function*(){var e;if(!n||!t||!o)return;const c="opIFrame";const r=document.getElementById(LW);(null===(e=null==r?void 0:r.contentDocument)||void 0===e?void 0:e.getElementById(c)).src=n+"?client_id="+t+"&redirect_uri="+o,a=setInterval((function(){var e;return JV(this,void 0,void 0,(function*(){const l=yield i();if(Boolean(t)&&Boolean(l)){const i="".concat(t," ").concat(l),o=document.getElementById(LW),r=(null===(e=null==o?void 0:o.contentDocument)||void 0===e?void 0:e.getElementById(c)).contentWindow;null==r||r.postMessage(i,n)}}))}),1e3*l),m()})),b=()=>{clearInterval(a),clearInterval(undefined)},m=()=>{null===window||void 0===window||window.addEventListener("message",(function(e){var t;return JV(this,void 0,void 0,(function*(){const i=n;!i||(null==i?void 0:i.indexOf(e.origin))<0||(null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.type)===CW||"unchanged"===e.data||("error"===e.data?window.location.href=yield r():"changed"===e.data&&p())}))}),!1)},p=()=>JV(void 0,void 0,void 0,(function*(){var t;const n=document.getElementById(LW),i=null===(t=null==n?void 0:n.contentDocument)||void 0===t?void 0:t.getElementById(UW);if(QW.canSendPromptNoneRequest()){QW.setPromptNoneRequestSent(!0);const t=e=>{var n,i,l;(null===(n=null==e?void 0:e.data)||void 0===n?void 0:n.type)===CW&&(d(null!==(l=null===(i=null==e?void 0:e.data)||void 0===i?void 0:i.data)&&void 0!==l?l:""),null===window||void 0===window||window.removeEventListener("message",t))};s!==e.Storage.BrowserMemory&&s!==e.Storage.WebWorker||null===window||void 0===window||window.addEventListener("message",t);const n=yield u({prompt:"none",responseMode:"query",state:HW});i.src=n}})),y=t=>JV(void 0,void 0,void 0,(function*(){var n,i;const l=new URL(window.location.href).searchParams.get(BW),o=new URL(window.location.href).searchParams.get(wV),c=window.parent.parent;if(null!==l&&(l.includes(HW)||l.includes(TW))){const a=new URL(window.location.href).searchParams.get("code");if(null!==a&&0!==a.length){if(l.includes(TW)){const e={data:{code:a,sessionState:null!=o?o:"",state:l},type:YW};return sessionStorage.setItem(wW,"false"),c.postMessage(e,c.origin),QW.setPromptNoneRequestSent(!1),window.location.href="about:blank",yield QW.waitTillPageRedirect(),!0}const r=new URL(window.location.href).searchParams.get("session_state");if(s===e.Storage.LocalStorage||s===e.Storage.SessionStorage)t&&(yield t(r));else{const e={data:null!=r?r:"",type:CW};null===(i=null===(n=null===window||void 0===window?void 0:window.parent)||void 0===n?void 0:n.parent)||void 0===i||i.postMessage(e)}return QW.setPromptNoneRequestSent(!1),window.location.href="about:blank",yield QW.waitTillPageRedirect(),!0}{if(l.includes(TW)){const e={type:KW};return window.parent.parent.postMessage(e,c.origin),QW.setPromptNoneRequestSent(!1),window.location.href="about:blank",yield QW.waitTillPageRedirect(),!0}QW.setPromptNoneRequestSent(!1);const e=yield r();return yield AV.clearUserSessionData(),c.location.href=e,window.location.href="about:blank",yield QW.waitTillPageRedirect(),!0}}return!1}));return(e,t,n)=>JV(void 0,void 0,void 0,(function*(){var i;let l=document.createElement("iframe");l.setAttribute("id",LW),l.style.display="none";let o=!1;l.onload=()=>{var e,t,n,i;l=document.getElementById(LW);const c=null==l?void 0:l.contentDocument,r=null==c?void 0:c.createElement("iframe");r&&(r.setAttribute("id","opIFrame"),r.style.display="none");const a=null==c?void 0:c.createElement("iframe");a&&(a.setAttribute("id",UW),a.style.display="none"),r&&(null===(t=null===(e=null==l?void 0:l.contentDocument)||void 0===e?void 0:e.body)||void 0===t||t.appendChild(r)),a&&(null===(i=null===(n=null==l?void 0:l.contentDocument)||void 0===n?void 0:n.body)||void 0===i||i.appendChild(a)),o=!0},null===(i=null===document||void 0===document?void 0:document.body)||void 0===i||i.appendChild(l),r=e,s=t,d=n;for(;!1===o;)yield new Promise((e=>setTimeout(e,1)));return{initialize:h,receivePromptNoneResponse:y,reset:b}}))})();var AW={exports:{}},_W=function(e,t){return function(){for(var n=new Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];return e.apply(t,n)}},qW=_W,$W=Object.prototype.toString;function eI(e){return Array.isArray(e)}function tI(e){return void 0===e}function nI(e){return"[object ArrayBuffer]"===$W.call(e)}function iI(e){return null!==e&&"object"==typeof e}function lI(e){if("[object Object]"!==$W.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function oI(e){return"[object Function]"===$W.call(e)}function cI(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),eI(e))for(var n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.call(null,e[l],l,e)}var rI={isArray:eI,isArrayBuffer:nI,isBuffer:function(e){return null!==e&&!tI(e)&&null!==e.constructor&&!tI(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"[object FormData]"===$W.call(e)},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&nI(e.buffer)},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:iI,isPlainObject:lI,isUndefined:tI,isDate:function(e){return"[object Date]"===$W.call(e)},isFile:function(e){return"[object File]"===$W.call(e)},isBlob:function(e){return"[object Blob]"===$W.call(e)},isFunction:oI,isStream:function(e){return iI(e)&&oI(e.pipe)},isURLSearchParams:function(e){return"[object URLSearchParams]"===$W.call(e)},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:cI,merge:function e(){var t={};function n(n,i){lI(t[i])&&lI(n)?t[i]=e(t[i],n):lI(n)?t[i]=e({},n):eI(n)?t[i]=n.slice():t[i]=n}for(var i=0,l=arguments.length;i<l;i++)cI(arguments[i],n);return t},extend:function(e,t,n){return cI(t,(function(t,i){e[i]=n&&"function"==typeof t?qW(t,n):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}},aI=rI;function sI(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var dI=function(e,t,n){if(!t)return e;var i;if(n)i=n(t);else if(aI.isURLSearchParams(t))i=t.toString();else{var l=[];aI.forEach(t,(function(e,t){null!=e&&(aI.isArray(e)?t+="[]":e=[e],aI.forEach(e,(function(e){aI.isDate(e)?e=e.toISOString():aI.isObject(e)&&(e=JSON.stringify(e)),l.push(sI(t)+"="+sI(e))})))})),i=l.join("&")}if(i){var o=e.indexOf("#");-1!==o&&(e=e.slice(0,o)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e},uI=rI;function hI(){this.handlers=[]}hI.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},hI.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},hI.prototype.forEach=function(e){uI.forEach(this.handlers,(function(t){null!==t&&e(t)}))};var ZI=hI,bI="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function mI(){throw new Error("setTimeout has not been defined")}function pI(){throw new Error("clearTimeout has not been defined")}var yI=mI,GI=pI;function XI(e){if(yI===setTimeout)return setTimeout(e,0);if((yI===mI||!yI)&&setTimeout)return yI=setTimeout,setTimeout(e,0);try{return yI(e,0)}catch(t){try{return yI.call(null,e,0)}catch(t){return yI.call(this,e,0)}}}"function"==typeof bI.setTimeout&&(yI=setTimeout),"function"==typeof bI.clearTimeout&&(GI=clearTimeout);var VI,WI=[],II=!1,gI=-1;function SI(){II&&VI&&(II=!1,VI.length?WI=VI.concat(WI):gI=-1,WI.length&&RI())}function RI(){if(!II){var e=XI(SI);II=!0;for(var t=WI.length;t;){for(VI=WI,WI=[];++gI<t;)VI&&VI[gI].run();gI=-1,t=WI.length}VI=null,II=!1,function(e){if(GI===clearTimeout)return clearTimeout(e);if((GI===pI||!GI)&&clearTimeout)return GI=clearTimeout,clearTimeout(e);try{GI(e)}catch(t){try{return GI.call(null,e)}catch(t){return GI.call(this,e)}}}(e)}}function fI(e,t){this.fun=e,this.array=t}fI.prototype.run=function(){this.fun.apply(null,this.array)};function vI(){}var YI=vI,KI=vI,NI=vI,CI=vI,kI=vI,JI=vI,LI=vI;var UI=bI.performance||{},HI=UI.now||UI.mozNow||UI.msNow||UI.oNow||UI.webkitNow||function(){return(new Date).getTime()};var TI=new Date;var wI={nextTick:function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];WI.push(new fI(e,t)),1!==WI.length||II||XI(RI)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:YI,addListener:KI,once:NI,off:CI,removeListener:kI,removeAllListeners:JI,emit:LI,binding:function(e){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(e){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*HI.call(UI),n=Math.floor(t),i=Math.floor(t%1*1e9);return e&&(n-=e[0],(i-=e[1])<0&&(n--,i+=1e9)),[n,i]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-TI)/1e3}},FI=wI,xI=rI,zI=function(e,t,n,i,l){return e.config=t,n&&(e.code=n),e.request=i,e.response=l,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e},PI={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},BI=zI,jI=function(e,t,n,i,l){var o=new Error(e);return BI(o,t,n,i,l)},MI=jI,QI=rI,EI=QI.isStandardBrowserEnv()?{write:function(e,t,n,i,l,o){var c=[];c.push(e+"="+encodeURIComponent(t)),QI.isNumber(n)&&c.push("expires="+new Date(n).toGMTString()),QI.isString(i)&&c.push("path="+i),QI.isString(l)&&c.push("domain="+l),!0===o&&c.push("secure"),document.cookie=c.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},DI=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)},OI=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e},AI=rI,_I=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],qI=rI,$I=qI.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(e){var i=e;return t&&(n.setAttribute("href",i),i=n.href),n.setAttribute("href",i),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=i(window.location.href),function(t){var n=qI.isString(t)?i(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0};function eg(e){this.message=e}eg.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},eg.prototype.__CANCEL__=!0;var tg=eg,ng=rI,ig=function(e,t,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(MI("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)},lg=EI,og=dI,cg=function(e,t){return e&&!DI(t)?OI(e,t):t},rg=function(e){var t,n,i,l={};return e?(AI.forEach(e.split("\n"),(function(e){if(i=e.indexOf(":"),t=AI.trim(e.substr(0,i)).toLowerCase(),n=AI.trim(e.substr(i+1)),t){if(l[t]&&_I.indexOf(t)>=0)return;l[t]="set-cookie"===t?(l[t]?l[t]:[]).concat([n]):l[t]?l[t]+", "+n:n}})),l):l},ag=$I,sg=jI,dg=PI,ug=tg,hg=function(e){return new Promise((function(t,n){var i,l=e.data,o=e.headers,c=e.responseType;function r(){e.cancelToken&&e.cancelToken.unsubscribe(i),e.signal&&e.signal.removeEventListener("abort",i)}ng.isFormData(l)&&delete o["Content-Type"];var a=new XMLHttpRequest;if(e.auth){var s=e.auth.username||"",d=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";o.Authorization="Basic "+btoa(s+":"+d)}var u=cg(e.baseURL,e.url);function h(){if(a){var i="getAllResponseHeaders"in a?rg(a.getAllResponseHeaders()):null,l={data:c&&"text"!==c&&"json"!==c?a.response:a.responseText,status:a.status,statusText:a.statusText,headers:i,config:e,request:a};ig((function(e){t(e),r()}),(function(e){n(e),r()}),l),a=null}}if(a.open(e.method.toUpperCase(),og(u,e.params,e.paramsSerializer),!0),a.timeout=e.timeout,"onloadend"in a?a.onloadend=h:a.onreadystatechange=function(){a&&4===a.readyState&&(0!==a.status||a.responseURL&&0===a.responseURL.indexOf("file:"))&&setTimeout(h)},a.onabort=function(){a&&(n(sg("Request aborted",e,"ECONNABORTED",a)),a=null)},a.onerror=function(){n(sg("Network Error",e,null,a)),a=null},a.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",i=e.transitional||dg;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(sg(t,e,i.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",a)),a=null},ng.isStandardBrowserEnv()){var Z=(e.withCredentials||ag(u))&&e.xsrfCookieName?lg.read(e.xsrfCookieName):void 0;Z&&(o[e.xsrfHeaderName]=Z)}"setRequestHeader"in a&&ng.forEach(o,(function(e,t){void 0===l&&"content-type"===t.toLowerCase()?delete o[t]:a.setRequestHeader(t,e)})),ng.isUndefined(e.withCredentials)||(a.withCredentials=!!e.withCredentials),c&&"json"!==c&&(a.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&a.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&a.upload&&a.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(i=function(e){a&&(n(!e||e&&e.type?new ug("canceled"):e),a.abort(),a=null)},e.cancelToken&&e.cancelToken.subscribe(i),e.signal&&(e.signal.aborted?i():e.signal.addEventListener("abort",i))),l||(l=null),a.send(l)}))},Zg=rI,bg=function(e,t){xI.forEach(e,(function(n,i){i!==t&&i.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[i])}))},mg=zI,pg={"Content-Type":"application/x-www-form-urlencoded"};function yg(e,t){!Zg.isUndefined(e)&&Zg.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var Gg,Xg={transitional:PI,adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==FI&&"[object process]"===Object.prototype.toString.call(FI))&&(Gg=hg),Gg),transformRequest:[function(e,t){return bg(t,"Accept"),bg(t,"Content-Type"),Zg.isFormData(e)||Zg.isArrayBuffer(e)||Zg.isBuffer(e)||Zg.isStream(e)||Zg.isFile(e)||Zg.isBlob(e)?e:Zg.isArrayBufferView(e)?e.buffer:Zg.isURLSearchParams(e)?(yg(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):Zg.isObject(e)||t&&"application/json"===t["Content-Type"]?(yg(t,"application/json"),function(e,t,n){if(Zg.isString(e))try{return(t||JSON.parse)(e),Zg.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||Xg.transitional,n=t&&t.silentJSONParsing,i=t&&t.forcedJSONParsing,l=!n&&"json"===this.responseType;if(l||i&&Zg.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(l){if("SyntaxError"===e.name)throw mg(e,this,"E_JSON_PARSE");throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Zg.forEach(["delete","get","head"],(function(e){Xg.headers[e]={}})),Zg.forEach(["post","put","patch"],(function(e){Xg.headers[e]=Zg.merge(pg)}));var Vg=Xg,Wg=rI,Ig=Vg,gg=function(e){return!(!e||!e.__CANCEL__)},Sg=rI,Rg=function(e,t,n){var i=this||Ig;return Wg.forEach(n,(function(n){e=n.call(i,e,t)})),e},fg=gg,vg=Vg,Yg=tg;function Kg(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Yg("canceled")}var Ng=rI,Cg=function(e,t){t=t||{};var n={};function i(e,t){return Ng.isPlainObject(e)&&Ng.isPlainObject(t)?Ng.merge(e,t):Ng.isPlainObject(t)?Ng.merge({},t):Ng.isArray(t)?t.slice():t}function l(n){return Ng.isUndefined(t[n])?Ng.isUndefined(e[n])?void 0:i(void 0,e[n]):i(e[n],t[n])}function o(e){if(!Ng.isUndefined(t[e]))return i(void 0,t[e])}function c(n){return Ng.isUndefined(t[n])?Ng.isUndefined(e[n])?void 0:i(void 0,e[n]):i(void 0,t[n])}function r(n){return n in t?i(e[n],t[n]):n in e?i(void 0,e[n]):void 0}var a={url:o,method:o,data:o,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:r};return Ng.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=a[e]||l,i=t(e);Ng.isUndefined(i)&&t!==r||(n[e]=i)})),n},kg="0.26.1",Jg=kg,Lg={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){Lg[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var Ug={};Lg.transitional=function(e,t,n){function i(e,t){return"[Axios v"+Jg+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,l,o){if(!1===e)throw new Error(i(l," has been removed"+(t?" in "+t:"")));return t&&!Ug[l]&&(Ug[l]=!0,console.warn(i(l," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,l,o)}};var Hg={assertOptions:function(e,t,n){if("object"!=typeof e)throw new TypeError("options must be an object");for(var i=Object.keys(e),l=i.length;l-- >0;){var o=i[l],c=t[o];if(c){var r=e[o],a=void 0===r||c(r,o,e);if(!0!==a)throw new TypeError("option "+o+" must be "+a)}else if(!0!==n)throw Error("Unknown option "+o)}},validators:Lg},Tg=rI,wg=dI,Fg=ZI,xg=function(e){return Kg(e),e.headers=e.headers||{},e.data=Rg.call(e,e.data,e.headers,e.transformRequest),e.headers=Sg.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),Sg.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||vg.adapter)(e).then((function(t){return Kg(e),t.data=Rg.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return fg(t)||(Kg(e),t&&t.response&&(t.response.data=Rg.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))},zg=Cg,Pg=Hg,Bg=Pg.validators;function jg(e){this.defaults=e,this.interceptors={request:new Fg,response:new Fg}}jg.prototype.request=function(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},(t=zg(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var n=t.transitional;void 0!==n&&Pg.assertOptions(n,{silentJSONParsing:Bg.transitional(Bg.boolean),forcedJSONParsing:Bg.transitional(Bg.boolean),clarifyTimeoutError:Bg.transitional(Bg.boolean)},!1);var i=[],l=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(l=l&&e.synchronous,i.unshift(e.fulfilled,e.rejected))}));var o,c=[];if(this.interceptors.response.forEach((function(e){c.push(e.fulfilled,e.rejected)})),!l){var r=[xg,void 0];for(Array.prototype.unshift.apply(r,i),r=r.concat(c),o=Promise.resolve(t);r.length;)o=o.then(r.shift(),r.shift());return o}for(var a=t;i.length;){var s=i.shift(),d=i.shift();try{a=s(a)}catch(e){d(e);break}}try{o=xg(a)}catch(e){return Promise.reject(e)}for(;c.length;)o=o.then(c.shift(),c.shift());return o},jg.prototype.getUri=function(e){return e=zg(this.defaults,e),wg(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},Tg.forEach(["delete","get","head","options"],(function(e){jg.prototype[e]=function(t,n){return this.request(zg(n||{},{method:e,url:t,data:(n||{}).data}))}})),Tg.forEach(["post","put","patch"],(function(e){jg.prototype[e]=function(t,n,i){return this.request(zg(i||{},{method:e,url:t,data:n}))}}));var Mg=jg,Qg=tg;function Eg(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;this.promise.then((function(e){if(n._listeners){var t,i=n._listeners.length;for(t=0;t<i;t++)n._listeners[t](e);n._listeners=null}})),this.promise.then=function(e){var t,i=new Promise((function(e){n.subscribe(e),t=e})).then(e);return i.cancel=function(){n.unsubscribe(t)},i},e((function(e){n.reason||(n.reason=new Qg(e),t(n.reason))}))}Eg.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},Eg.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},Eg.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},Eg.source=function(){var e,t=new Eg((function(t){e=t}));return{token:t,cancel:e}};var Dg=Eg,Og=rI,Ag=rI,_g=_W,qg=Mg,$g=Cg;var eS=function e(t){var n=new qg(t),i=_g(qg.prototype.request,n);return Ag.extend(i,qg.prototype,n),Ag.extend(i,n),i.create=function(n){return e($g(t,n))},i}(Vg);eS.Axios=qg,eS.Cancel=tg,eS.CancelToken=Dg,eS.isCancel=gg,eS.VERSION=kg,eS.all=function(e){return Promise.all(e)},eS.spread=function(e){return function(t){return e.apply(null,t)}},eS.isAxiosError=function(e){return Og.isObject(e)&&!0===e.isAxiosError},AW.exports=eS,AW.exports.default=eS;var tS,nS=AW.exports;let iS=tS=class{constructor(){this.attachToken=()=>Promise.resolve(),this.requestStartCallback=()=>null,this.requestSuccessCallback=()=>null,this.requestErrorCallback=()=>null,this.requestFinishCallback=()=>null,this.init=this.init.bind(this),this.setHttpRequestErrorCallback=this.setHttpRequestErrorCallback.bind(this),this.setHttpRequestFinishCallback=this.setHttpRequestFinishCallback.bind(this),this.setHttpRequestStartCallback=this.setHttpRequestStartCallback.bind(this),this.setHttpRequestSuccessCallback=this.setHttpRequestSuccessCallback.bind(this)}static getInstance(){return this.axiosInstance||(this.axiosInstance=nS.create({withCredentials:!0}),this.clientInstance||(this.clientInstance=new tS),this.axiosInstance.interceptors.request.use((e=>JV(this,void 0,void 0,(function*(){return yield this.clientInstance.requestHandler(e)})))),this.axiosInstance.interceptors.response.use((e=>this.clientInstance.successHandler(e)),(e=>this.clientInstance.errorHandler(e))),this.axiosInstance.all=nS.all,this.axiosInstance.spread=nS.spread,this.axiosInstance.init=this.clientInstance.init,this.axiosInstance.enableHandler=this.clientInstance.enableHandler,this.axiosInstance.disableHandler=this.clientInstance.disableHandler,this.axiosInstance.disableHandlerWithTimeout=this.clientInstance.disableHandlerWithTimeout,this.axiosInstance.setHttpRequestStartCallback=this.clientInstance.setHttpRequestStartCallback,this.axiosInstance.setHttpRequestSuccessCallback=this.clientInstance.setHttpRequestSuccessCallback,this.axiosInstance.setHttpRequestErrorCallback=this.clientInstance.setHttpRequestErrorCallback,this.axiosInstance.setHttpRequestFinishCallback=this.clientInstance.setHttpRequestFinishCallback),this.axiosInstance}requestHandler(e){return JV(this,void 0,void 0,(function*(){if(yield this.attachToken(e),null==e?void 0:e.shouldEncodeToFormData){const t=null==e?void 0:e.data,n=new FormData;Object.keys(t).forEach((e=>{n.append(e,t[e])})),e.data=n}return e.startTimeInMs=(new Date).getTime(),tS.isHandlerEnabled&&this.requestStartCallback&&"function"==typeof this.requestStartCallback&&this.requestStartCallback(e),e}))}errorHandler(e){throw tS.isHandlerEnabled&&(this.requestErrorCallback&&"function"==typeof this.requestErrorCallback&&this.requestErrorCallback(e),this.requestFinishCallback&&"function"==typeof this.requestFinishCallback&&this.requestFinishCallback()),e}successHandler(e){return tS.isHandlerEnabled&&(this.requestSuccessCallback&&"function"==typeof this.requestSuccessCallback&&this.requestSuccessCallback(e),this.requestFinishCallback&&"function"==typeof this.requestFinishCallback&&this.requestFinishCallback()),e}init(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;return JV(this,void 0,void 0,(function*(){tS.isHandlerEnabled=e,this.attachToken=t}))}enableHandler(){tS.isHandlerEnabled=!0}disableHandler(){tS.isHandlerEnabled=!1}disableHandlerWithTimeout(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tS.DEFAULT_HANDLER_DISABLE_TIMEOUT;tS.isHandlerEnabled=!1,setTimeout((()=>{tS.isHandlerEnabled=!0}),e)}setHttpRequestStartCallback(e){this.requestStartCallback=e}setHttpRequestSuccessCallback(e){this.requestSuccessCallback=e}setHttpRequestErrorCallback(e){this.requestErrorCallback=e}setHttpRequestFinishCallback(e){this.requestFinishCallback=e}};iS.DEFAULT_HANDLER_DISABLE_TIMEOUT=1e3,iS=tS=function(e,t,n,i){var l,o=arguments.length,c=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(l=e[r])&&(c=(o<3?l(c):o>3?l(t,n,c):l(t,n))||c);return o>3&&c&&Object.defineProperty(t,n,c),c}([e=>{}],iS);class lS{setData(e,t){return JV(this,void 0,void 0,(function*(){localStorage.setItem(e,t)}))}getData(e){var t;return JV(this,void 0,void 0,(function*(){return null!==(t=localStorage.getItem(e))&&void 0!==t?t:"{}"}))}removeData(e){return JV(this,void 0,void 0,(function*(){localStorage.removeItem(e)}))}}class oS{constructor(){this._data=new Map}setData(e,t){return JV(this,void 0,void 0,(function*(){this._data.set(e,t)}))}getData(e){var t,n;return JV(this,void 0,void 0,(function*(){return null!==(n=null===(t=this._data)||void 0===t?void 0:t.get(e))&&void 0!==n?n:"{}"}))}removeData(e){return JV(this,void 0,void 0,(function*(){this._data.delete(e)}))}}class cS{setData(e,t){return JV(this,void 0,void 0,(function*(){sessionStorage.setItem(e,t)}))}getData(e){var t;return JV(this,void 0,void 0,(function*(){return null!==(t=sessionStorage.getItem(e))&&void 0!==t?t:"{}"}))}removeData(e){return JV(this,void 0,void 0,(function*(){sessionStorage.removeItem(e)}))}}var rS=[],aS=[],sS="undefined"!=typeof Uint8Array?Uint8Array:Array,dS=!1;function uS(){dS=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,n=e.length;t<n;++t)rS[t]=e[t],aS[e.charCodeAt(t)]=t;aS["-".charCodeAt(0)]=62,aS["_".charCodeAt(0)]=63}function hS(e,t,n){for(var i,l,o=[],c=t;c<n;c+=3)i=(e[c]<<16)+(e[c+1]<<8)+e[c+2],o.push(rS[(l=i)>>18&63]+rS[l>>12&63]+rS[l>>6&63]+rS[63&l]);return o.join("")}function ZS(e){var t;dS||uS();for(var n=e.length,i=n%3,l="",o=[],c=16383,r=0,a=n-i;r<a;r+=c)o.push(hS(e,r,r+c>a?a:r+c));return 1===i?(t=e[n-1],l+=rS[t>>2],l+=rS[t<<4&63],l+="=="):2===i&&(t=(e[n-2]<<8)+e[n-1],l+=rS[t>>10],l+=rS[t>>4&63],l+=rS[t<<2&63],l+="="),o.push(l),o.join("")}function bS(e,t,n,i,l){var o,c,r=8*l-i-1,a=(1<<r)-1,s=a>>1,d=-7,u=n?l-1:0,h=n?-1:1,Z=e[t+u];for(u+=h,o=Z&(1<<-d)-1,Z>>=-d,d+=r;d>0;o=256*o+e[t+u],u+=h,d-=8);for(c=o&(1<<-d)-1,o>>=-d,d+=i;d>0;c=256*c+e[t+u],u+=h,d-=8);if(0===o)o=1-s;else{if(o===a)return c?NaN:1/0*(Z?-1:1);c+=Math.pow(2,i),o-=s}return(Z?-1:1)*c*Math.pow(2,o-i)}function mS(e,t,n,i,l,o){var c,r,a,s=8*o-l-1,d=(1<<s)-1,u=d>>1,h=23===l?Math.pow(2,-24)-Math.pow(2,-77):0,Z=i?0:o-1,b=i?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(r=isNaN(t)?1:0,c=d):(c=Math.floor(Math.log(t)/Math.LN2),t*(a=Math.pow(2,-c))<1&&(c--,a*=2),(t+=c+u>=1?h/a:h*Math.pow(2,1-u))*a>=2&&(c++,a/=2),c+u>=d?(r=0,c=d):c+u>=1?(r=(t*a-1)*Math.pow(2,l),c+=u):(r=t*Math.pow(2,u-1)*Math.pow(2,l),c=0));l>=8;e[n+Z]=255&r,Z+=b,r/=256,l-=8);for(c=c<<l|r,s+=l;s>0;e[n+Z]=255&c,Z+=b,c/=256,s-=8);e[n+Z-b]|=128*m}var pS={}.toString,yS=Array.isArray||function(e){return"[object Array]"==pS.call(e)};WS.TYPED_ARRAY_SUPPORT=void 0===bI.TYPED_ARRAY_SUPPORT||bI.TYPED_ARRAY_SUPPORT;var GS=XS();function XS(){return WS.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function VS(e,t){if(XS()<t)throw new RangeError("Invalid typed array length");return WS.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=WS.prototype:(null===e&&(e=new WS(t)),e.length=t),e}function WS(e,t,n){if(!(WS.TYPED_ARRAY_SUPPORT||this instanceof WS))return new WS(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return SS(this,e)}return IS(this,e,t,n)}function IS(e,t,n,i){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,i){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(i||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===i?new Uint8Array(t):void 0===i?new Uint8Array(t,n):new Uint8Array(t,n,i);WS.TYPED_ARRAY_SUPPORT?(e=t).__proto__=WS.prototype:e=RS(e,t);return e}(e,t,n,i):"string"==typeof t?function(e,t,n){"string"==typeof n&&""!==n||(n="utf8");if(!WS.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var i=0|YS(t,n),l=(e=VS(e,i)).write(t,n);l!==i&&(e=e.slice(0,l));return e}(e,t,n):function(e,t){if(vS(t)){var n=0|fS(t.length);return 0===(e=VS(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(i=t.length)!=i?VS(e,0):RS(e,t);if("Buffer"===t.type&&yS(t.data))return RS(e,t.data)}var i;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function gS(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function SS(e,t){if(gS(t),e=VS(e,t<0?0:0|fS(t)),!WS.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function RS(e,t){var n=t.length<0?0:0|fS(t.length);e=VS(e,n);for(var i=0;i<n;i+=1)e[i]=255&t[i];return e}function fS(e){if(e>=XS())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+XS().toString(16)+" bytes");return 0|e}function vS(e){return!(null==e||!e._isBuffer)}function YS(e,t){if(vS(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return tR(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return nR(e).length;default:if(i)return tR(e).length;t=(""+t).toLowerCase(),i=!0}}function KS(e,t,n){var i=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return jS(this,t,n);case"utf8":case"utf-8":return xS(this,t,n);case"ascii":return PS(this,t,n);case"latin1":case"binary":return BS(this,t,n);case"base64":return FS(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return MS(this,t,n);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function NS(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}function CS(e,t,n,i,l){if(0===e.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=l?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(l)return-1;n=e.length-1}else if(n<0){if(!l)return-1;n=0}if("string"==typeof t&&(t=WS.from(t,i)),vS(t))return 0===t.length?-1:kS(e,t,n,i,l);if("number"==typeof t)return t&=255,WS.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?l?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):kS(e,[t],n,i,l);throw new TypeError("val must be string, number or Buffer")}function kS(e,t,n,i,l){var o,c=1,r=e.length,a=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;c=2,r/=2,a/=2,n/=2}function s(e,t){return 1===c?e[t]:e.readUInt16BE(t*c)}if(l){var d=-1;for(o=n;o<r;o++)if(s(e,o)===s(t,-1===d?0:o-d)){if(-1===d&&(d=o),o-d+1===a)return d*c}else-1!==d&&(o-=o-d),d=-1}else for(n+a>r&&(n=r-a),o=n;o>=0;o--){for(var u=!0,h=0;h<a;h++)if(s(e,o+h)!==s(t,h)){u=!1;break}if(u)return o}return-1}function JS(e,t,n,i){n=Number(n)||0;var l=e.length-n;i?(i=Number(i))>l&&(i=l):i=l;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");i>o/2&&(i=o/2);for(var c=0;c<i;++c){var r=parseInt(t.substr(2*c,2),16);if(isNaN(r))return c;e[n+c]=r}return c}function LS(e,t,n,i){return iR(tR(t,e.length-n),e,n,i)}function US(e,t,n,i){return iR(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,i)}function HS(e,t,n,i){return US(e,t,n,i)}function TS(e,t,n,i){return iR(nR(t),e,n,i)}function wS(e,t,n,i){return iR(function(e,t){for(var n,i,l,o=[],c=0;c<e.length&&!((t-=2)<0);++c)i=(n=e.charCodeAt(c))>>8,l=n%256,o.push(l),o.push(i);return o}(t,e.length-n),e,n,i)}function FS(e,t,n){return 0===t&&n===e.length?ZS(e):ZS(e.slice(t,n))}function xS(e,t,n){n=Math.min(e.length,n);for(var i=[],l=t;l<n;){var o,c,r,a,s=e[l],d=null,u=s>239?4:s>223?3:s>191?2:1;if(l+u<=n)switch(u){case 1:s<128&&(d=s);break;case 2:128==(192&(o=e[l+1]))&&(a=(31&s)<<6|63&o)>127&&(d=a);break;case 3:o=e[l+1],c=e[l+2],128==(192&o)&&128==(192&c)&&(a=(15&s)<<12|(63&o)<<6|63&c)>2047&&(a<55296||a>57343)&&(d=a);break;case 4:o=e[l+1],c=e[l+2],r=e[l+3],128==(192&o)&&128==(192&c)&&128==(192&r)&&(a=(15&s)<<18|(63&o)<<12|(63&c)<<6|63&r)>65535&&a<1114112&&(d=a)}null===d?(d=65533,u=1):d>65535&&(d-=65536,i.push(d>>>10&1023|55296),d=56320|1023&d),i.push(d),l+=u}return function(e){var t=e.length;if(t<=zS)return String.fromCharCode.apply(String,e);var n="",i=0;for(;i<t;)n+=String.fromCharCode.apply(String,e.slice(i,i+=zS));return n}(i)}WS.poolSize=8192,WS._augment=function(e){return e.__proto__=WS.prototype,e},WS.from=function(e,t,n){return IS(null,e,t,n)},WS.TYPED_ARRAY_SUPPORT&&(WS.prototype.__proto__=Uint8Array.prototype,WS.__proto__=Uint8Array),WS.alloc=function(e,t,n){return function(e,t,n,i){return gS(t),t<=0?VS(e,t):void 0!==n?"string"==typeof i?VS(e,t).fill(n,i):VS(e,t).fill(n):VS(e,t)}(null,e,t,n)},WS.allocUnsafe=function(e){return SS(null,e)},WS.allocUnsafeSlow=function(e){return SS(null,e)},WS.isBuffer=lR,WS.compare=function(e,t){if(!vS(e)||!vS(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,i=t.length,l=0,o=Math.min(n,i);l<o;++l)if(e[l]!==t[l]){n=e[l],i=t[l];break}return n<i?-1:i<n?1:0},WS.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},WS.concat=function(e,t){if(!yS(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return WS.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var i=WS.allocUnsafe(t),l=0;for(n=0;n<e.length;++n){var o=e[n];if(!vS(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(i,l),l+=o.length}return i},WS.byteLength=YS,WS.prototype._isBuffer=!0,WS.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)NS(this,t,t+1);return this},WS.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)NS(this,t,t+3),NS(this,t+1,t+2);return this},WS.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)NS(this,t,t+7),NS(this,t+1,t+6),NS(this,t+2,t+5),NS(this,t+3,t+4);return this},WS.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?xS(this,0,e):KS.apply(this,arguments)},WS.prototype.equals=function(e){if(!vS(e))throw new TypeError("Argument must be a Buffer");return this===e||0===WS.compare(this,e)},WS.prototype.inspect=function(){var e="";return this.length>0&&(e=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(e+=" ... ")),"<Buffer "+e+">"},WS.prototype.compare=function(e,t,n,i,l){if(!vS(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===i&&(i=0),void 0===l&&(l=this.length),t<0||n>e.length||i<0||l>this.length)throw new RangeError("out of range index");if(i>=l&&t>=n)return 0;if(i>=l)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(l>>>=0)-(i>>>=0),c=(n>>>=0)-(t>>>=0),r=Math.min(o,c),a=this.slice(i,l),s=e.slice(t,n),d=0;d<r;++d)if(a[d]!==s[d]){o=a[d],c=s[d];break}return o<c?-1:c<o?1:0},WS.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},WS.prototype.indexOf=function(e,t,n){return CS(this,e,t,n,!0)},WS.prototype.lastIndexOf=function(e,t,n){return CS(this,e,t,n,!1)},WS.prototype.write=function(e,t,n,i){if(void 0===t)i="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)i=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var l=this.length-t;if((void 0===n||n>l)&&(n=l),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var o=!1;;)switch(i){case"hex":return JS(this,e,t,n);case"utf8":case"utf-8":return LS(this,e,t,n);case"ascii":return US(this,e,t,n);case"latin1":case"binary":return HS(this,e,t,n);case"base64":return TS(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return wS(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},WS.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var zS=4096;function PS(e,t,n){var i="";n=Math.min(e.length,n);for(var l=t;l<n;++l)i+=String.fromCharCode(127&e[l]);return i}function BS(e,t,n){var i="";n=Math.min(e.length,n);for(var l=t;l<n;++l)i+=String.fromCharCode(e[l]);return i}function jS(e,t,n){var i=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>i)&&(n=i);for(var l="",o=t;o<n;++o)l+=eR(e[o]);return l}function MS(e,t,n){for(var i=e.slice(t,n),l="",o=0;o<i.length;o+=2)l+=String.fromCharCode(i[o]+256*i[o+1]);return l}function QS(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function ES(e,t,n,i,l,o){if(!vS(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>l||t<o)throw new RangeError('"value" argument is out of bounds');if(n+i>e.length)throw new RangeError("Index out of range")}function DS(e,t,n,i){t<0&&(t=65535+t+1);for(var l=0,o=Math.min(e.length-n,2);l<o;++l)e[n+l]=(t&255<<8*(i?l:1-l))>>>8*(i?l:1-l)}function OS(e,t,n,i){t<0&&(t=4294967295+t+1);for(var l=0,o=Math.min(e.length-n,4);l<o;++l)e[n+l]=t>>>8*(i?l:3-l)&255}function AS(e,t,n,i,l,o){if(n+i>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function _S(e,t,n,i,l){return l||AS(e,0,n,4),mS(e,t,n,i,23,4),n+4}function qS(e,t,n,i,l){return l||AS(e,0,n,8),mS(e,t,n,i,52,8),n+8}WS.prototype.slice=function(e,t){var n,i=this.length;if((e=~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),(t=void 0===t?i:~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),t<e&&(t=e),WS.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=WS.prototype;else{var l=t-e;n=new WS(l,void 0);for(var o=0;o<l;++o)n[o]=this[o+e]}return n},WS.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||QS(e,t,this.length);for(var i=this[e],l=1,o=0;++o<t&&(l*=256);)i+=this[e+o]*l;return i},WS.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||QS(e,t,this.length);for(var i=this[e+--t],l=1;t>0&&(l*=256);)i+=this[e+--t]*l;return i},WS.prototype.readUInt8=function(e,t){return t||QS(e,1,this.length),this[e]},WS.prototype.readUInt16LE=function(e,t){return t||QS(e,2,this.length),this[e]|this[e+1]<<8},WS.prototype.readUInt16BE=function(e,t){return t||QS(e,2,this.length),this[e]<<8|this[e+1]},WS.prototype.readUInt32LE=function(e,t){return t||QS(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},WS.prototype.readUInt32BE=function(e,t){return t||QS(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},WS.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||QS(e,t,this.length);for(var i=this[e],l=1,o=0;++o<t&&(l*=256);)i+=this[e+o]*l;return i>=(l*=128)&&(i-=Math.pow(2,8*t)),i},WS.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||QS(e,t,this.length);for(var i=t,l=1,o=this[e+--i];i>0&&(l*=256);)o+=this[e+--i]*l;return o>=(l*=128)&&(o-=Math.pow(2,8*t)),o},WS.prototype.readInt8=function(e,t){return t||QS(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},WS.prototype.readInt16LE=function(e,t){t||QS(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},WS.prototype.readInt16BE=function(e,t){t||QS(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},WS.prototype.readInt32LE=function(e,t){return t||QS(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},WS.prototype.readInt32BE=function(e,t){return t||QS(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},WS.prototype.readFloatLE=function(e,t){return t||QS(e,4,this.length),bS(this,e,!0,23,4)},WS.prototype.readFloatBE=function(e,t){return t||QS(e,4,this.length),bS(this,e,!1,23,4)},WS.prototype.readDoubleLE=function(e,t){return t||QS(e,8,this.length),bS(this,e,!0,52,8)},WS.prototype.readDoubleBE=function(e,t){return t||QS(e,8,this.length),bS(this,e,!1,52,8)},WS.prototype.writeUIntLE=function(e,t,n,i){(e=+e,t|=0,n|=0,i)||ES(this,e,t,n,Math.pow(2,8*n)-1,0);var l=1,o=0;for(this[t]=255&e;++o<n&&(l*=256);)this[t+o]=e/l&255;return t+n},WS.prototype.writeUIntBE=function(e,t,n,i){(e=+e,t|=0,n|=0,i)||ES(this,e,t,n,Math.pow(2,8*n)-1,0);var l=n-1,o=1;for(this[t+l]=255&e;--l>=0&&(o*=256);)this[t+l]=e/o&255;return t+n},WS.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||ES(this,e,t,1,255,0),WS.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},WS.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||ES(this,e,t,2,65535,0),WS.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):DS(this,e,t,!0),t+2},WS.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||ES(this,e,t,2,65535,0),WS.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):DS(this,e,t,!1),t+2},WS.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||ES(this,e,t,4,4294967295,0),WS.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):OS(this,e,t,!0),t+4},WS.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||ES(this,e,t,4,4294967295,0),WS.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):OS(this,e,t,!1),t+4},WS.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t|=0,!i){var l=Math.pow(2,8*n-1);ES(this,e,t,n,l-1,-l)}var o=0,c=1,r=0;for(this[t]=255&e;++o<n&&(c*=256);)e<0&&0===r&&0!==this[t+o-1]&&(r=1),this[t+o]=(e/c>>0)-r&255;return t+n},WS.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t|=0,!i){var l=Math.pow(2,8*n-1);ES(this,e,t,n,l-1,-l)}var o=n-1,c=1,r=0;for(this[t+o]=255&e;--o>=0&&(c*=256);)e<0&&0===r&&0!==this[t+o+1]&&(r=1),this[t+o]=(e/c>>0)-r&255;return t+n},WS.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||ES(this,e,t,1,127,-128),WS.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},WS.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||ES(this,e,t,2,32767,-32768),WS.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):DS(this,e,t,!0),t+2},WS.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||ES(this,e,t,2,32767,-32768),WS.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):DS(this,e,t,!1),t+2},WS.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||ES(this,e,t,4,2147483647,-2147483648),WS.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):OS(this,e,t,!0),t+4},WS.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||ES(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),WS.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):OS(this,e,t,!1),t+4},WS.prototype.writeFloatLE=function(e,t,n){return _S(this,e,t,!0,n)},WS.prototype.writeFloatBE=function(e,t,n){return _S(this,e,t,!1,n)},WS.prototype.writeDoubleLE=function(e,t,n){return qS(this,e,t,!0,n)},WS.prototype.writeDoubleBE=function(e,t,n){return qS(this,e,t,!1,n)},WS.prototype.copy=function(e,t,n,i){if(n||(n=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);var l,o=i-n;if(this===e&&n<t&&t<i)for(l=o-1;l>=0;--l)e[l+t]=this[l+n];else if(o<1e3||!WS.TYPED_ARRAY_SUPPORT)for(l=0;l<o;++l)e[l+t]=this[l+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},WS.prototype.fill=function(e,t,n,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),1===e.length){var l=e.charCodeAt(0);l<256&&(e=l)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!WS.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var c=vS(e)?e:tR(new WS(e,i).toString()),r=c.length;for(o=0;o<n-t;++o)this[o+t]=c[o%r]}return this};var $S=/[^+\/0-9A-Za-z-_]/g;function eR(e){return e<16?"0"+e.toString(16):e.toString(16)}function tR(e,t){var n;t=t||1/0;for(var i=e.length,l=null,o=[],c=0;c<i;++c){if((n=e.charCodeAt(c))>55295&&n<57344){if(!l){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(c+1===i){(t-=3)>-1&&o.push(239,191,189);continue}l=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),l=n;continue}n=65536+(l-55296<<10|n-56320)}else l&&(t-=3)>-1&&o.push(239,191,189);if(l=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function nR(e){return function(e){var t,n,i,l,o,c;dS||uS();var r=e.length;if(r%4>0)throw new Error("Invalid string. Length must be a multiple of 4");o="="===e[r-2]?2:"="===e[r-1]?1:0,c=new sS(3*r/4-o),i=o>0?r-4:r;var a=0;for(t=0,n=0;t<i;t+=4,n+=3)l=aS[e.charCodeAt(t)]<<18|aS[e.charCodeAt(t+1)]<<12|aS[e.charCodeAt(t+2)]<<6|aS[e.charCodeAt(t+3)],c[a++]=l>>16&255,c[a++]=l>>8&255,c[a++]=255&l;return 2===o?(l=aS[e.charCodeAt(t)]<<2|aS[e.charCodeAt(t+1)]>>4,c[a++]=255&l):1===o&&(l=aS[e.charCodeAt(t)]<<10|aS[e.charCodeAt(t+1)]<<4|aS[e.charCodeAt(t+2)]>>2,c[a++]=l>>8&255,c[a++]=255&l),c}(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace($S,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function iR(e,t,n,i){for(var l=0;l<i&&!(l+n>=t.length||l>=e.length);++l)t[l+n]=e[l];return l}function lR(e){return null!=e&&(!!e._isBuffer||oR(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&oR(e.slice(0,0))}(e))}function oR(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}var cR=Object.freeze({__proto__:null,Buffer:WS,INSPECT_MAX_BYTES:50,SlowBuffer:function(e){return+e!=e&&(e=0),WS.alloc(+e)},isBuffer:lR,kMaxLength:GS}),rR={exports:{}},aR={},sR={};Object.defineProperty(sR,"__esModule",{value:!0}),sR.default=function(e){var t=e.length,n=t%4;if(!n)return e;var i=t,l=4-n,o=t+l,c=WS.alloc(o);for(c.write(e);l--;)c.write("=",i++);return c.toString()},Object.defineProperty(aR,"__esModule",{value:!0});var dR=sR;function uR(e,t){return void 0===t&&(t="utf8"),WS.isBuffer(e)?ZR(e.toString("base64")):ZR(WS.from(e,t).toString("base64"))}function hR(e){return e=e.toString(),dR.default(e).replace(/\-/g,"+").replace(/_/g,"/")}function ZR(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}var bR,mR=uR;mR.encode=uR,mR.decode=function(e,t){return void 0===t&&(t="utf8"),WS.from(hR(e),"base64").toString(t)},mR.toBase64=hR,mR.fromBase64=ZR,mR.toBuffer=function(e){return WS.from(hR(e),"base64")},aR.default=mR,(bR=rR).exports=aR.default,bR.exports.default=bR.exports;var pR=rR.exports,yR={exports:{}};!function(e){!function(t,n){var i={};!function(e){e.__esModule=!0,e.digestLength=32,e.blockSize=64;var t=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function n(e,n,i,l,o){for(var c,r,a,s,d,u,h,Z,b,m,p,y,G;o>=64;){for(c=n[0],r=n[1],a=n[2],s=n[3],d=n[4],u=n[5],h=n[6],Z=n[7],m=0;m<16;m++)p=l+4*m,e[m]=(255&i[p])<<24|(255&i[p+1])<<16|(255&i[p+2])<<8|255&i[p+3];for(m=16;m<64;m++)y=((b=e[m-2])>>>17|b<<15)^(b>>>19|b<<13)^b>>>10,G=((b=e[m-15])>>>7|b<<25)^(b>>>18|b<<14)^b>>>3,e[m]=(y+e[m-7]|0)+(G+e[m-16]|0);for(m=0;m<64;m++)y=(((d>>>6|d<<26)^(d>>>11|d<<21)^(d>>>25|d<<7))+(d&u^~d&h)|0)+(Z+(t[m]+e[m]|0)|0)|0,G=((c>>>2|c<<30)^(c>>>13|c<<19)^(c>>>22|c<<10))+(c&r^c&a^r&a)|0,Z=h,h=u,u=d,d=s+y|0,s=a,a=r,r=c,c=y+G|0;n[0]+=c,n[1]+=r,n[2]+=a,n[3]+=s,n[4]+=d,n[5]+=u,n[6]+=h,n[7]+=Z,l+=64,o-=64}return l}var i=function(){function t(){this.digestLength=e.digestLength,this.blockSize=e.blockSize,this.state=new Int32Array(8),this.temp=new Int32Array(64),this.buffer=new Uint8Array(128),this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this.reset()}return t.prototype.reset=function(){return this.state[0]=1779033703,this.state[1]=3144134277,this.state[2]=1013904242,this.state[3]=2773480762,this.state[4]=1359893119,this.state[5]=2600822924,this.state[6]=528734635,this.state[7]=1541459225,this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this},t.prototype.clean=function(){for(var e=0;e<this.buffer.length;e++)this.buffer[e]=0;for(e=0;e<this.temp.length;e++)this.temp[e]=0;this.reset()},t.prototype.update=function(e,t){if(void 0===t&&(t=e.length),this.finished)throw new Error("SHA256: can't update because hash was finished.");var i=0;if(this.bytesHashed+=t,this.bufferLength>0){for(;this.bufferLength<64&&t>0;)this.buffer[this.bufferLength++]=e[i++],t--;64===this.bufferLength&&(n(this.temp,this.state,this.buffer,0,64),this.bufferLength=0)}for(t>=64&&(i=n(this.temp,this.state,e,i,t),t%=64);t>0;)this.buffer[this.bufferLength++]=e[i++],t--;return this},t.prototype.finish=function(e){if(!this.finished){var t=this.bytesHashed,i=this.bufferLength,l=t/536870912|0,o=t<<3,c=t%64<56?64:128;this.buffer[i]=128;for(var r=i+1;r<c-8;r++)this.buffer[r]=0;this.buffer[c-8]=l>>>24&255,this.buffer[c-7]=l>>>16&255,this.buffer[c-6]=l>>>8&255,this.buffer[c-5]=l>>>0&255,this.buffer[c-4]=o>>>24&255,this.buffer[c-3]=o>>>16&255,this.buffer[c-2]=o>>>8&255,this.buffer[c-1]=o>>>0&255,n(this.temp,this.state,this.buffer,0,c),this.finished=!0}for(r=0;r<8;r++)e[4*r+0]=this.state[r]>>>24&255,e[4*r+1]=this.state[r]>>>16&255,e[4*r+2]=this.state[r]>>>8&255,e[4*r+3]=this.state[r]>>>0&255;return this},t.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},t.prototype._saveState=function(e){for(var t=0;t<this.state.length;t++)e[t]=this.state[t]},t.prototype._restoreState=function(e,t){for(var n=0;n<this.state.length;n++)this.state[n]=e[n];this.bytesHashed=t,this.finished=!1,this.bufferLength=0},t}();e.Hash=i;var l=function(){function e(e){this.inner=new i,this.outer=new i,this.blockSize=this.inner.blockSize,this.digestLength=this.inner.digestLength;var t=new Uint8Array(this.blockSize);if(e.length>this.blockSize)(new i).update(e).finish(t).clean();else for(var n=0;n<e.length;n++)t[n]=e[n];for(n=0;n<t.length;n++)t[n]^=54;this.inner.update(t);for(n=0;n<t.length;n++)t[n]^=106;this.outer.update(t),this.istate=new Uint32Array(8),this.ostate=new Uint32Array(8),this.inner._saveState(this.istate),this.outer._saveState(this.ostate);for(n=0;n<t.length;n++)t[n]=0}return e.prototype.reset=function(){return this.inner._restoreState(this.istate,this.inner.blockSize),this.outer._restoreState(this.ostate,this.outer.blockSize),this},e.prototype.clean=function(){for(var e=0;e<this.istate.length;e++)this.ostate[e]=this.istate[e]=0;this.inner.clean(),this.outer.clean()},e.prototype.update=function(e){return this.inner.update(e),this},e.prototype.finish=function(e){return this.outer.finished?this.outer.finish(e):(this.inner.finish(e),this.outer.update(e,this.digestLength).finish(e)),this},e.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},e}();function o(e){var t=(new i).update(e),n=t.digest();return t.clean(),n}function c(e,t){var n=new l(e).update(t),i=n.digest();return n.clean(),i}function r(e,t,n,i){var l=i[0];if(0===l)throw new Error("hkdf: cannot expand more");t.reset(),l>1&&t.update(e),n&&t.update(n),t.update(i),t.finish(e),i[0]++}e.HMAC=l,e.hash=o,e.default=o,e.hmac=c;var a=new Uint8Array(e.digestLength);function s(e,t,n,i){void 0===t&&(t=a),void 0===i&&(i=32);for(var o=new Uint8Array([1]),s=c(t,e),d=new l(s),u=new Uint8Array(d.digestLength),h=u.length,Z=new Uint8Array(i),b=0;b<i;b++)h===u.length&&(r(u,d,n,o),h=0),Z[b]=u[h++];return d.clean(),u.fill(0),o.fill(0),Z}function d(e,t,n,i){for(var o=new l(e),c=o.digestLength,r=new Uint8Array(4),a=new Uint8Array(c),s=new Uint8Array(c),d=new Uint8Array(i),u=0;u*c<i;u++){var h=u+1;r[0]=h>>>24&255,r[1]=h>>>16&255,r[2]=h>>>8&255,r[3]=h>>>0&255,o.reset(),o.update(t),o.update(r),o.finish(s);for(var Z=0;Z<c;Z++)a[Z]=s[Z];for(Z=2;Z<=n;Z++){o.reset(),o.update(s).finish(s);for(var b=0;b<c;b++)a[b]^=s[b]}for(Z=0;Z<c&&u*c+Z<i;Z++)d[u*c+Z]=a[Z]}for(u=0;u<c;u++)a[u]=s[u]=0;for(u=0;u<4;u++)r[u]=0;return o.clean(),d}e.hkdf=s,e.pbkdf2=d}(i);var l=i.default;for(var o in i)l[o]=i[o];e.exports=l}()}(yR);var GR=n(yR.exports),XR=crypto;const VR=e=>e instanceof CryptoKey,WR=new TextEncoder,IR=new TextDecoder;const gR=e=>{let t=e;t instanceof Uint8Array&&(t=IR.decode(t)),t=t.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return(e=>{const t=atob(e),n=new Uint8Array(t.length);for(let e=0;e<t.length;e++)n[e]=t.charCodeAt(e);return n})(t)}catch(e){throw new TypeError("The input to be decoded is not correctly encoded.")}};class SR extends Error{constructor(e){var t;super(e),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,null===(t=Error.captureStackTrace)||void 0===t||t.call(Error,this,this.constructor)}static get code(){return"ERR_JOSE_GENERIC"}}class RR extends SR{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unspecified",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"unspecified";super(e),this.code="ERR_JWT_CLAIM_VALIDATION_FAILED",this.claim=t,this.reason=n}static get code(){return"ERR_JWT_CLAIM_VALIDATION_FAILED"}}class fR extends SR{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unspecified",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"unspecified";super(e),this.code="ERR_JWT_EXPIRED",this.claim=t,this.reason=n}static get code(){return"ERR_JWT_EXPIRED"}}class vR extends SR{constructor(){super(...arguments),this.code="ERR_JOSE_ALG_NOT_ALLOWED"}static get code(){return"ERR_JOSE_ALG_NOT_ALLOWED"}}class YR extends SR{constructor(){super(...arguments),this.code="ERR_JOSE_NOT_SUPPORTED"}static get code(){return"ERR_JOSE_NOT_SUPPORTED"}}class KR extends SR{constructor(){super(...arguments),this.code="ERR_JWS_INVALID"}static get code(){return"ERR_JWS_INVALID"}}class NR extends SR{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}static get code(){return"ERR_JWT_INVALID"}}class CR extends SR{constructor(){super(...arguments),this.code="ERR_JWKS_INVALID"}static get code(){return"ERR_JWKS_INVALID"}}class kR extends SR{constructor(){super(...arguments),this.code="ERR_JWKS_NO_MATCHING_KEY",this.message="no applicable key found in the JSON Web Key Set"}static get code(){return"ERR_JWKS_NO_MATCHING_KEY"}}class JR extends SR{constructor(){super(...arguments),this.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS",this.message="multiple matching keys found in the JSON Web Key Set"}static get code(){return"ERR_JWKS_MULTIPLE_MATCHING_KEYS"}}class LR extends SR{constructor(){super(...arguments),this.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED",this.message="signature verification failed"}static get code(){return"ERR_JWS_SIGNATURE_VERIFICATION_FAILED"}}function UR(){return"function"==typeof WebSocketPair}function HR(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"algorithm.name";return new TypeError("CryptoKey does not support this operation, its ".concat(t," must be ").concat(e))}function TR(e,t){return e.name===t}function wR(e){return parseInt(e.name.slice(4),10)}function FR(e){switch(e){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw new Error("unreachable")}}function xR(e,t){if(t.length&&!t.some((t=>e.usages.includes(t)))){let e="CryptoKey does not support this operation, its usages must include ";if(t.length>2){const n=t.pop();e+="one of ".concat(t.join(", "),", or ").concat(n,".")}else 2===t.length?e+="one of ".concat(t[0]," or ").concat(t[1],"."):e+="".concat(t[0],".");throw new TypeError(e)}}var zR=function(e){let t="Key must be ";for(var n=arguments.length,i=new Array(n>1?n-1:0),l=1;l<n;l++)i[l-1]=arguments[l];if(i.length>2){const e=i.pop();t+="one of type ".concat(i.join(", "),", or ").concat(e,".")}else 2===i.length?t+="one of type ".concat(i[0]," or ").concat(i[1],"."):t+="of type ".concat(i[0],".");return null==e?t+=" Received ".concat(e):"function"==typeof e&&e.name?t+=" Received function ".concat(e.name):"object"==typeof e&&null!=e&&e.constructor&&e.constructor.name&&(t+=" Received an instance of ".concat(e.constructor.name)),t},PR=e=>VR(e);const BR=["CryptoKey"];function jR(e){if("object"!=typeof(t=e)||null===t||"[object Object]"!==Object.prototype.toString.call(e))return!1;var t;if(null===Object.getPrototypeOf(e))return!0;let n=e;for(;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(e)===n}const MR=async e=>{var t,n;const{algorithm:i,keyUsages:l}=function(e){let t,n;switch(e.kty){case"oct":switch(e.alg){case"HS256":case"HS384":case"HS512":t={name:"HMAC",hash:"SHA-".concat(e.alg.slice(-3))},n=["sign","verify"];break;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":throw new YR("".concat(e.alg," keys cannot be imported as CryptoKey instances"));case"A128GCM":case"A192GCM":case"A256GCM":case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":t={name:"AES-GCM"},n=["encrypt","decrypt"];break;case"A128KW":case"A192KW":case"A256KW":t={name:"AES-KW"},n=["wrapKey","unwrapKey"];break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":t={name:"PBKDF2"},n=["deriveBits"];break;default:throw new YR('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"RSA":switch(e.alg){case"PS256":case"PS384":case"PS512":t={name:"RSA-PSS",hash:"SHA-".concat(e.alg.slice(-3))},n=e.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":t={name:"RSASSA-PKCS1-v1_5",hash:"SHA-".concat(e.alg.slice(-3))},n=e.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":t={name:"RSA-OAEP",hash:"SHA-".concat(parseInt(e.alg.slice(-3),10)||1)},n=e.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new YR('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"EC":switch(e.alg){case"ES256":t={name:"ECDSA",namedCurve:"P-256"},n=e.d?["sign"]:["verify"];break;case"ES384":t={name:"ECDSA",namedCurve:"P-384"},n=e.d?["sign"]:["verify"];break;case"ES512":t={name:"ECDSA",namedCurve:"P-521"},n=e.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":t={name:"ECDH",namedCurve:e.crv},n=e.d?["deriveBits"]:[];break;default:throw new YR('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case UR()&&"OKP":if("EdDSA"!==e.alg)throw new YR('Invalid or unsupported JWK "alg" (Algorithm) Parameter value');if("Ed25519"!==e.crv)throw new YR('Invalid or unsupported JWK "crv" (Subtype of Key Pair) Parameter value');t={name:"NODE-ED25519",namedCurve:"NODE-ED25519"},n=e.d?["sign"]:["verify"];break;default:throw new YR('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:t,keyUsages:n}}(e),o=[i,null!==(t=e.ext)&&void 0!==t&&t,null!==(n=e.key_ops)&&void 0!==n?n:l];if("PBKDF2"===i.name)return XR.subtle.importKey("raw",gR(e.k),...o);const c={...e};return delete c.alg,XR.subtle.importKey("jwk",c,...o)};const QR=(e,t,n)=>{e.startsWith("HS")||"dir"===e||e.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(e)?(e=>{if(!(e instanceof Uint8Array)){if(!PR(e))throw new TypeError(zR(e,...BR,"Uint8Array"));if("secret"!==e.type)throw new TypeError("".concat(BR.join(" or "),' instances for symmetric algorithms must be of type "secret"'))}})(t):((e,t)=>{if(!PR(e))throw new TypeError(zR(e,...BR));if("secret"===e.type)throw new TypeError("".concat(BR.join(" or "),' instances for asymmetric algorithms must not be of type "secret"'));if("sign"===t&&"public"===e.type)throw new TypeError("".concat(BR.join(" or "),' instances for asymmetric algorithm signing must be of type "private"'));if("decrypt"===t&&"public"===e.type)throw new TypeError("".concat(BR.join(" or "),' instances for asymmetric algorithm decryption must be of type "private"'));if(e.algorithm&&"verify"===t&&"private"===e.type)throw new TypeError("".concat(BR.join(" or "),' instances for asymmetric algorithm verifying must be of type "public"'));if(e.algorithm&&"encrypt"===t&&"private"===e.type)throw new TypeError("".concat(BR.join(" or "),' instances for asymmetric algorithm encryption must be of type "public"'))})(t,n)};function ER(e,t,n){if(VR(t))return function(e,t){switch(t){case"HS256":case"HS384":case"HS512":{if(!TR(e.algorithm,"HMAC"))throw HR("HMAC");const n=parseInt(t.slice(2),10);if(wR(e.algorithm.hash)!==n)throw HR("SHA-".concat(n),"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!TR(e.algorithm,"RSASSA-PKCS1-v1_5"))throw HR("RSASSA-PKCS1-v1_5");const n=parseInt(t.slice(2),10);if(wR(e.algorithm.hash)!==n)throw HR("SHA-".concat(n),"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!TR(e.algorithm,"RSA-PSS"))throw HR("RSA-PSS");const n=parseInt(t.slice(2),10);if(wR(e.algorithm.hash)!==n)throw HR("SHA-".concat(n),"algorithm.hash");break}case UR()&&"EdDSA":if(!TR(e.algorithm,"NODE-ED25519"))throw HR("NODE-ED25519");break;case"ES256":case"ES384":case"ES512":{if(!TR(e.algorithm,"ECDSA"))throw HR("ECDSA");const n=FR(t);if(e.algorithm.namedCurve!==n)throw HR(n,"algorithm.namedCurve");break}default:throw new TypeError("CryptoKey does not support this operation")}for(var n=arguments.length,i=new Array(n>2?n-2:0),l=2;l<n;l++)i[l-2]=arguments[l];xR(e,i)}(t,e,n),t;if(t instanceof Uint8Array){if(!e.startsWith("HS"))throw new TypeError(zR(t,...BR));return XR.subtle.importKey("raw",t,{hash:"SHA-".concat(e.slice(-3)),name:"HMAC"},!1,[n])}throw new TypeError(zR(t,...BR,"Uint8Array"))}const DR=async(e,t,n,i)=>{const l=await ER(e,t,"verify");((e,t)=>{if(e.startsWith("RS")||e.startsWith("PS")){const{modulusLength:n}=t.algorithm;if("number"!=typeof n||n<2048)throw new TypeError("".concat(e," requires key modulusLength to be 2048 bits or larger"))}})(e,l);const o=function(e,t){const n="SHA-".concat(e.slice(-3));switch(e){case"HS256":case"HS384":case"HS512":return{hash:n,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:n,name:"RSA-PSS",saltLength:e.slice(-3)>>3};case"RS256":case"RS384":case"RS512":return{hash:n,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:n,name:"ECDSA",namedCurve:t.namedCurve};case UR()&&"EdDSA":const{namedCurve:i}=t;return{name:i,namedCurve:i};default:throw new YR("alg ".concat(e," is not supported either by JOSE or your javascript runtime"))}}(e,l.algorithm);try{return await XR.subtle.verify(o,l,n,i)}catch(e){return!1}};async function OR(e,t,n){var i;if(!jR(e))throw new KR("Flattened JWS must be an object");if(void 0===e.protected&&void 0===e.header)throw new KR('Flattened JWS must have either of the "protected" or "header" members');if(void 0!==e.protected&&"string"!=typeof e.protected)throw new KR("JWS Protected Header incorrect type");if(void 0===e.payload)throw new KR("JWS Payload missing");if("string"!=typeof e.signature)throw new KR("JWS Signature missing or incorrect type");if(void 0!==e.header&&!jR(e.header))throw new KR("JWS Unprotected Header incorrect type");let l={};if(e.protected){const t=gR(e.protected);try{l=JSON.parse(IR.decode(t))}catch(e){throw new KR("JWS Protected Header is invalid")}}if(!function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const i=t.filter(Boolean);if(0===i.length||1===i.length)return!0;let l;for(const e of i){const t=Object.keys(e);if(l&&0!==l.size)for(const e of t){if(l.has(e))return!1;l.add(e)}else l=new Set(t)}return!0}(l,e.header))throw new KR("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const o={...l,...e.header},c=function(e,t,n,i,l){if(void 0!==l.crit&&void 0===i.crit)throw new e('"crit" (Critical) Header Parameter MUST be integrity protected');if(!i||void 0===i.crit)return new Set;if(!Array.isArray(i.crit)||0===i.crit.length||i.crit.some((e=>"string"!=typeof e||0===e.length)))throw new e('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let o;o=void 0!==n?new Map([...Object.entries(n),...t.entries()]):t;for(const t of i.crit){if(!o.has(t))throw new YR('Extension Header Parameter "'.concat(t,'" is not recognized'));if(void 0===l[t])throw new e('Extension Header Parameter "'.concat(t,'" is missing'));if(o.get(t)&&void 0===i[t])throw new e('Extension Header Parameter "'.concat(t,'" MUST be integrity protected'))}return new Set(i.crit)}(KR,new Map([["b64",!0]]),null==n?void 0:n.crit,l,o);let r=!0;if(c.has("b64")&&(r=l.b64,"boolean"!=typeof r))throw new KR('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:a}=o;if("string"!=typeof a||!a)throw new KR('JWS "alg" (Algorithm) Header Parameter missing or invalid');const s=n&&((e,t)=>{if(void 0!==t&&(!Array.isArray(t)||t.some((e=>"string"!=typeof e))))throw new TypeError('"'.concat(e,'" option must be an array of strings'));if(t)return new Set(t)})("algorithms",n.algorithms);if(s&&!s.has(a))throw new vR('"alg" (Algorithm) Header Parameter not allowed');if(r){if("string"!=typeof e.payload)throw new KR("JWS Payload must be a string")}else if("string"!=typeof e.payload&&!(e.payload instanceof Uint8Array))throw new KR("JWS Payload must be a string or an Uint8Array instance");let d=!1;"function"==typeof t&&(t=await t(l,e),d=!0),QR(a,t,"verify");const u=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const i=t.reduce(((e,t)=>{let{length:n}=t;return e+n}),0),l=new Uint8Array(i);let o=0;return t.forEach((e=>{l.set(e,o),o+=e.length})),l}(WR.encode(null!==(i=e.protected)&&void 0!==i?i:""),WR.encode("."),"string"==typeof e.payload?WR.encode(e.payload):e.payload),h=gR(e.signature);if(!await DR(a,t,h,u))throw new LR;let Z;Z=r?gR(e.payload):"string"==typeof e.payload?WR.encode(e.payload):e.payload;const b={payload:Z};return void 0!==e.protected&&(b.protectedHeader=l),void 0!==e.header&&(b.unprotectedHeader=e.header),d?{...b,key:t}:b}var AR=e=>Math.floor(e.getTime()/1e3);const _R=86400,qR=/^(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)$/i;var $R=e=>{const t=qR.exec(e);if(!t)throw new TypeError("Invalid time period format");const n=parseFloat(t[1]);switch(t[2].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":return Math.round(n);case"minute":case"minutes":case"min":case"mins":case"m":return Math.round(60*n);case"hour":case"hours":case"hr":case"hrs":case"h":return Math.round(3600*n);case"day":case"days":case"d":return Math.round(n*_R);case"week":case"weeks":case"w":return Math.round(604800*n);default:return Math.round(31557600*n)}};const ef=e=>e.toLowerCase().replace(/^application\//,""),tf=(e,t)=>"string"==typeof e?t.includes(e):!!Array.isArray(e)&&t.some(Set.prototype.has.bind(new Set(e)));async function nf(e,t,n){var i;const l=await async function(e,t,n){if(e instanceof Uint8Array&&(e=IR.decode(e)),"string"!=typeof e)throw new KR("Compact JWS must be a string or Uint8Array");const{0:i,1:l,2:o,length:c}=e.split(".");if(3!==c)throw new KR("Invalid Compact JWS");const r=await OR({payload:l,protected:i,signature:o},t,n),a={payload:r.payload,protectedHeader:r.protectedHeader};return"function"==typeof t?{...a,key:r.key}:a}(e,t,n);if((null===(i=l.protectedHeader.crit)||void 0===i?void 0:i.includes("b64"))&&!1===l.protectedHeader.b64)throw new NR("JWTs MUST NOT use unencoded payload");const o=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{typ:i}=n;if(i&&("string"!=typeof e.typ||ef(e.typ)!==ef(i)))throw new RR('unexpected "typ" JWT header value',"typ","check_failed");let l;try{l=JSON.parse(IR.decode(t))}catch(e){}if(!jR(l))throw new NR("JWT Claims Set must be a top-level JSON object");const{issuer:o}=n;if(o&&!(Array.isArray(o)?o:[o]).includes(l.iss))throw new RR('unexpected "iss" claim value',"iss","check_failed");const{subject:c}=n;if(c&&l.sub!==c)throw new RR('unexpected "sub" claim value',"sub","check_failed");const{audience:r}=n;if(r&&!tf(l.aud,"string"==typeof r?[r]:r))throw new RR('unexpected "aud" claim value',"aud","check_failed");let a;switch(typeof n.clockTolerance){case"string":a=$R(n.clockTolerance);break;case"number":a=n.clockTolerance;break;case"undefined":a=0;break;default:throw new TypeError("Invalid clockTolerance option type")}const{currentDate:s}=n,d=AR(s||new Date);if((void 0!==l.iat||n.maxTokenAge)&&"number"!=typeof l.iat)throw new RR('"iat" claim must be a number',"iat","invalid");if(void 0!==l.nbf){if("number"!=typeof l.nbf)throw new RR('"nbf" claim must be a number',"nbf","invalid");if(l.nbf>d+a)throw new RR('"nbf" claim timestamp check failed',"nbf","check_failed")}if(void 0!==l.exp){if("number"!=typeof l.exp)throw new RR('"exp" claim must be a number',"exp","invalid");if(l.exp<=d-a)throw new fR('"exp" claim timestamp check failed',"exp","check_failed")}if(n.maxTokenAge){const e=d-l.iat;if(e-a>("number"==typeof n.maxTokenAge?n.maxTokenAge:$R(n.maxTokenAge)))throw new fR('"iat" claim timestamp check failed (too far in the past)',"iat","check_failed");if(e<0-a)throw new RR('"iat" claim timestamp check failed (it should be in the past)',"iat","check_failed")}return l}(l.protectedHeader,l.payload,n),c={payload:o,protectedHeader:l.protectedHeader};return"function"==typeof t?{...c,key:l.key}:c}function lf(e){return jR(e)}class of{constructor(e){if(this._cached=new WeakMap,!function(e){return e&&"object"==typeof e&&Array.isArray(e.keys)&&e.keys.every(lf)}(e))throw new CR("JSON Web Key Set malformed");var t;this._jwks=(t=e,"function"==typeof structuredClone?structuredClone(t):JSON.parse(JSON.stringify(t)))}async getKey(e,t){const{alg:n,kid:i}={...e,...t.header},l=function(e){switch("string"==typeof e&&e.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";default:throw new YR('Unsupported "alg" value for a JSON Web Key Set')}}(n),o=this._jwks.keys.filter((e=>{let t=l===e.kty;if(t&&"string"==typeof i&&(t=i===e.kid),t&&"string"==typeof e.alg&&(t=n===e.alg),t&&"string"==typeof e.use&&(t="sig"===e.use),t&&Array.isArray(e.key_ops)&&(t=e.key_ops.includes("verify")),t&&"EdDSA"===n&&(t="Ed25519"===e.crv||"Ed448"===e.crv),t)switch(n){case"ES256":t="P-256"===e.crv;break;case"ES256K":t="secp256k1"===e.crv;break;case"ES384":t="P-384"===e.crv;break;case"ES512":t="P-521"===e.crv}return t})),{0:c,length:r}=o;if(0===r)throw new kR;if(1!==r)throw new JR;const a=this._cached.get(c)||this._cached.set(c,{}).get(c);if(void 0===a[n]){const e=await async function(e,t,n){if(!jR(e))throw new TypeError("JWK must be an object");if(t||(t=e.alg),"string"!=typeof t||!t)throw new TypeError('"alg" argument is required when "jwk.alg" is not present');switch(e.kty){case"oct":if("string"!=typeof e.k||!e.k)throw new TypeError('missing "k" (Key Value) Parameter value');return null!=n||(n=!0!==e.ext),n?MR({...e,alg:t,ext:!1}):gR(e.k);case"RSA":if(void 0!==e.oth)throw new YR('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return MR({...e,alg:t});default:throw new YR('Unsupported "kty" (Key Type) Parameter value')}}({...c,ext:!0},n);if(e instanceof Uint8Array||"public"!==e.type)throw new CR("JSON Web Key Set members must be public keys");a[n]=e}return a[n]}}var cf={exports:{}},rf={exports:{}},af=i(cR);!function(e,t){var n=af,i=n.Buffer;function l(e,t){for(var n in e)t[n]=e[n]}function o(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=n:(l(n,t),t.Buffer=o),o.prototype=Object.create(i.prototype),l(i,o),o.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},o.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var l=i(e);return void 0!==t?"string"==typeof n?l.fill(t,n):l.fill(t):l.fill(0),l},o.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}}(rf,rf.exports);var sf=65536,df=4294967295;var uf=rf.exports.Buffer,hf=t.crypto||t.msCrypto;hf&&hf.getRandomValues?cf.exports=function(e,t){if(e>df)throw new RangeError("requested too many random bytes");var n=uf.allocUnsafe(e);if(e>0)if(e>sf)for(var i=0;i<e;i+=sf)hf.getRandomValues(n.slice(i,i+sf));else hf.getRandomValues(n);if("function"==typeof t)return FI.nextTick((function(){t(null,n)}));return n}:cf.exports=function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")};var Zf=cf.exports;class bf{base64URLEncode(e){return pR.encode(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}base64URLDecode(e){return pR.decode(e).toString()}hashSha256(e){return WS.from(GR((new TextEncoder).encode(e)))}generateRandomBytes(e){return Zf(e)}verifyJwt(e,t,n,i,l,o,c){return nf(e,(r={keys:[t]},of.prototype.getKey.bind(new of(r))),{algorithms:n,audience:i,clockTolerance:c,issuer:l,subject:o}).then((()=>Promise.resolve(!0))).catch((e=>{var t;return Promise.reject(new BV("SPA-CRYPTO-UTILS-VJ-IV01",null!==(t=null==e?void 0:e.reason)&&void 0!==t?t:JSON.stringify(e),"".concat(null==e?void 0:e.code," ").concat(null==e?void 0:e.claim)))}));var r}}const mf=(t,n,i)=>JV(void 0,void 0,void 0,(function*(){var l;const o=(t=>{switch(t){case e.Storage.LocalStorage:return new lS;case e.Storage.SessionStorage:return new cS;case e.Storage.BrowserMemory:return new oS;default:return new cS}})(n.storage),c=new bf,r=new AV;yield r.initialize(n,o,c,t);const a=new DW(r),s=r.getDataLayer(),d=yield OW((()=>JV(void 0,void 0,void 0,(function*(){return r.getSignOutURL()}))),null!==(l=n.storage)&&void 0!==l?l:e.Storage.SessionStorage,(e=>s.setSessionDataParameter(wV,null!=e?e:""))),u=i(r,a);let h=!1;const Z=iS.getInstance();let b,m,p=!0;(null==Z?void 0:Z.init)&&(yield Z.init(!0,(e=>JV(void 0,void 0,void 0,(function*(){yield u.attachTokenToRequestConfig(e)})))));const y=()=>JV(void 0,void 0,void 0,(function*(){const e=yield r.getOIDCServiceEndpoints(),t=yield s.getConfigData();u.initializeSessionManger(t,e,(()=>JV(void 0,void 0,void 0,(function*(){return(yield r.getBasicUserInfo()).sessionState}))),(e=>JV(void 0,void 0,void 0,(function*(){return r.getAuthorizationURL(e)}))),d)})),G=()=>JV(void 0,void 0,void 0,(function*(){return yield d.receivePromptNoneResponse((e=>JV(void 0,void 0,void 0,(function*(){yield s.setSessionDataParameter(wV,null!=e?e:"")}))))})),X=e=>{e.preventSignOutURLUpdate&&(h=!0)},V=(e,t,n)=>JV(void 0,void 0,void 0,(function*(){return yield u.requestAccessToken(e,t,y,void 0,n)})),W=()=>JV(void 0,void 0,void 0,(function*(){const t=yield s.getConfigData(),n=yield r.getAuthorizationURL({prompt:"none",state:TW}),i=new URL(n);i.searchParams.set("response_mode","query");const l=i.toString();if(t.storage===e.Storage.BrowserMemory&&t.enablePKCE){const e=i.searchParams.get(zV);QW.setPKCE(jV.extractPKCEKeyFromStateParam(null!=e?e:""),yield r.getPKCECode(null!=e?e:""))}return l}));return{disableHttpHandler:()=>(u.disableHttpHandler(Z),p=!1,!0),enableHttpHandler:()=>(u.enableHttpHandler(Z),p=!0,!0),getAccessToken:()=>JV(void 0,void 0,void 0,(function*(){return u.getAccessToken()})),getBasicUserInfo:()=>JV(void 0,void 0,void 0,(function*(){return u.getBasicUserInfo()})),getCryptoHelper:()=>JV(void 0,void 0,void 0,(function*(){return u.getCryptoHelper()})),getDataLayer:()=>JV(void 0,void 0,void 0,(function*(){return u.getDataLayer()})),getDecodedIDToken:()=>JV(void 0,void 0,void 0,(function*(){return u.getDecodedIDToken()})),getHttpClient:()=>Z,getIDToken:()=>JV(void 0,void 0,void 0,(function*(){return u.getIDToken()})),getOIDCServiceEndpoints:()=>JV(void 0,void 0,void 0,(function*(){return u.getOIDCServiceEndpoints()})),httpRequest:e=>JV(void 0,void 0,void 0,(function*(){return yield u.httpRequest(Z,e,p,b,m)})),httpRequestAll:e=>JV(void 0,void 0,void 0,(function*(){return yield u.httpRequestAll(e,Z,p,b,m)})),isAuthenticated:()=>JV(void 0,void 0,void 0,(function*(){return u.isAuthenticated()})),isSessionActive:()=>JV(void 0,void 0,void 0,(function*(){return"true"===(yield s.getSessionStatus())})),refreshAccessToken:()=>JV(void 0,void 0,void 0,(function*(){try{return yield u.refreshAccessToken(X)}catch(e){return Promise.reject(e)}})),requestCustomGrant:e=>JV(void 0,void 0,void 0,(function*(){return yield u.requestCustomGrant(e,X)})),revokeAccessToken:()=>JV(void 0,void 0,void 0,(function*(){const e=yield a.getRefreshTimeoutTimer();return r.revokeAccessToken().then((()=>(d.reset(),a.clearRefreshTokenTimeout(e),Promise.resolve(!0)))).catch((e=>Promise.reject(e)))})),setHttpRequestErrorCallback:e=>{b=e},setHttpRequestFinishCallback:e=>{(null==Z?void 0:Z.setHttpRequestFinishCallback)&&Z.setHttpRequestFinishCallback(e)},setHttpRequestStartCallback:e=>{(null==Z?void 0:Z.setHttpRequestStartCallback)&&Z.setHttpRequestStartCallback(e)},setHttpRequestSuccessCallback:e=>{(null==Z?void 0:Z.setHttpRequestSuccessCallback)&&Z.setHttpRequestSuccessCallback(e)},signIn:(t,i,l,o)=>JV(void 0,void 0,void 0,(function*(){var c,a,d;const h=yield u.handleSignIn(G,y);if(h)return h;{let u,h,b;return(null==n?void 0:n.responseMode)===e.ResponseMode.formPost&&i?(u=i,h=null!=l?l:"",b=null!=o?o:""):(u=null!==(c=new URL(window.location.href).searchParams.get(TV))&&void 0!==c?c:"",h=null!==(a=new URL(window.location.href).searchParams.get(wV))&&void 0!==a?a:"",b=null!==(d=new URL(window.location.href).searchParams.get(zV))&&void 0!==d?d:"",QW.removeAuthorizationCode()),u&&b?(Z="true",JV(void 0,void 0,void 0,(function*(){yield s.setSessionStatus(Z)})),V(u,h,b)):r.getAuthorizationURL(t).then((t=>JV(void 0,void 0,void 0,(function*(){if(n.storage===e.Storage.BrowserMemory&&n.enablePKCE){const e=jV.extractPKCEKeyFromStateParam(b);QW.setPKCE(e,yield r.getPKCECode(b))}return location.href=t,yield QW.waitTillPageRedirect(),Promise.resolve({allowedScopes:"",displayName:"",email:"",sessionState:"",sub:"",tenantDomain:"",username:""})}))))}var Z})),signOut:()=>JV(void 0,void 0,void 0,(function*(){return(yield r.isAuthenticated())&&!h?location.href=yield r.getSignOutURL():location.href=QW.getSignOutURL(n.clientID,t),a.clearRefreshTokenTimeout(),yield s.removeOIDCProviderMetaData(),yield s.removeTemporaryData(),yield s.removeSessionData(),yield s.removeSessionStatus(),yield QW.waitTillPageRedirect(),!0})),trySignInSilently:()=>JV(void 0,void 0,void 0,(function*(){return yield u.trySignInSilently(W,V,d)})),updateConfig:e=>JV(void 0,void 0,void 0,(function*(){const t=yield s.getConfigData(),n=!(t&&t.endpoints&&t.endpoints.checkSessionIframe&&e&&e.endpoints&&e.endpoints.checkSessionIframe&&t.endpoints.checkSessionIframe===e.endpoints.checkSessionIframe),i=Object.assign(Object.assign({},t),e);yield r.updateConfig(i),i.enableOIDCSessionManagement&&n&&(d.reset(),y())}))}})),pf=(t,n,i,l)=>JV(void 0,void 0,void 0,(function*(){var o;let c;const r=null!==(o=null==n?void 0:n.requestTimeout)&&void 0!==o?o:6e4;let a=!0,s=!1;const d=(t=>{switch(t){case e.Storage.LocalStorage:return new lS;case e.Storage.SessionStorage:return new cS;case e.Storage.BrowserMemory:return new oS;default:return new cS}})(n.storage),u=new bf,h=new AV;yield h.initialize(n,d,u,t);const Z=new DW(h),b=yield OW((()=>JV(void 0,void 0,void 0,(function*(){const e={type:lW};try{return yield y(e)}catch(e){return QW.getSignOutURL(n.clientID,t)}}))),n.storage,(e=>G(e))),m=l(h,Z),p=new i,y=e=>{const t=new MessageChannel;return p.postMessage(e,[t.port2]),new Promise(((e,n)=>{const i=setTimeout((()=>{n(new BV("SPA-WEB_WORKER_CLIENT-COM-TO01","Operation timed out.","No response was received from the web worker for "+r/1e3+" since dispatching the request"))}),r);return t.port1.onmessage=l=>{let{data:o}=l;if(clearTimeout(i),t.port1.close(),t.port2.close(),null==o?void 0:o.success){const t=(null==o?void 0:o.data)?JSON.parse(null==o?void 0:o.data):null;(null==o?void 0:o.blob)&&(t.data=null==o?void 0:o.blob),e(t)}else n(o.error?JSON.parse(o.error):null)}}))},G=e=>y({data:e,type:SW}),X=()=>y({type:RW}),V=()=>JV(void 0,void 0,void 0,(function*(){const e=yield f(),t=yield v();m.initializeSessionManger(t,e,(()=>JV(void 0,void 0,void 0,(function*(){return(yield Y()).sessionState}))),(e=>JV(void 0,void 0,void 0,(function*(){return(yield I(e)).authorizationURL}))),b)})),W=()=>JV(void 0,void 0,void 0,(function*(){var e;const t=yield v(),n={data:{prompt:"none",state:TW},type:GW},i=yield y(n),l=jV.extractPKCEKeyFromStateParam(null!==(e=new URL(i.authorizationURL).searchParams.get(zV))&&void 0!==e?e:"");i.pkce&&t.enablePKCE&&QW.setPKCE(l,i.pkce);const o=i.authorizationURL,c=new URL(o);c.searchParams.set("response_mode","query");return c.toString()})),I=e=>JV(void 0,void 0,void 0,(function*(){const t=yield v();return y({data:e,type:GW}).then((e=>JV(void 0,void 0,void 0,(function*(){var n;if(e.pkce&&t.enablePKCE){const t=jV.extractPKCEKeyFromStateParam(null!==(n=new URL(e.authorizationURL).searchParams.get(zV))&&void 0!==n?n:"");QW.setPKCE(t,e.pkce)}return Promise.resolve(e)}))))})),g=(e,n,i)=>JV(void 0,void 0,void 0,(function*(){const l=yield v(),o=jV.extractPKCEKeyFromStateParam(i),c={data:{code:e,pkce:l.enablePKCE?QW.getPKCE(o):void 0,sessionState:n,state:i},type:XW};return l.enablePKCE&&QW.removePKCE(o),y(c).then((e=>y({type:WW}).then((n=>(QW.setSignOutURL(n,l.clientID,t),l.enableOIDCSessionManagement&&V(),X(),Promise.resolve(e)))).catch((e=>Promise.reject(e))))).catch((e=>Promise.reject(e)))})),S=()=>JV(void 0,void 0,void 0,(function*(){return yield b.receivePromptNoneResponse((e=>JV(void 0,void 0,void 0,(function*(){return G(e)}))))})),R=()=>JV(void 0,void 0,void 0,(function*(){if(yield K())return yield X(),n.enableOIDCSessionManagement&&V(),Y()})),f=()=>y({type:hW}).then((e=>Promise.resolve(e))).catch((e=>Promise.reject(e))),v=()=>y({type:NW}).then((e=>Promise.resolve(e))).catch((e=>Promise.reject(e))),Y=()=>y({type:ZW}).then((e=>Promise.resolve(e))).catch((e=>Promise.reject(e))),K=()=>y({type:VW}).then((e=>Promise.resolve(e))).catch((e=>Promise.reject(e)));return{disableHttpHandler:()=>y({type:yW}).then((()=>(a=!1,Promise.resolve(!0)))).catch((e=>Promise.reject(e))),enableHttpHandler:()=>y({type:pW}).then((()=>(a=!0,Promise.resolve(!0)))).catch((e=>Promise.reject(e))),getBasicUserInfo:Y,getCryptoHelper:()=>y({type:mW}).then((e=>Promise.resolve(e))).catch((e=>Promise.reject(e))),getDecodedIDPIDToken:()=>y({type:"get-decoded-idp-id-token"}).then((e=>Promise.resolve(e))).catch((e=>Promise.reject(e))),getDecodedIDToken:()=>y({type:bW}).then((e=>Promise.resolve(e))).catch((e=>Promise.reject(e))),getIDToken:()=>y({type:vW}).then((e=>Promise.resolve(e))).catch((e=>Promise.reject(e))),getOIDCServiceEndpoints:f,httpRequest:e=>{(null==e?void 0:e.data)&&(null==e?void 0:e.data)instanceof FormData&&(e.data=Object.assign(Object.assign({},Object.fromEntries(null==e?void 0:e.data.entries())),{formData:!0}));return y({data:e,type:oW}).then((e=>Promise.resolve(e))).catch((e=>JV(void 0,void 0,void 0,(function*(){return a&&("function"==typeof c.requestErrorCallback&&(yield c.requestErrorCallback(e)),"function"==typeof c.requestFinishCallback&&c.requestFinishCallback()),Promise.reject(e)}))))},httpRequestAll:e=>y({data:e,type:cW}).then((e=>Promise.resolve(e))).catch((e=>JV(void 0,void 0,void 0,(function*(){return a&&("function"==typeof c.requestErrorCallback&&(yield c.requestErrorCallback(e)),"function"==typeof c.requestFinishCallback&&c.requestFinishCallback()),Promise.reject(e)})))),initialize:()=>{c||(c={requestErrorCallback:()=>Promise.resolve(),requestFinishCallback:()=>null,requestStartCallback:()=>null,requestSuccessCallback:()=>null}),p.onmessage=e=>{let{data:t}=e;switch(t.type){case uW:(null==c?void 0:c.requestFinishCallback)&&(null==c||c.requestFinishCallback());break;case sW:(null==c?void 0:c.requestStartCallback)&&(null==c||c.requestStartCallback());break;case dW:(null==c?void 0:c.requestSuccessCallback)&&(null==c||c.requestSuccessCallback(t.data?JSON.parse(t.data):null))}};return y({data:n,type:iW}).then((()=>Promise.resolve(!0))).catch((e=>Promise.reject(e)))},isAuthenticated:K,refreshAccessToken:()=>y({type:IW}),requestCustomGrant:e=>y({data:e,type:rW}).then((t=>(e.preventSignOutURLUpdate&&(s=!0),Promise.resolve(t)))).catch((e=>Promise.reject(e))),revokeAccessToken:()=>y({type:aW}).then((e=>(b.reset(),Promise.resolve(e)))).catch((e=>Promise.reject(e))),setHttpRequestErrorCallback:e=>{e&&"function"==typeof e&&(c.requestErrorCallback=e)},setHttpRequestFinishCallback:e=>{e&&"function"==typeof e&&(c.requestFinishCallback=e)},setHttpRequestStartCallback:e=>{e&&"function"==typeof e&&(c.requestStartCallback=e)},setHttpRequestSuccessCallback:e=>{e&&"function"==typeof e&&(c.requestSuccessCallback=e)},signIn:(t,i,l,o)=>JV(void 0,void 0,void 0,(function*(){var c,r,a;const s=yield m.handleSignIn(S,V,R);if(s)return s;{let s,d,u;return(null==n?void 0:n.responseMode)===e.ResponseMode.formPost&&i?(s=i,d=null!=l?l:"",u=null!=o?o:""):(s=null!==(c=new URL(window.location.href).searchParams.get(TV))&&void 0!==c?c:"",d=null!==(r=new URL(window.location.href).searchParams.get(wV))&&void 0!==r?r:"",u=null!==(a=new URL(window.location.href).searchParams.get(zV))&&void 0!==a?a:"",QW.removeAuthorizationCode()),s&&u?g(s,d,u):I(t).then((e=>JV(void 0,void 0,void 0,(function*(){return location.href=e.authorizationURL,yield QW.waitTillPageRedirect(),Promise.resolve({allowedScopes:"",displayName:"",email:"",sessionState:"",sub:"",tenantDomain:"",username:""})})))).catch((e=>Promise.reject(e)))}})),signOut:()=>K().then((e=>JV(void 0,void 0,void 0,(function*(){if(e&&!s){return y({type:lW}).then((e=>JV(void 0,void 0,void 0,(function*(){return window.location.href=e,yield QW.waitTillPageRedirect(),Promise.resolve(!0)})))).catch((e=>Promise.reject(e)))}return window.location.href=QW.getSignOutURL(n.clientID,t),yield QW.waitTillPageRedirect(),Promise.resolve(!0)})))).catch((e=>Promise.reject(e))),trySignInSilently:()=>JV(void 0,void 0,void 0,(function*(){return yield m.trySignInSilently(W,g,b)})),updateConfig:e=>JV(void 0,void 0,void 0,(function*(){const t=yield v(),n=!(t&&t.endpoints&&t.endpoints.checkSessionIframe&&e&&e.endpoints&&e.endpoints.checkSessionIframe&&t.endpoints.checkSessionIframe===e.endpoints.checkSessionIframe),i=Object.assign(Object.assign({},t),e),l={data:i,type:fW};yield y(l),i.enableOIDCSessionManagement&&n&&(b.reset(),V())}))}})),yf={checkSessionInterval:3,clientHost:origin,enableOIDCSessionManagement:!1,sessionRefreshInterval:300,storage:e.Storage.SessionStorage};class Gf{constructor(e){this._authHelper=EW,this._worker=nW,this._initialized=!1,this._startedInitialize=!1,this._onSignInCallback=()=>null,this._onSignOutCallback=()=>null,this._onSignOutFailedCallback=()=>null,this._onEndUserSession=()=>null,this._onInitialize=()=>null,this._onCustomGrant=new Map,this._instanceID=e}instantiateAuthHelper(e){this._authHelper=e||EW}instantiateWorker(e){this._worker=e||nW}_isInitialized(){return JV(this,void 0,void 0,(function*(){if(!this._startedInitialize)return!1;let e=0;for(;!this._initialized;)1e4===e&&console.warn("It is taking longer than usual for the object to be initialized"),yield new Promise((e=>setTimeout(e,1))),e++;return!0}))}_validateMethod(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return JV(this,void 0,void 0,(function*(){return(yield this._isInitialized())?!(e&&!(yield this.isAuthenticated()))||Promise.reject(new BV("SPA-AUTH_CLIENT-VM-IV02","The user is not authenticated.","The user must be authenticated first.")):Promise.reject(new BV("SPA-AUTH_CLIENT-VM-NF01","The SDK is not initialized.","The SDK must be initialized first."))}))}static getInstance(e){var t,n;return e&&(null===(t=this._instances)||void 0===t?void 0:t.get(e))?this._instances.get(e):!e&&(null===(n=this._instances)||void 0===n?void 0:n.get(0))?this._instances.get(0):e?(this._instances.set(e,new Gf(e)),this._instances.get(e)):(this._instances.set(0,new Gf(0)),this._instances.get(0))}initialize(t,n,i){var l;return JV(this,void 0,void 0,(function*(){if(this._storage=null!==(l=t.storage)&&void 0!==l?l:e.Storage.SessionStorage,this._initialized=!1,this._startedInitialize=!0,n&&this.instantiateAuthHelper(n),i&&this.instantiateWorker(i),this._storage!==e.Storage.WebWorker){if(!this._client){const e=t,n=Object.assign({},yf);this._client=yield mf(this._instanceID,Object.assign(Object.assign({},n),e),((e,t)=>new this._authHelper(e,t)))}return this._initialized=!0,this._onInitialize&&this._onInitialize(!0),window.addEventListener("message",(e=>{var t;(null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.type)===gW&&this.signOut()})),Promise.resolve(!0)}if(!this._client){const e=t;return this._client=yield pf(this._instanceID,Object.assign(Object.assign({},yf),e),this._worker,((e,t)=>new this._authHelper(e,t))),this._client.initialize().then((()=>(this._onInitialize&&this._onInitialize(!0),this._initialized=!0,Promise.resolve(!0)))).catch((e=>Promise.reject(e)))}return Promise.resolve(!0)}))}getBasicUserInfo(){var e;return JV(this,void 0,void 0,(function*(){return yield this._validateMethod(),null===(e=this._client)||void 0===e?void 0:e.getBasicUserInfo()}))}signIn(e,t,n,i){var l;return JV(this,void 0,void 0,(function*(){if(yield this._isInitialized(),QW.canContinueSignIn(Boolean(null==e?void 0:e.callOnlyOnRedirect),t))return null==e||delete e.callOnlyOnRedirect,null===(l=this._client)||void 0===l?void 0:l.signIn(e,t,n,i).then((e=>(this._onSignInCallback&&(e.allowedScopes||e.displayName||e.email||e.username)&&this._onSignInCallback(e),e)))}))}trySignInSilently(){var e;return JV(this,void 0,void 0,(function*(){if(yield this._isInitialized(),!QW.wasSignInCalled())return null===(e=this._client)||void 0===e?void 0:e.trySignInSilently().then((e=>{if(this._onSignInCallback&&e){const t=e;(t.allowedScopes||t.displayName||t.email||t.username)&&this._onSignInCallback(t)}return e}))}))}signOut(){var e,t;return JV(this,void 0,void 0,(function*(){yield this._validateMethod();return null!==(t=yield null===(e=this._client)||void 0===e?void 0:e.signOut())&&void 0!==t&&t}))}httpRequest(e){var t;return JV(this,void 0,void 0,(function*(){return yield this._validateMethod(e.attachToken),null===(t=this._client)||void 0===t?void 0:t.httpRequest(e)}))}httpRequestAll(e){var t;return JV(this,void 0,void 0,(function*(){return yield this._validateMethod(),null===(t=this._client)||void 0===t?void 0:t.httpRequestAll(e)}))}requestCustomGrant(e){var t,n;return JV(this,void 0,void 0,(function*(){if(e.signInRequired,yield this._validateMethod(),!e.id)return Promise.reject(new BV("SPA-AUTH_CLIENT-RCG-NF01","The custom grant request id not found.","The id attribute of the custom grant config object passed as an argument should have a value."));const i=yield null===(t=this._client)||void 0===t?void 0:t.requestCustomGrant(e),l=this._onCustomGrant.get(e.id);return l&&l(null===(n=this._onCustomGrant)||void 0===n?void 0:n.get(e.id)),i}))}revokeAccessToken(){var e;return JV(this,void 0,void 0,(function*(){yield this._validateMethod();const t=yield null===(e=this._client)||void 0===e?void 0:e.revokeAccessToken();return this._onEndUserSession&&(yield this._onEndUserSession(t)),t}))}getOIDCServiceEndpoints(){var e;return JV(this,void 0,void 0,(function*(){return yield this._isInitialized(),null===(e=this._client)||void 0===e?void 0:e.getOIDCServiceEndpoints()}))}getHttpClient(){if(this._client){if(this._storage!==e.Storage.WebWorker){return this._client.getHttpClient()}throw new BV("SPA-AUTH_CLIENT-GHC-IV01","Http client cannot be returned.","The http client cannot be returned when the storage type is set to webWorker.")}throw new BV("SPA-AUTH_CLIENT-GHC-NF02","The SDK is not initialized.","The SDK has not been initialized yet. Initialize the SDK using the initialize method before calling this method.")}getDecodedIDToken(){var e;return JV(this,void 0,void 0,(function*(){return yield this._validateMethod(),null===(e=this._client)||void 0===e?void 0:e.getDecodedIDToken()}))}getCryptoHelper(){var e;return JV(this,void 0,void 0,(function*(){return yield this._validateMethod(),null===(e=this._client)||void 0===e?void 0:e.getCryptoHelper()}))}getIDToken(){var e;return JV(this,void 0,void 0,(function*(){return yield this._validateMethod(),null===(e=this._client)||void 0===e?void 0:e.getIDToken()}))}getAccessToken(){return JV(this,void 0,void 0,(function*(){if(yield this._validateMethod(),this._storage&&[(e.Storage.WebWorker,e.Storage.BrowserMemory)].includes(this._storage))return Promise.reject(new BV("SPA-AUTH_CLIENT-GAT-IV01","The access token cannot be returned.","The access token cannot be returned when the storage type is set to webWorker or browserMemory."));return this._client.getAccessToken()}))}getIDPAccessToken(){return JV(this,void 0,void 0,(function*(){if(yield this._validateMethod(),this._storage&&[(e.Storage.WebWorker,e.Storage.BrowserMemory)].includes(this._storage))return Promise.reject(new BV("SPA-AUTH_CLIENT-GIAT-IV01","The access token cannot be returned.","The access token cannot be returned when the storage type is set to webWorker or browserMemory."));return this._client.getAccessToken()}))}getDataLayer(){return JV(this,void 0,void 0,(function*(){if(yield this._validateMethod(),this._storage&&[(e.Storage.WebWorker,e.Storage.BrowserMemory)].includes(this._storage))return Promise.reject(new BV("SPA-AUTH_CLIENT-GDL-IV01","The data layer cannot be returned.","The data layer cannot be returned when the storage type is set to webWorker or browserMemory."));return this._client.getDataLayer()}))}refreshAccessToken(){var e;return JV(this,void 0,void 0,(function*(){return yield this._validateMethod(),null===(e=this._client)||void 0===e?void 0:e.refreshAccessToken()}))}isAuthenticated(){var e;return JV(this,void 0,void 0,(function*(){return yield this._isInitialized(),null===(e=this._client)||void 0===e?void 0:e.isAuthenticated()}))}isSessionActive(){return JV(this,void 0,void 0,(function*(){if(yield this._isInitialized(),this._storage&&[(e.Storage.WebWorker,e.Storage.BrowserMemory)].includes(this._storage))return Promise.reject(new BV("SPA-AUTH_CLIENT-ISA-IV01","The active session cannot be returned.","The active session cannot be returned when the storage type is set to webWorker or browserMemory."));const t=this._client;return null==t?void 0:t.isSessionActive()}))}on(t,n,i){var l,o,c,r;return JV(this,void 0,void 0,(function*(){if(yield this._isInitialized(),!n||"function"!=typeof n)throw new BV("SPA-AUTH_CLIENT-ON-IV02","Invalid callback function.","The provided callback function is invalid.");switch(t){case e.Hooks.SignIn:this._onSignInCallback=n;break;case e.Hooks.SignOut:this._onSignOutCallback=n,(yield QW.isSignOutSuccessful())&&this._onSignOutCallback();break;case e.Hooks.RevokeAccessToken:this._onEndUserSession=n;break;case e.Hooks.Initialize:this._onInitialize=n;break;case e.Hooks.HttpRequestError:null===(l=this._client)||void 0===l||l.setHttpRequestErrorCallback(n);break;case e.Hooks.HttpRequestFinish:null===(o=this._client)||void 0===o||o.setHttpRequestFinishCallback(n);break;case e.Hooks.HttpRequestStart:null===(c=this._client)||void 0===c||c.setHttpRequestStartCallback(n);break;case e.Hooks.HttpRequestSuccess:null===(r=this._client)||void 0===r||r.setHttpRequestSuccessCallback(n);break;case e.Hooks.CustomGrant:i&&this._onCustomGrant.set(i,n);break;case e.Hooks.SignOutFailed:{this._onSignOutFailedCallback=n;const e=QW.didSignOutFail();e&&this._onSignOutFailedCallback(e);break}default:throw new BV("SPA-AUTH_CLIENT-ON-IV01","Invalid hook.","The provided hook is invalid.")}}))}enableHttpHandler(){var e;return JV(this,void 0,void 0,(function*(){return yield this._isInitialized(),null===(e=this._client)||void 0===e?void 0:e.enableHttpHandler()}))}disableHttpHandler(){var e;return JV(this,void 0,void 0,(function*(){return yield this._isInitialized(),null===(e=this._client)||void 0===e?void 0:e.disableHttpHandler()}))}updateConfig(t){return JV(this,void 0,void 0,(function*(){if(yield this._isInitialized(),this._storage===e.Storage.WebWorker){const e=this._client;yield e.updateConfig(t)}else{const e=this._client;yield e.updateConfig(t)}}))}}Gf._instances=new Map;class Xf extends Worker{constructor(){super(...arguments),this.onmessage=()=>null}}return e.ASGARDEO_SESSION_ACTIVE="asgardeo-session-active",e.AUTHORIZATION_CODE=TV,e.AsgardeoAuthClient=AV,e.AsgardeoAuthException=BV,e.AsgardeoSPAClient=Gf,e.AuthenticationHelper=EW,e.AuthenticationUtils=jV,e.CLIENT_ID_TAG="{{clientID}}",e.CLIENT_SECRET_TAG="{{clientSecret}}",e.CryptoHelper=QV,e.DataLayer=DV,e.MainThreadClient=mf,e.OIDC_SCOPE="openid",e.PKCE_CODE_VERIFIER="pkce_code_verifier",e.PKCE_SEPARATOR="#",e.REFRESH_TOKEN_TIMER=UV,e.SCOPE_TAG="{{scope}}",e.SESSION_STATE=wV,e.SIGN_OUT_SUCCESS_PARAM=xV,e.SIGN_OUT_URL=FV,e.SPAHelper=DW,e.SPAUtils=QW,e.STATE=zV,e.SUPPORTED_SIGNATURE_ALGORITHMS=HV,e.TOKEN_TAG="{{token}}",e.USERNAME_TAG="{{username}}",e.WebWorkerClass=Xf,e.WebWorkerClient=pf,e.workerReceiver=e=>{const t=self;let n;t.onmessage=t=>{let{data:c,ports:r}=t;return JV(void 0,void 0,void 0,(function*(){var t,a,s,d,u,h;const Z=r[0];if(c.type===iW||n)switch(c.type){case iW:try{const t=Object.assign({},c.data);n=yield((e,t)=>JV(void 0,void 0,void 0,(function*(){const n=new oS,i=new bf,l=new AV;yield l.initialize(e,n,i);const o=new DW(l),c=t(l,o),r=l.getDataLayer(),a=iS.getInstance();return(null==a?void 0:a.init)&&(yield a.init(!0,(e=>JV(void 0,void 0,void 0,(function*(){yield c.attachTokenToRequestConfig(e)}))))),{disableHttpHandler:()=>{c.disableHttpHandler(a)},enableHttpHandler:()=>{c.enableHttpHandler(a)},getAccessToken:()=>c.getAccessToken(),getAuthorizationURL:e=>JV(void 0,void 0,void 0,(function*(){return l.getAuthorizationURL(e).then((e=>JV(void 0,void 0,void 0,(function*(){var t;const n=null!==(t=new URL(e).searchParams.get(zV))&&void 0!==t?t:"",i=yield l.getPKCECode(n);return{authorizationURL:e,pkce:i}})))).catch((e=>Promise.reject(e)))})),getBasicUserInfo:()=>JV(void 0,void 0,void 0,(function*(){return c.getBasicUserInfo()})),getConfigData:()=>JV(void 0,void 0,void 0,(function*(){return r.getConfigData()})),getCryptoHelper:()=>JV(void 0,void 0,void 0,(function*(){return c.getCryptoHelper()})),getDecodedIDPIDToken:()=>JV(void 0,void 0,void 0,(function*(){return c.getDecodedIDPIDToken()})),getDecodedIDToken:()=>JV(void 0,void 0,void 0,(function*(){return c.getDecodedIDToken()})),getIDToken:()=>JV(void 0,void 0,void 0,(function*(){return c.getIDToken()})),getOIDCServiceEndpoints:()=>JV(void 0,void 0,void 0,(function*(){return c.getOIDCServiceEndpoints()})),getSignOutURL:()=>JV(void 0,void 0,void 0,(function*(){return yield l.getSignOutURL()})),httpRequest:e=>JV(void 0,void 0,void 0,(function*(){return yield c.httpRequest(a,e)})),httpRequestAll:e=>JV(void 0,void 0,void 0,(function*(){return yield c.httpRequestAll(e,a)})),isAuthenticated:()=>c.isAuthenticated(),refreshAccessToken:()=>JV(void 0,void 0,void 0,(function*(){try{return yield c.refreshAccessToken()}catch(e){return Promise.reject(e)}})),requestAccessToken:(e,t,n,i)=>JV(void 0,void 0,void 0,(function*(){return yield c.requestAccessToken(e,t,void 0,n,i)})),requestCustomGrant:e=>JV(void 0,void 0,void 0,(function*(){return yield c.requestCustomGrant(e)})),revokeAccessToken:()=>JV(void 0,void 0,void 0,(function*(){const e=yield o.getRefreshTimeoutTimer();return l.revokeAccessToken().then((()=>(o.clearRefreshTokenTimeout(e),Promise.resolve(!0)))).catch((e=>Promise.reject(e)))})),setHttpRequestFinishCallback:e=>{(null==a?void 0:a.setHttpRequestFinishCallback)&&a.setHttpRequestFinishCallback(e)},setHttpRequestStartCallback:e=>{(null==a?void 0:a.setHttpRequestStartCallback)&&a.setHttpRequestStartCallback(e)},setHttpRequestSuccessCallback:e=>{(null==a?void 0:a.setHttpRequestSuccessCallback)&&a.setHttpRequestSuccessCallback(e)},setSessionState:e=>JV(void 0,void 0,void 0,(function*(){yield r.setSessionDataParameter(wV,e)})),signOut:()=>JV(void 0,void 0,void 0,(function*(){return o.clearRefreshTokenTimeout(),yield l.getSignOutURL()})),startAutoRefreshToken:()=>JV(void 0,void 0,void 0,(function*(){o.clearRefreshTokenTimeout(),o.refreshAccessTokenAutomatically(c)})),updateConfig:e=>JV(void 0,void 0,void 0,(function*(){yield l.updateConfig(e)}))}})))(t,e),n.setHttpRequestFinishCallback(o),n.setHttpRequestStartCallback(i),n.setHttpRequestSuccessCallback(l),Z.postMessage(MW.generateSuccessMessage())}catch(e){Z.postMessage(MW.generateFailureMessage(e))}break;case GW:n.getAuthorizationURL(null==c?void 0:c.data).then((e=>{Z.postMessage(MW.generateSuccessMessage(e))})).catch((e=>{Z.postMessage(MW.generateFailureMessage(e))}));break;case XW:n.requestAccessToken(null===(t=null==c?void 0:c.data)||void 0===t?void 0:t.code,null===(a=null==c?void 0:c.data)||void 0===a?void 0:a.sessionState,null===(s=null==c?void 0:c.data)||void 0===s?void 0:s.pkce,null===(d=null==c?void 0:c.data)||void 0===d?void 0:d.state).then((e=>{Z.postMessage(MW.generateSuccessMessage(e))})).catch((e=>{Z.postMessage(MW.generateFailureMessage(e))}));break;case oW:{const e=c.data,t=null==e?void 0:e.data;if(!0===(null===(h=null===(u=c.data)||void 0===u?void 0:u.data)||void 0===h?void 0:h.formData)){const n=new FormData;for(const e in t)"formData"!==e&&n.append(e,t[e]);e.data=n}n.httpRequest(e).then((e=>{Z.postMessage(MW.generateSuccessMessage(e))})).catch((e=>{Z.postMessage(MW.generateFailureMessage(e))}));break}case cW:n.httpRequestAll(c.data).then((e=>{Z.postMessage(MW.generateSuccessMessage(e))})).catch((e=>{Z.postMessage(MW.generateFailureMessage(e))}));break;case lW:try{Z.postMessage(MW.generateSuccessMessage(yield n.signOut()))}catch(e){Z.postMessage(MW.generateFailureMessage(e))}break;case rW:n.requestCustomGrant(c.data).then((e=>{Z.postMessage(MW.generateSuccessMessage(e))})).catch((e=>{Z.postMessage(MW.generateFailureMessage(e))}));break;case aW:n.revokeAccessToken().then((e=>{Z.postMessage(MW.generateSuccessMessage(e))})).catch((e=>{Z.postMessage(MW.generateFailureMessage(e))}));break;case hW:try{Z.postMessage(MW.generateSuccessMessage(yield n.getOIDCServiceEndpoints()))}catch(e){Z.postMessage(MW.generateFailureMessage(e))}break;case ZW:try{Z.postMessage(MW.generateSuccessMessage(yield n.getBasicUserInfo()))}catch(e){Z.postMessage(MW.generateFailureMessage(e))}break;case bW:try{Z.postMessage(MW.generateSuccessMessage(yield n.getDecodedIDToken()))}catch(e){Z.postMessage(MW.generateFailureMessage(e))}break;case mW:try{Z.postMessage(MW.generateSuccessMessage(yield n.getCryptoHelper()))}catch(e){Z.postMessage(MW.generateFailureMessage(e))}break;case vW:try{Z.postMessage(MW.generateSuccessMessage(yield n.getIDToken()))}catch(e){Z.postMessage(MW.generateFailureMessage(e))}break;case pW:n.enableHttpHandler(),Z.postMessage(MW.generateSuccessMessage());break;case yW:n.disableHttpHandler(),Z.postMessage(MW.generateSuccessMessage());break;case VW:try{Z.postMessage(MW.generateSuccessMessage(yield n.isAuthenticated()))}catch(e){Z.postMessage(MW.generateFailureMessage(e))}break;case WW:try{Z.postMessage(MW.generateSuccessMessage(yield n.getSignOutURL()))}catch(e){Z.postMessage(MW.generateFailureMessage(e))}break;case IW:try{Z.postMessage(MW.generateSuccessMessage(yield n.refreshAccessToken()))}catch(e){Z.postMessage(MW.generateFailureMessage(e))}break;case RW:try{Z.postMessage(MW.generateSuccessMessage(n.startAutoRefreshToken()))}catch(e){Z.postMessage(MW.generateFailureMessage(e))}break;case SW:try{Z.postMessage(MW.generateSuccessMessage(yield n.setSessionState(null==c?void 0:c.data)))}catch(e){Z.postMessage(MW.generateFailureMessage(e))}break;case fW:try{Z.postMessage(MW.generateSuccessMessage(yield n.updateConfig(null==c?void 0:c.data)))}catch(e){Z.postMessage(MW.generateFailureMessage(e))}break;case NW:try{Z.postMessage(MW.generateSuccessMessage(yield n.getConfigData()))}catch(e){Z.postMessage(MW.generateFailureMessage(e))}break;default:null==Z||Z.postMessage(MW.generateFailureMessage(new BV("SPA-CLIENT_WORKER-ONMSG-IV02","The message type is invalid.","The message type provided, ".concat(c.type,", is invalid."))))}else Z.postMessage(MW.generateFailureMessage(new BV("SPA-CLIENT_WORKER-ONMSG-NF01","The web worker has not been initialized yet.","The initialize method needs to be called before the specified operation can be carried out.")))}))};const i=()=>{t.postMessage({type:sW})},l=e=>{t.postMessage({data:JSON.stringify(null!=e?e:""),type:dW})},o=()=>{t.postMessage({type:uW})}},Object.defineProperty(e,"__esModule",{value:!0}),e}({});
//# sourceMappingURL=asgardeo-spa.production.min.js.map
